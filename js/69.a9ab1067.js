"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[69],{33057:(e,t,o)=>{o.r(t),o.d(t,{default:()=>S});var n=o(59835),a=o(86970);function l(e,t,o,l,s,i){const r=(0,n.up)("collection-create"),c=(0,n.up)("q-btn"),d=(0,n.up)("q-td"),m=(0,n.up)("q-item-section"),u=(0,n.up)("q-avatar"),p=(0,n.up)("q-item"),_=(0,n.up)("q-menu"),f=(0,n.up)("q-icon"),w=(0,n.up)("q-tr"),h=(0,n.up)("q-input"),b=(0,n.up)("q-table"),y=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(y,{padding:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r),(0,n.Wm)(b,{filter:e.filter,columns:e.columns,rows:e.$store.state.node.data.collections,"row-key":"name",pagination:{rowsPerPage:0,sortBy:"name"}},{body:(0,n.w5)((t=>[(0,n.Wm)(w,{props:t},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{key:"name",props:t},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{"no-caps":"",flat:"",to:`/collection/${t.row.name}/search`,size:"1.2em",class:"text-bold"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.row.name),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,n.Wm)(d,{key:"actions",props:t},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{flat:"",round:"",icon:"sym_s_more_vert"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{dense:"",clickable:"",to:`/collection/${t.row.name}/document`},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Import")])),_:1}),(0,n.Wm)(m,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{icon:"sym_s_file_upload"})])),_:1})])),_:2},1032,["to"]),(0,n.Wm)(p,{dense:"",clickable:"",onClick:o=>e.exportCollection(t.row.name)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Export")])),_:1}),(0,n.Wm)(m,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{icon:"sym_s_file_download"})])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(p,{dense:"",clickable:"",to:`/collection/${t.row.name}/schema`},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Edit")])),_:1}),(0,n.Wm)(m,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{icon:"sym_s_data_object"})])),_:1})])),_:2},1032,["to"]),(0,n.Wm)(p,{dense:"",clickable:"",onClick:o=>e.cloneCollection(t.row.name)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Clone Schema")])),_:1}),(0,n.Wm)(m,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{icon:"sym_s_content_copy"})])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(p,{dense:"",clickable:"",flat:"",style:{color:"#de3b39"},onClick:o=>e.drop(t.row.name)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Delete")])),_:1}),(0,n.Wm)(m,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{icon:"sym_s_delete"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"]),(0,n.Wm)(d,{key:"num_documents",props:t},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{"no-caps":"",flat:"",to:`/collection/${t.row.name}/search`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.row.num_documents)+" ",1),(0,n.Wm)(f,{name:"sym_s_search",size:"1em",right:""})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,n.Wm)(d,{key:"schema_fields",props:t},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{"no-caps":"",flat:"",to:`/collection/${t.row.name}/schema`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.row.fields.length||0)+" ",1),(0,n.Wm)(f,{name:"sym_s_data_object",size:"1em",right:""})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,n.Wm)(d,{key:"created_at",props:t},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(new Date(1e3*t.row.created_at).toLocaleString()),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(h,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),placeholder:"Search"},{append:(0,n.w5)((()=>[(0,n.Wm)(f,{name:"sym_s_search"})])),_:1},8,["modelValue"])])),_:1},8,["filter","columns","rows"])])),_:1})}function s(e,t,o,a,l,s){const i=(0,n.up)("collection-ui"),r=(0,n.up)("q-expansion-item"),c=(0,n.up)("q-list");return(0,n.wg)(),(0,n.j4)(c,{bordered:"",class:"rounded-borders"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{"expand-separator":"",icon:"sym_s_library_add","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:"Add Collection","header-class":"bg-primary text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{"primary-action-label":"Create Collection","create-mode":"",onSubmit:e.createCollection},null,8,["onSubmit"])])),_:1})])),_:1})}var i=o(75794);const r=(0,n.aZ)({components:{CollectionUi:i.Z},name:"CollectionCreate",methods:{createCollection(e){const t=JSON.parse(JSON.stringify(e));for(const o of t.fields)"float[]"===o.type&&o.num_dim||delete o.num_dim,o.type.startsWith("object")&&(t.enable_nested_fields=!0);this.$store.dispatch("node/createCollection",t)}}});var c=o(11639),d=o(13246),m=o(61123),u=o(69984),p=o.n(u);const _=(0,c.Z)(r,[["render",s]]),f=_;p()(r,"components",{QList:d.Z,QExpansionItem:m.Z});var w=function(e,t,o,n){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{r(n.next(e))}catch(t){l(t)}}function i(e){try{r(n["throw"](e))}catch(t){l(t)}}function r(e){e.done?o(e.value):a(e.value).then(s,i)}r((n=n.apply(e,t||[])).next())}))};const h=(0,n.aZ)({components:{CollectionCreate:f},name:"Collections",data(){return{filter:"",columns:[{name:"name",required:!0,label:"Name",field:"name",sortable:!0},{name:"actions",required:!1,label:"Actions",field:"actions",sortable:!1},{name:"num_documents",required:!0,label:"Nb documents",field:"num_documents",sortable:!0},{name:"schema_fields",required:!0,label:"Schema fields",field:"fields",sortable:!0},{name:"created_at",required:!0,label:"Created at",field:"created_at",sortable:!0}]}},mounted(){this.$store.dispatch("node/getCollections")},methods:{exportCollection(e){return w(this,void 0,void 0,(function*(){this.$q.loading.show({message:"Downloading. Please wait...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),yield this.$store.dispatch("node/exportDocuments",e).then((()=>this.$q.loading.hide())).catch((()=>{this.$q.loading.hide(),this.$q.dialog({title:"Export failed",message:"Try desktop version of the app."})}))}))},drop(e){this.$q.dialog({title:"Confirm",message:`Drop ${e} and all documents?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/dropCollection",e)}))},cloneCollection(e){this.$q.dialog({title:"Clone Schema",message:"Provide name for new collection? (documents are not copied!, only schema, currations and synonyms)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((t=>{this.$store.dispatch("node/cloneCollectionSchema",{collectionName:e,destinationName:t})}))}}});var b=o(69885),y=o(86008),W=o(31233),k=o(67220),C=o(24455),g=o(47447),q=o(490),v=o(76749),Z=o(61357),$=o(22857),x=o(66611);const Q=(0,c.Z)(h,[["render",l]]),S=Q;p()(h,"components",{QPage:b.Z,QTable:y.Z,QTr:W.Z,QTd:k.Z,QBtn:C.Z,QMenu:g.Z,QItem:q.Z,QItemSection:v.Z,QAvatar:Z.Z,QIcon:$.Z,QInput:x.Z})}}]);