"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[301],{54699:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var n=a(61758),i=a(58790);const s={class:"text-h6"};function o(e,t,a,o,l,r){const d=(0,n.g2)("q-btn"),c=(0,n.g2)("q-card-section"),p=(0,n.g2)("monaco-editor"),u=(0,n.g2)("q-banner"),y=(0,n.g2)("q-card-actions"),m=(0,n.g2)("q-card"),f=(0,n.g2)("q-expansion-item"),h=(0,n.g2)("q-icon"),g=(0,n.g2)("q-input"),b=(0,n.g2)("q-td"),k=(0,n.g2)("q-table"),_=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(_,{padding:""},{default:(0,n.k6)((()=>[(0,n.bF)(f,{"expand-separator":"",icon:"sym_s_add_circle","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:"Create API Key","header-class":"bg-primary text-white",modelValue:e.expanded,"onUpdate:modelValue":t[4]||(t[4]=t=>e.expanded=t)},{default:(0,n.k6)((()=>[(0,n.bF)(m,{style:{height:"60vh"},class:"bg-surface column"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"q-gutter-md"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{flat:"",onClick:t[0]||(t[0]=t=>e.loadAdminKey())},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("Admin Key Example")]))),_:1}),(0,n.bF)(d,{flat:"",onClick:t[1]||(t[1]=t=>e.loadSearchKey())},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("Search Key Example")]))),_:1}),(0,n.bF)(d,{type:"a",icon:"sym_s_help","no-caps":"",color:"info",flat:"",dense:"",href:`https://typesense.org/docs/${e.$store.state.node.data.debug.version}/api/api-keys.html#create-an-api-key`,target:"_blank"},{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.eW)("Documentation")]))),_:1},8,["href"])])),_:1}),(0,n.bF)(p,{modelValue:e.keyJson,"onUpdate:modelValue":t[2]||(t[2]=t=>e.keyJson=t)},null,8,["modelValue"]),e.jsonError?((0,n.uX)(),(0,n.Wv)(u,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,n.k6)((()=>[(0,n.eW)(" Invalid Format: "+(0,i.v_)(e.jsonError),1)])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(y,{align:"right",class:"bg-primary"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!!e.jsonError,onClick:t[3]||(t[3]=t=>e.createApiKey())},{default:(0,n.k6)((()=>t[9]||(t[9]=[(0,n.eW)("Create API Key")]))),_:1},8,["disable"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.bF)(k,{class:"q-mt-md",title:"API Keys",flat:"",bordered:"",filter:e.filter,rows:e.$store.state.node.data.apiKeys,columns:e.columns,"row-key":"id","visible-columns":["id","value_prefix","description","actions","collections","expires_at","actions_op"]},{"top-left":(0,n.k6)((()=>[(0,n.Lk)("div",s,[(0,n.bF)(h,{size:"md",name:"sym_s_key"}),t[10]||(t[10]=(0,n.eW)(" API Keys"))])])),"top-right":(0,n.k6)((()=>[(0,n.bF)(g,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[5]||(t[5]=t=>e.filter=t),placeholder:"Search"},{append:(0,n.k6)((()=>[(0,n.bF)(h,{name:"sym_s_search"})])),_:1},8,["modelValue"])])),"body-cell-actions_op":(0,n.k6)((t=>[(0,n.bF)(b,{class:"text-right"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{flat:"",color:"negative",onClick:a=>e.deleteApiKey(t.row.id),icon:"sym_s_delete_forever",title:"Delete"},null,8,["onClick"])])),_:2},1024)])),_:1},8,["filter","rows","columns"])])),_:1})}var l=a(74701),r=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(n.next(e))}catch(t){s(t)}}function l(e){try{r(n["throw"](e))}catch(t){s(t)}}function r(e){e.done?a(e.value):i(e.value).then(o,l)}r((n=n.apply(e,t||[])).next())}))};const d={description:"Admin key.",actions:["*"],collections:["*"]},c={description:"Search-only companies key.",actions:["documents:search"],collections:["companies"]},p=(0,n.pM)({name:"ApiKeys",components:{MonacoEditor:l.A},data(){return{jsonError:null,key:JSON.parse(JSON.stringify(d)),expanded:0===this.$store.state.node.data.apiKeys.length,filter:"",columns:[{label:"ID",name:"id",field:"id",sortable:!0},{label:"Key prefix",name:"value_prefix",field:"value_prefix"},{label:"Description",name:"description",field:"description",sortable:!0,align:"left"},{label:"Key Actions",name:"actions",field:e=>JSON.stringify(e.actions),sortable:!0,align:"left"},{label:"Collections",name:"collections",field:e=>JSON.stringify(e.collections),sortable:!0,align:"left"},{label:"Expires at",name:"expires_at",field:e=>e.expires_at?64723363199===e.expires_at?"never":new Date(1e3*e.expires_at).toLocaleString():""},{label:"Actions",name:"actions_op",align:"right"}]}},computed:{keyJson:{get(){return JSON.stringify(this.key,null,2)},set(e){try{this.key=JSON.parse(e),this.jsonError=null}catch(t){this.jsonError=t.message}}}},methods:{loadAdminKey(){this.key=JSON.parse(JSON.stringify(d))},loadSearchKey(){this.key=JSON.parse(JSON.stringify(c))},createApiKey(){return r(this,void 0,void 0,(function*(){const e=yield this.$store.dispatch("node/createApiKey",JSON.parse(JSON.stringify(this.key)));this.$q.dialog({title:"Your API key",message:`This is your API key copy it! It will not be displayed again!\n\n${e.value||""}`,cancel:!1,persistent:!0})}))},deleteApiKey(e){this.$q.dialog({title:"Confirm",message:`Delete key with id: ${e}?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/deleteApiKey",e)}))}}});var u=a(12807),y=a(77716),m=a(9459),f=a(23316),h=a(44189),g=a(1693),b=a(46868),k=a(62669),_=a(39942),A=a(50492),x=a(39270),v=a(45262),K=a(98582),S=a.n(K);const F=(0,u.A)(p,[["render",o]]),q=F;S()(p,"components",{QPage:y.A,QExpansionItem:m.A,QCard:f.A,QCardSection:h.A,QBtn:g.A,QBanner:b.A,QCardActions:k.A,QTable:_.A,QIcon:A.A,QInput:x.A,QTd:v.A})}}]);