"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[985],{70303:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var s=n(61758),a=n(58790);const o={class:"row justify-between q-mb-md"},i={class:"text-h5"};function l(e,t,n,l,c,d){const r=(0,s.g2)("q-icon"),m=(0,s.g2)("q-btn"),u=(0,s.g2)("collection-ui"),h=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(h,{padding:"",class:"column"},{default:(0,s.k6)((()=>{var n;return[(0,s.Lk)("div",o,[(0,s.Lk)("div",i,[(0,s.bF)(r,{size:"md",name:"sym_s_data_object"}),(0,s.eW)(" Schema for "+(0,a.v_)(null===(n=e.$store.state.node.currentCollection)||void 0===n?void 0:n.name),1)]),(0,s.bF)(m,{unelevated:"",color:"negative",onClick:t[0]||(t[0]=t=>{var n;return e.drop((null===(n=e.$store.state.node.currentCollection)||void 0===n?void 0:n.name)||"")})},{default:(0,s.k6)((()=>t[1]||(t[1]=[(0,s.eW)("Drop Collection")]))),_:1})]),(0,s.bF)(u,{"initial-schema":e.schema,"primary-action-label":"Update Schema",onSubmit:e.update},null,8,["initial-schema","onSubmit"])]})),_:1})}var c=n(93930);const d=(0,s.pM)({name:"Schema",components:{CollectionUi:c.A},computed:{schema(){const e=this.$store.state.node.currentCollection;if(e){const t={name:e.name,fields:e.fields.map((e=>{const t=["name","type","facet","optional","index","sort","infix","locale"],n=Object.keys(e).filter((e=>!t.includes(e)));return t.concat(n).reduce(((t,n)=>(t[n]=e[n],t)),{})})),default_sorting_field:e.default_sorting_field},n=Object.keys(e).filter((e=>!["name","fields","default_sorting_field","created_at","num_documents"].includes(e)));return n.forEach((n=>{t[n]=e[n]})),t}return{name:"",fields:[],default_sorting_field:"",token_separators:[],symbols_to_index:[],enable_nested_fields:!1}}},methods:{drop(e){this.$q.dialog({title:"Confirm",message:`Drop ${e} and all documents?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/dropCollection",e)}))},update(e){if(!this.schema||!this.schema.name||!this.schema.fields)return;const t={fields:this.schema.fields.map((e=>({name:e.name,drop:!0}))).concat(e.fields)};this.$store.dispatch("node/updateCollection",{collectionName:this.schema.name,schema:t})}}});var r=n(12807),m=n(77716),u=n(50492),h=n(1693),f=n(98582),p=n.n(f);const _=(0,r.A)(d,[["render",l]]),b=_;p()(d,"components",{QPage:m.A,QIcon:u.A,QBtn:h.A})}}]);