"use strict";(self["webpackChunktypesense_dashboard"]=self["webpackChunktypesense_dashboard"]||[]).push([[622],{49375:(e,o,t)=>{t.d(o,{Z:()=>f});var n=t(83673);const l={ref:"editorWrapper",class:"col relative-position overflow-hidden editorWrapper"},a={ref:"editorElement",class:"absolute-top-left"};function i(e,o,t,i,d,s){const r=(0,n.up)("q-resize-observer");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(r,{onResize:e.onResize},null,8,["onResize"]),(0,n._)("div",a,null,512)],512)}var d=t(19966),s=t(61959);const r=(0,n.aZ)({name:"MonacoEditor",props:{modelValue:{type:String,default:""},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:o}){const t=(0,s.iH)(null),l=(0,s.iH)(null);let a;return(0,n.bv)((()=>{a=d.editor.create(t.value,Object.assign({value:e.modelValue,language:"json",theme:"vs-dark",minimap:{enabled:!1}},e.options)),a.onDidChangeModelContent((()=>{o("update:modelValue",null===a||void 0===a?void 0:a.getValue())}))})),(0,n.Ah)((()=>{null===a||void 0===a||a.dispose()})),(0,n.YP)((()=>e.modelValue),(()=>{var o;e.modelValue!==(null===a||void 0===a?void 0:a.getValue())&&(null===(o=null===a||void 0===a?void 0:a.getModel())||void 0===o||o.setValue(e.modelValue),null===a||void 0===a||a.setScrollPosition({scrollTop:0}))})),{editorElement:t,editorWrapper:l,onResize(){null===a||void 0===a||a.layout({height:0,width:0}),window.setTimeout((()=>{null===a||void 0===a||a.layout({height:l.value.offsetHeight,width:l.value.offsetWidth})}))}}}});var u=t(74260),c=t(15151),m=t(7518),p=t.n(m);const v=(0,u.Z)(r,[["render",i],["__scopeId","data-v-46f34a38"]]),f=v;p()(r,"components",{QResizeObserver:c.Z})},19622:(e,o,t)=>{t.r(o),t.d(o,{default:()=>h});var n=t(83673),l=t(62323);const a={class:"row justify-between q-mb-md"},i={class:"text-h5"};function d(e,o,t,d,s,r){const u=(0,n.up)("q-btn"),c=(0,n.up)("monaco-editor"),m=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(m,{padding:"",class:"column"},{default:(0,n.w5)((()=>{var t;return[(0,n._)("div",a,[(0,n._)("div",i," Schema for "+(0,l.zw)(null===(t=e.$store.state.node.currentCollection)||void 0===t?void 0:t.name),1),(0,n.Wm)(u,{unelevated:"",color:"negative",onClick:o[0]||(o[0]=o=>{var t;return e.drop((null===(t=e.$store.state.node.currentCollection)||void 0===t?void 0:t.name)||"")})},{default:(0,n.w5)((()=>[(0,n.Uk)("Drop Collection")])),_:1})]),(0,n.Wm)(c,{"model-value":e.schema,options:{readOnly:!0}},null,8,["model-value"])]})),_:1})}var s=t(49375);const r=(0,n.aZ)({name:"Schema",components:{MonacoEditor:s.Z},computed:{schema(){const e=this.$store.state.node.currentCollection;if(e){const o={name:e.name,fields:e.fields.map((e=>{const o=["name","type","facet","optional","index","sort","infix","locale"],t=Object.keys(e).filter((e=>!o.includes(e)));return o.concat(t).reduce(((o,t)=>(o[t]=e[t],o)),{})})),default_sorting_field:e.default_sorting_field},t=Object.keys(e).filter((e=>!["name","fields","default_sorting_field","created_at","num_documents"].includes(e)));return t.forEach((t=>{o[t]=e[t]})),JSON.stringify(o,null,2)}return""}},methods:{drop(e){this.$q.dialog({title:"Confirm",message:`Drop ${e} and all documents?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/dropCollection",e)}))}}});var u=t(74260),c=t(24379),m=t(48240),p=t(7518),v=t.n(p);const f=(0,u.Z)(r,[["render",d]]),h=f;v()(r,"components",{QPage:c.Z,QBtn:m.Z})}}]);