"use strict";(self["webpackChunktypesense_dashboard"]=self["webpackChunktypesense_dashboard"]||[]).push([[300],{49375:(e,l,t)=>{t.d(l,{Z:()=>h});var o=t(83673);const a={ref:"editorWrapper",class:"col relative-position overflow-hidden editorWrapper"},n={ref:"editorElement",class:"absolute-top-left"};function d(e,l,t,d,i,s){const r=(0,o.up)("q-resize-observer");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(r,{onResize:e.onResize},null,8,["onResize"]),(0,o._)("div",n,null,512)],512)}var i=t(19966),s=t(61959);const r=(0,o.aZ)({name:"MonacoEditor",props:{modelValue:{type:String,default:""},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.iH)(null),a=(0,s.iH)(null);let n;return(0,o.bv)((()=>{n=i.editor.create(t.value,Object.assign({value:e.modelValue,language:"json",theme:"vs-dark",minimap:{enabled:!1}},e.options)),n.onDidChangeModelContent((()=>{l("update:modelValue",null===n||void 0===n?void 0:n.getValue())}))})),(0,o.Ah)((()=>{null===n||void 0===n||n.dispose()})),(0,o.YP)((()=>e.modelValue),(()=>{var l;e.modelValue!==(null===n||void 0===n?void 0:n.getValue())&&(null===(l=null===n||void 0===n?void 0:n.getModel())||void 0===l||l.setValue(e.modelValue),null===n||void 0===n||n.setScrollPosition({scrollTop:0}))})),{editorElement:t,editorWrapper:a,onResize(){null===n||void 0===n||n.layout({height:0,width:0}),window.setTimeout((()=>{null===n||void 0===n||n.layout({height:a.value.offsetHeight,width:a.value.offsetWidth})}))}}}});var u=t(74260),m=t(15151),c=t(7518),p=t.n(c);const f=(0,u.Z)(r,[["render",d],["__scopeId","data-v-46f34a38"]]),h=f;p()(r,"components",{QResizeObserver:m.Z})},57300:(e,l,t)=>{t.r(l),t.d(l,{default:()=>oe});var o=t(83673);function a(e,l,t,a,n,d){const i=(0,o.up)("collection-create"),s=(0,o.up)("q-icon"),r=(0,o.up)("q-input"),u=(0,o.up)("collection-list-item"),m=(0,o.up)("q-table"),c=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(c,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i),(0,o.Wm)(m,{grid:"","grid-header":"",filter:e.filter,columns:e.columns,rows:e.$store.state.node.data.collections,"row-key":"name",pagination:{rowsPerPage:0,sortBy:"name"}},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[0]||(l[0]=l=>e.filter=l),placeholder:"Search"},{append:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"search"})])),_:1},8,["modelValue"])])),item:(0,o.w5)((e=>[(0,o.Wm)(u,{collection:e.row},null,8,["collection"])])),_:1},8,["filter","columns","rows"])])),_:1})}var n=t(62323);const d={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3"},i=["title"],s=(0,o.Uk)(" Nb documents "),r=(0,o.Uk)(" Schema fields "),u=(0,o.Uk)(" Nb memory shards "),m=(0,o.Uk)(" Created at "),c=(0,o.Uk)("schema"),p=(0,o.Uk)("import"),f=(0,o.Uk)("export");function h(e,l,t,a,h,w){const b=(0,o.up)("q-item-label"),g=(0,o.up)("q-item-section"),_=(0,o.up)("q-item"),W=(0,o.up)("q-list"),v=(0,o.up)("q-card-section"),q=(0,o.up)("q-separator"),V=(0,o.up)("q-btn"),y=(0,o.up)("q-space"),Z=(0,o.up)("q-card-actions"),C=(0,o.up)("q-card");return(0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o._)("div",{class:"text-h5 text-ellipsis overflow-hidden",title:e.collection.name},(0,n.zw)(e.collection.name),9,i),(0,o.Wm)(W,{dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{to:`/collection/${e.collection.name}/search`},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{caption:""},{default:(0,o.w5)((()=>[s])),_:1})])),_:1}),(0,o.Wm)(g,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.collection.num_documents),1)])),_:1})])),_:1})])),_:1},8,["to"]),(0,o.Wm)(_,{to:`/collection/${e.collection.name}/schema`},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{caption:""},{default:(0,o.w5)((()=>[r])),_:1})])),_:1}),(0,o.Wm)(g,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.collection.fields.length),1)])),_:1})])),_:1})])),_:1},8,["to"]),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{caption:""},{default:(0,o.w5)((()=>[u])),_:1})])),_:1}),(0,o.Wm)(g,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.collection.num_memory_shards),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{caption:""},{default:(0,o.w5)((()=>[m])),_:1})])),_:1}),(0,o.Wm)(g,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(new Date(1e3*e.collection.created_at).toLocaleString()),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(q),(0,o.Wm)(Z,{align:"right",class:"bg-grey-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{flat:"",to:`/collection/${e.collection.name}/schema`},{default:(0,o.w5)((()=>[c])),_:1},8,["to"]),(0,o.Wm)(y),(0,o.Wm)(V,{flat:"",to:`/collection/${e.collection.name}/document`},{default:(0,o.w5)((()=>[p])),_:1},8,["to"]),(0,o.Wm)(V,{flat:"",onClick:l[0]||(l[0]=l=>e.exportCollection())},{default:(0,o.w5)((()=>[f])),_:1})])),_:1})])),_:1})])}var w=function(e,l,t,o){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,n){function d(e){try{s(o.next(e))}catch(l){n(l)}}function i(e){try{s(o["throw"](e))}catch(l){n(l)}}function s(e){e.done?t(e.value):a(e.value).then(d,i)}s((o=o.apply(e,l||[])).next())}))};const b=(0,o.aZ)({name:"Collection",props:["collection"],methods:{exportCollection(){return w(this,void 0,void 0,(function*(){this.$q.loading.show({message:"Downloading. Please wait...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),yield this.$store.dispatch("node/exportDocuments",this.collection.name).then((()=>this.$q.loading.hide())).catch((()=>{this.$q.loading.hide(),this.$q.dialog({title:"Export failed",message:"Try desktop version of the app."})}))}))}}});var g=t(74260),_=t(10151),W=t(25589),v=t(27011),q=t(83414),V=t(52035),y=t(2350),Z=t(65869),C=t(99367),k=t(48240),U=t(62025),Q=t(7518),x=t.n(Q);const S=(0,g.Z)(b,[["render",h]]),j=S;x()(b,"components",{QCard:_.Z,QCardSection:W.Z,QList:v.Z,QItem:q.Z,QItemSection:V.Z,QItemLabel:y.Z,QSeparator:Z.Z,QCardActions:C.Z,QBtn:k.Z,QSpace:U.Z});const z={class:"row q-gutter-md"},F=(0,o._)("div",{class:"text-subtitle1 q-pt-md"},"Fields",-1),$=(0,o.Uk)("Remove Field"),E=(0,o.Uk)("Add field"),I=(0,o.Uk)("Create Collection");function N(e,l,t,a,d,i){const s=(0,o.up)("q-tab"),r=(0,o.up)("q-tabs"),u=(0,o.up)("q-separator"),m=(0,o.up)("q-input"),c=(0,o.up)("q-select"),p=(0,o.up)("q-card-section"),f=(0,o.up)("q-checkbox"),h=(0,o.up)("q-btn"),w=(0,o.up)("q-card-actions"),b=(0,o.up)("q-card"),g=(0,o.up)("q-tab-panel"),_=(0,o.up)("monaco-editor"),W=(0,o.up)("q-banner"),v=(0,o.up)("q-tab-panels"),q=(0,o.up)("q-expansion-item"),V=(0,o.up)("q-list");return(0,o.wg)(),(0,o.j4)(V,{bordered:"",class:"rounded-borders"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{"expand-separator":"",icon:"post_add",label:"Add Collection","header-class":"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=l=>e.tab=l),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"form",label:"Form Mode"}),(0,o.Wm)(s,{name:"json",label:"JSON Mode"})])),_:1},8,["modelValue"]),(0,o.Wm)(u),(0,o.Wm)(v,{modelValue:e.tab,"onUpdate:modelValue":l[4]||(l[4]=l=>e.tab=l),animated:"",style:{height:"60vh"},class:"bg-grey-3"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{name:"form"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o._)("div",z,[(0,o.Wm)(m,{class:"col",filled:"","bg-color":"white",dense:"",modelValue:e.schema.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.schema.name=l),label:"Collection Name",placeholder:"books",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),(0,o.Wm)(c,{filled:"","bg-color":"white",class:"col",dense:"",modelValue:e.schema.default_sorting_field,"onUpdate:modelValue":l[2]||(l[2]=l=>e.schema.default_sorting_field=l),options:e.availableSortFields,label:"Default sort field optional, but must be int32 or float"},null,8,["modelValue","options"])]),F,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.schema.fields,((l,t)=>((0,o.wg)(),(0,o.j4)(b,{flat:"",bordered:"",key:t,class:"bg-grey-1 q-mb-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"row q-gutter-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"col",dense:"",filled:"","bg-color":"white",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,label:"Field Name",placeholder:"title",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","rules"]),(0,o.Wm)(c,{class:"col",dense:"",filled:"","bg-color":"white",modelValue:l.type,"onUpdate:modelValue":e=>l.type=e,label:"type",options:e.types,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"])])),_:2},1024),(0,o.Wm)(u),(0,o.Wm)(w,{align:"between"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(f,{modelValue:l.optional,"onUpdate:modelValue":e=>l.optional=e,label:"optional"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(f,{modelValue:l.facet,"onUpdate:modelValue":e=>l.facet=e,label:"facet"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(f,{modelValue:l.index,"onUpdate:modelValue":e=>l.index=e,label:"index"},null,8,["modelValue","onUpdate:modelValue"])]),(0,o.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",onClick:t=>e.removeField(l)},{default:(0,o.w5)((()=>[$])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,o.Wm)(g,{name:"json",class:"q-pa-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{modelValue:e.schemaJson,"onUpdate:modelValue":l[3]||(l[3]=l=>e.schemaJson=l),style:{height:"60vh"}},null,8,["modelValue"]),e.jsonError?((0,o.wg)(),(0,o.j4)(W,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Invalid Format: "+(0,n.zw)(e.jsonError),1)])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(u),(0,o.Wm)(w,{align:"between",class:"bg-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[5]||(l[5]=l=>e.addField())},{default:(0,o.w5)((()=>[E])),_:1}),(0,o.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[6]||(l[6]=l=>e.createCollection())},{default:(0,o.w5)((()=>[I])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var P=t(49375);const D=(0,o.aZ)({components:{MonacoEditor:P.Z},name:"CollectionCreate",data(){return{tab:"form",schema:{name:"",fields:[],default_sorting_field:""},types:["string","int32","int64","float","bool","string[]","int32[]","int64[]","float[]","bool[]","geopoint","auto"],jsonError:null}},mounted(){this.addField()},computed:{availableSortFields(){const e=this.schema.fields.filter((e=>["int32","float"].includes(e.type)));return[""].concat(e.map((e=>e.name)))},schemaJson:{get(){return JSON.stringify(this.schema,null,2)},set(e){try{this.schema=JSON.parse(e),this.jsonError=null}catch(l){this.jsonError=l.message}}}},methods:{addField(){this.schema.fields.push({name:"",type:"string",optional:!1,facet:!1,index:!0})},removeField(e){this.schema.fields.splice(this.schema.fields.indexOf(e),1)},createCollection(){this.$store.dispatch("node/createCollection",this.schema)}}});var T=t(64615),O=t(57547),J=t(3269),M=t(5906),R=t(64916),A=t(34842),L=t(68516),B=t(65735),H=t(15607);const Y=(0,g.Z)(D,[["render",N]]),K=Y;x()(D,"components",{QList:v.Z,QExpansionItem:T.Z,QCard:_.Z,QTabs:O.Z,QTab:J.Z,QSeparator:Z.Z,QTabPanels:M.Z,QTabPanel:R.Z,QCardSection:W.Z,QInput:A.Z,QSelect:L.Z,QCardActions:C.Z,QCheckbox:B.Z,QBtn:k.Z,QBanner:H.Z});const G=(0,o.aZ)({components:{CollectionListItem:j,CollectionCreate:K},name:"Collections",data(){return{filter:"",columns:[{name:"name",required:!0,label:"Name",field:"name",sortable:!0},{name:"num_documents",required:!0,label:"Nb documents",field:"num_documents",sortable:!0},{name:"schema_fields",required:!0,label:"Schema fields",field:e=>e.fields.length||0,sortable:!0},{name:"num_memory_shards",required:!0,label:"Nb memory shards",field:"num_memory_shards",sortable:!0},{name:"created_at",required:!0,label:"Created at",field:"created_at",sortable:!0}]}},mounted(){this.$store.dispatch("node/getCollections")}});var X=t(24379),ee=t(83243),le=t(24554);const te=(0,g.Z)(G,[["render",a]]),oe=te;x()(G,"components",{QPage:X.Z,QTable:ee.Z,QInput:A.Z,QIcon:le.Z})}}]);