"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[357],{70022:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var a=o(59835),n=o(86970);function l(e,t,o,l,s,r){const i=(0,a.up)("collection-create"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-td"),m=(0,a.up)("q-item-section"),u=(0,a.up)("q-avatar"),p=(0,a.up)("q-item"),_=(0,a.up)("q-menu"),f=(0,a.up)("q-icon"),w=(0,a.up)("q-tr"),h=(0,a.up)("q-input"),b=(0,a.up)("q-table"),y=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(y,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i),(0,a.Wm)(b,{filter:e.filter,columns:e.columns,rows:e.$store.state.node.data.collections,"row-key":"name",pagination:{rowsPerPage:0,sortBy:"name"}},{body:(0,a.w5)((t=>[(0,a.Wm)(w,{props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{key:"name",props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"no-caps":"",flat:"",to:`/collection/${t.row.name}/search`,size:"1.2em",class:"text-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.name),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(c,{key:"actions",props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{flat:"",round:"",icon:"sym_s_more_vert"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{dense:"",clickable:"",to:`/collection/${t.row.name}/document`},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Import")])),_:1}),(0,a.Wm)(m,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{icon:"sym_s_file_upload"})])),_:1})])),_:2},1032,["to"]),(0,a.Wm)(p,{dense:"",clickable:"",onClick:o=>e.exportCollection(t.row.name)},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Export")])),_:1}),(0,a.Wm)(m,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{icon:"sym_s_file_download"})])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(p,{dense:"",clickable:"",to:`/collection/${t.row.name}/schema`},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Edit")])),_:1}),(0,a.Wm)(m,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{icon:"sym_s_data_object"})])),_:1})])),_:2},1032,["to"]),(0,a.Wm)(p,{dense:"",clickable:"",flat:"",style:{color:"#DE3B39"},onClick:o=>e.drop(t.row.name)},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Delete")])),_:1}),(0,a.Wm)(m,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{icon:"sym_s_delete"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"]),(0,a.Wm)(c,{key:"num_documents",props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"no-caps":"",flat:"",to:`/collection/${t.row.name}/search`},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.num_documents)+" ",1),(0,a.Wm)(f,{name:"sym_s_search",size:"1em",right:""})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(c,{key:"schema_fields",props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"no-caps":"",flat:"",to:`/collection/${t.row.name}/schema`},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.fields.length||0)+" ",1),(0,a.Wm)(f,{name:"sym_s_data_object",size:"1em",right:""})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(c,{key:"created_at",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(new Date(1e3*t.row.created_at).toLocaleString()),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),"top-right":(0,a.w5)((()=>[(0,a.Wm)(h,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(f,{name:"sym_s_search"})])),_:1},8,["modelValue"])])),_:1},8,["filter","columns","rows"])])),_:1})}function s(e,t,o,n,l,s){const r=(0,a.up)("collection-ui"),i=(0,a.up)("q-expansion-item"),d=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(d,{bordered:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{"expand-separator":"",icon:"sym_s_library_add","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:"Add Collection","header-class":"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"primary-action-label":"Create Collection","create-mode":"",onSubmit:e.createCollection},null,8,["onSubmit"])])),_:1})])),_:1})}var r=o(56218);const i=(0,a.aZ)({components:{CollectionUi:r.Z},name:"CollectionCreate",methods:{createCollection(e){const t=JSON.parse(JSON.stringify(e));for(const o of t.fields)"float[]"===o.type&&o.num_dim||delete o.num_dim;this.$store.dispatch("node/createCollection",t)}}});var d=o(11639),c=o(13246),m=o(61123),u=o(69984),p=o.n(u);const _=(0,d.Z)(i,[["render",s]]),f=_;p()(i,"components",{QList:c.Z,QExpansionItem:m.Z});var w=function(e,t,o,a){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{i(a.next(e))}catch(t){l(t)}}function r(e){try{i(a["throw"](e))}catch(t){l(t)}}function i(e){e.done?o(e.value):n(e.value).then(s,r)}i((a=a.apply(e,t||[])).next())}))};const h=(0,a.aZ)({components:{CollectionCreate:f},name:"Collections",data(){return{filter:"",columns:[{name:"name",required:!0,label:"Name",field:"name",sortable:!0},{name:"actions",required:!1,label:"Actions",field:"actions",sortable:!1},{name:"num_documents",required:!0,label:"Nb documents",field:"num_documents",sortable:!0},{name:"schema_fields",required:!0,label:"Schema fields",field:"fields",sortable:!0},{name:"created_at",required:!0,label:"Created at",field:"created_at",sortable:!0}]}},mounted(){this.$store.dispatch("node/getCollections")},methods:{exportCollection(e){return w(this,void 0,void 0,(function*(){this.$q.loading.show({message:"Downloading. Please wait...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),yield this.$store.dispatch("node/exportDocuments",e).then((()=>this.$q.loading.hide())).catch((()=>{this.$q.loading.hide(),this.$q.dialog({title:"Export failed",message:"Try desktop version of the app."})}))}))},drop(e){this.$q.dialog({title:"Confirm",message:`Drop ${e} and all documents?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/dropCollection",e)}))}}});var b=o(69885),y=o(86008),W=o(31233),g=o(67220),k=o(24455),C=o(47447),q=o(490),Z=o(76749),v=o(61357),x=o(22857),$=o(66611);const Q=(0,d.Z)(h,[["render",l]]),U=Q;p()(h,"components",{QPage:b.Z,QTable:y.Z,QTr:W.Z,QTd:g.Z,QBtn:k.Z,QMenu:C.Z,QItem:q.Z,QItemSection:Z.Z,QAvatar:v.Z,QIcon:x.Z,QInput:$.Z})}}]);