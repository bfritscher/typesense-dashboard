"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[318],{75318:(e,a,l)=>{l.r(a),l.d(a,{default:()=>F});var t=l(61758),n=l(58790);const s={class:"text-h6"};function i(e,a,l,i,o,d){const c=(0,t.g2)("q-input"),r=(0,t.g2)("q-select"),m=(0,t.g2)("q-card-section"),u=(0,t.g2)("q-btn"),p=(0,t.g2)("q-card-actions"),b=(0,t.g2)("q-card"),f=(0,t.g2)("q-expansion-item"),_=(0,t.g2)("q-icon"),h=(0,t.g2)("q-td"),g=(0,t.g2)("q-table"),A=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(A,{padding:""},{default:(0,t.k6)((()=>[(0,t.bF)(f,{"expand-separator":"",icon:"sym_s_add_circle","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:(e.isUpdate?"Update":"Add")+" Alias","header-class":"bg-primary text-white",modelValue:e.expanded,"onUpdate:modelValue":a[3]||(a[3]=a=>e.expanded=a)},{default:(0,t.k6)((()=>[(0,t.bF)(b,{class:"bg-surface column"},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:e.alias.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.alias.name=a),label:"Alias name",filled:"",rules:[a=>!e.collectionNames.includes(a)||"Must not be a collection name"]},null,8,["modelValue","rules"]),(0,t.bF)(r,{modelValue:e.alias.collection_name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.alias.collection_name=a),label:"Target Collection",filled:"",options:e.collectionNames},null,8,["modelValue","options"])])),_:1}),(0,t.bF)(p,{align:"right",class:"bg-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:a[2]||(a[2]=a=>e.createAlias())},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.isUpdate?"Update":"Add")+" Alias",1)])),_:1})])),_:1})])),_:1})])),_:1},8,["label","modelValue"]),(0,t.bF)(g,{class:"q-mt-md",title:"Aliases",flat:"",bordered:"",filter:e.filter,rows:e.$store.state.node.data.aliases,columns:e.columns,"row-key":"name","visible-columns":["name","collection_name","actions"],pagination:{rowsPerPage:50,sortBy:"name"}},{"top-left":(0,t.k6)((()=>[(0,t.Lk)("div",s,[(0,t.bF)(_,{size:"md",name:"sym_s_call_split"}),a[5]||(a[5]=(0,t.eW)(" Aliases"))])])),"top-right":(0,t.k6)((()=>[(0,t.bF)(c,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":a[4]||(a[4]=a=>e.filter=a),placeholder:"Search"},{append:(0,t.k6)((()=>[(0,t.bF)(_,{name:"sym_s_search"})])),_:1},8,["modelValue"])])),"body-cell-actions":(0,t.k6)((a=>[(0,t.bF)(h,{class:"text-right"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{flat:"",onClick:l=>e.editAlias(a.row),icon:"sym_s_edit",title:"Edit"},null,8,["onClick"]),(0,t.bF)(u,{flat:"",color:"negative",onClick:l=>e.deleteAlias(a.row.name),icon:"sym_s_delete_forever",title:"Delete"},null,8,["onClick"])])),_:2},1024)])),_:1},8,["filter","rows","columns"])])),_:1})}var o=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,s){function i(e){try{d(t.next(e))}catch(a){s(a)}}function o(e){try{d(t["throw"](e))}catch(a){s(a)}}function d(e){e.done?l(e.value):n(e.value).then(i,o)}d((t=t.apply(e,a||[])).next())}))};const d=(0,t.pM)({name:"Aliases",data(){return{alias:{name:"",collection_name:""},expanded:0===this.$store.state.node.data.aliases.length,filter:"",columns:[{label:"Alias Name",name:"name",field:"name",align:"left",sortable:!0},{label:"Collection Name",name:"collection_name",field:"collection_name",align:"left",sortable:!0},{label:"Actions",name:"actions",align:"right"}]}},computed:{collectionNames(){return this.$store.state.node.data.collections.map((e=>e.name))},isUpdate(){return this.$store.state.node.data.aliases.map((e=>e.name)).includes(this.alias.name)}},methods:{createAlias(){return o(this,void 0,void 0,(function*(){yield this.$store.dispatch("node/createAlias",{name:this.alias.name,collection_name:this.alias.collection_name}),this.alias={name:"",collection_name:""},this.expanded=!1}))},editAlias(e){this.alias=JSON.parse(JSON.stringify(e)),this.expanded=!0},deleteAlias(e){this.$q.dialog({title:"Confirm",message:`Delete alias ${e}?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/deleteAlias",e)}))}}});var c=l(12807),r=l(77716),m=l(9459),u=l(23316),p=l(44189),b=l(39270),f=l(75848),_=l(62669),h=l(1693),g=l(39942),A=l(50492),k=l(45262),y=l(98582),x=l.n(y);const v=(0,c.A)(d,[["render",i]]),F=v;x()(d,"components",{QPage:r.A,QExpansionItem:m.A,QCard:u.A,QCardSection:p.A,QInput:b.A,QSelect:f.A,QCardActions:_.A,QBtn:h.A,QTable:g.A,QIcon:A.A,QTd:k.A})}}]);