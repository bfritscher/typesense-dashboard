"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[928],{39002:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var n=a(59835),i=a(86970);const s={class:"text-h6"};function o(e,t,a,o,l,r){const d=(0,n.up)("q-btn"),c=(0,n.up)("q-card-section"),p=(0,n.up)("monaco-editor"),u=(0,n.up)("q-banner"),m=(0,n.up)("q-card-actions"),y=(0,n.up)("q-card"),f=(0,n.up)("q-expansion-item"),h=(0,n.up)("q-icon"),_=(0,n.up)("q-input"),g=(0,n.up)("q-td"),k=(0,n.up)("q-table"),b=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(b,{padding:""},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{"expand-separator":"",icon:"sym_s_add_circle","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:"Create API Key","header-class":"bg-primary text-white",modelValue:e.expanded,"onUpdate:modelValue":t[4]||(t[4]=t=>e.expanded=t)},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{style:{height:"60vh"},class:"bg-surface column"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{flat:"",onClick:t[0]||(t[0]=t=>e.loadAdminKey())},{default:(0,n.w5)((()=>[(0,n.Uk)("Admin Key Example")])),_:1}),(0,n.Wm)(d,{flat:"",onClick:t[1]||(t[1]=t=>e.loadSearchKey())},{default:(0,n.w5)((()=>[(0,n.Uk)("Search Key Example")])),_:1}),(0,n.Wm)(d,{type:"a",icon:"sym_s_help","no-caps":"",color:"info",flat:"",dense:"",href:`https://typesense.org/docs/${e.$store.state.node.data.debug.version}/api/api-keys.html#create-an-api-key`,target:"_blank"},{default:(0,n.w5)((()=>[(0,n.Uk)("Documentation")])),_:1},8,["href"])])),_:1}),(0,n.Wm)(p,{modelValue:e.keyJson,"onUpdate:modelValue":t[2]||(t[2]=t=>e.keyJson=t)},null,8,["modelValue"]),e.jsonError?((0,n.wg)(),(0,n.j4)(u,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Invalid Format: "+(0,i.zw)(e.jsonError),1)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(m,{align:"right",class:"bg-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!!e.jsonError,onClick:t[3]||(t[3]=t=>e.createApiKey())},{default:(0,n.w5)((()=>[(0,n.Uk)("Create API Key")])),_:1},8,["disable"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(k,{class:"q-mt-md",title:"API Keys",flat:"",bordered:"",filter:e.filter,rows:e.$store.state.node.data.apiKeys,columns:e.columns,"row-key":"id","visible-columns":["id","value_prefix","description","actions","collections","expires_at","actions_op"]},{"top-left":(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.Wm)(h,{size:"md",name:"sym_s_key"}),(0,n.Uk)(" API Keys")])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(_,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[5]||(t[5]=t=>e.filter=t),placeholder:"Search"},{append:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"sym_s_search"})])),_:1},8,["modelValue"])])),"body-cell-actions_op":(0,n.w5)((t=>[(0,n.Wm)(g,{class:"text-right"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{flat:"",color:"negative",onClick:a=>e.deleteApiKey(t.row.id),icon:"sym_s_delete_forever",title:"Delete"},null,8,["onClick"])])),_:2},1024)])),_:1},8,["filter","rows","columns"])])),_:1})}var l=a(66531),r=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function o(e){try{r(n.next(e))}catch(t){s(t)}}function l(e){try{r(n["throw"](e))}catch(t){s(t)}}function r(e){e.done?a(e.value):i(e.value).then(o,l)}r((n=n.apply(e,t||[])).next())}))};const d={description:"Admin key.",actions:["*"],collections:["*"]},c={description:"Search-only companies key.",actions:["documents:search"],collections:["companies"]},p=(0,n.aZ)({name:"ApiKeys",components:{MonacoEditor:l.Z},data(){return{jsonError:null,key:JSON.parse(JSON.stringify(d)),expanded:0===this.$store.state.node.data.apiKeys.length,filter:"",columns:[{label:"ID",name:"id",field:"id",sortable:!0},{label:"Key prefix",name:"value_prefix",field:"value_prefix"},{label:"Description",name:"description",field:"description",sortable:!0,align:"left"},{label:"Key Actions",name:"actions",field:e=>JSON.stringify(e.actions),sortable:!0,align:"left"},{label:"Collections",name:"collections",field:e=>JSON.stringify(e.collections),sortable:!0,align:"left"},{label:"Expires at",name:"expires_at",field:e=>e.expires_at?64723363199===e.expires_at?"never":new Date(1e3*e.expires_at).toLocaleString():""},{label:"Actions",name:"actions_op",align:"right"}]}},computed:{keyJson:{get(){return JSON.stringify(this.key,null,2)},set(e){try{this.key=JSON.parse(e),this.jsonError=null}catch(t){this.jsonError=t.message}}}},methods:{loadAdminKey(){this.key=JSON.parse(JSON.stringify(d))},loadSearchKey(){this.key=JSON.parse(JSON.stringify(c))},createApiKey(){return r(this,void 0,void 0,(function*(){const e=yield this.$store.dispatch("node/createApiKey",JSON.parse(JSON.stringify(this.key)));this.$q.dialog({title:"Your API key",message:`This is your API key copy it! It will not be displayed again!\n\n${e.value||""}`,cancel:!1,persistent:!0})}))},deleteApiKey(e){this.$q.dialog({title:"Confirm",message:`Delete key with id: ${e}?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/deleteApiKey",e)}))}}});var u=a(11639),m=a(69885),y=a(61123),f=a(44458),h=a(63190),_=a(24455),g=a(47128),k=a(11821),b=a(86008),w=a(22857),x=a(66611),K=a(67220),v=a(69984),A=a.n(v);const S=(0,u.Z)(p,[["render",o]]),q=S;A()(p,"components",{QPage:m.Z,QExpansionItem:y.Z,QCard:f.Z,QCardSection:h.Z,QBtn:_.Z,QBanner:g.Z,QCardActions:k.Z,QTable:b.Z,QIcon:w.Z,QInput:x.Z,QTd:K.Z})}}]);