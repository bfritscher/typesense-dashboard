"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[642],{47090:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var s=a(61758),r=a(58790);const n={class:"text-h6"};function l(e,t,a,l,o,d){const i=(0,s.g2)("q-input"),c=(0,s.g2)("q-btn"),u=(0,s.g2)("q-card-section"),p=(0,s.g2)("monaco-editor"),h=(0,s.g2)("q-banner"),m=(0,s.g2)("q-card-actions"),f=(0,s.g2)("q-card"),g=(0,s.g2)("q-expansion-item"),b=(0,s.g2)("q-icon"),_=(0,s.g2)("q-td"),y=(0,s.g2)("q-table"),k=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(k,{padding:""},{default:(0,s.k6)((()=>[(0,s.bF)(g,{"expand-separator":"",icon:"sym_s_add_circle","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:(e.isUpdate?"Update":"Add")+" Search Preset","header-class":"bg-primary text-white",modelValue:e.expanded,"onUpdate:modelValue":t[3]||(t[3]=t=>e.expanded=t)},{default:(0,s.k6)((()=>[(0,s.bF)(f,{style:{height:"60vh"},class:"bg-surface column"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"q-col-gutter-md row"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"col-12 col-sm-6",modelValue:e.preset.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.preset.name=t),label:"Name",filled:"",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),(0,s.bF)(c,{type:"a",icon:"sym_s_help","no-caps":"",color:"info",flat:"",dense:"",href:`https://typesense.org/docs/${e.$store.state.node.data.debug.version}/api/search.html#presets`,target:"_blank"},{default:(0,s.k6)((()=>t[5]||(t[5]=[(0,s.eW)("Documentation")]))),_:1},8,["href"])])),_:1}),(0,s.bF)(p,{modelValue:e.keyJson,"onUpdate:modelValue":t[1]||(t[1]=t=>e.keyJson=t)},null,8,["modelValue"]),e.jsonError?((0,s.uX)(),(0,s.Wv)(h,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,s.k6)((()=>[(0,s.eW)(" Invalid Format: "+(0,r.v_)(e.jsonError),1)])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(m,{align:"right",class:"bg-primary"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!!e.jsonError,onClick:t[2]||(t[2]=t=>e.createSearchPreset())},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.isUpdate?"Update":"Add")+" Preset",1)])),_:1},8,["disable"])])),_:1})])),_:1})])),_:1},8,["label","modelValue"]),(0,s.bF)(y,{class:"q-mt-md",title:"Search Presets",flat:"",bordered:"",filter:e.filter,rows:e.$store.state.node.data.searchPresets,columns:e.columns,"row-key":"id"},{"top-left":(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.bF)(b,{size:"md",name:"sym_s_manage_search"}),t[6]||(t[6]=(0,s.eW)(" Search Presets"))])])),"top-right":(0,s.k6)((()=>[(0,s.bF)(i,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[4]||(t[4]=t=>e.filter=t),placeholder:"Search"},{append:(0,s.k6)((()=>[(0,s.bF)(b,{name:"sym_s_search"})])),_:1},8,["modelValue"])])),"body-cell-actions_op":(0,s.k6)((t=>[(0,s.bF)(_,{class:"text-right"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{flat:"",onClick:a=>e.editSearchPreset(t.row),icon:"sym_s_edit",title:"Edit"},null,8,["onClick"]),(0,s.bF)(c,{flat:"",color:"negative",onClick:a=>e.deleteSearchPreset(t.row.name),icon:"sym_s_delete_forever",title:"Delete"},null,8,["onClick"])])),_:2},1024)])),_:1},8,["filter","rows","columns"])])),_:1})}var o=a(74701),d=function(e,t,a,s){function r(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function l(e){try{d(s.next(e))}catch(t){n(t)}}function o(e){try{d(s["throw"](e))}catch(t){n(t)}}function d(e){e.done?a(e.value):r(e.value).then(l,o)}d((s=s.apply(e,t||[])).next())}))};const i=(0,s.pM)({name:"SearchPresets",components:{MonacoEditor:o.A},data(){return{jsonError:null,preset:{name:"",value:{collection:"products",q:"*",sort_by:"popularity"}},expanded:0===this.$store.state.node.data.searchPresets.length,filter:"",columns:[{label:"Name",name:"name",field:"name",sortable:!0,align:"left"},{label:"Search Parameters",name:"value",field:e=>JSON.stringify(e.value),sortable:!0,align:"left"},{label:"Actions",name:"actions_op",align:"right"}]}},computed:{keyJson:{get(){return JSON.stringify(this.preset.value,null,2)},set(e){try{this.preset.value=JSON.parse(e),this.jsonError=null}catch(t){this.jsonError=t.message}}},isUpdate(){return this.$store.state.node.data.searchPresets.map((e=>e.name)).includes(this.preset.name)}},mounted(){this.$store.dispatch("node/getSearchPresets")},methods:{createSearchPreset(){return d(this,void 0,void 0,(function*(){yield this.$store.dispatch("node/upsertSearchPreset",JSON.parse(JSON.stringify(this.preset)))}))},editSearchPreset(e){this.preset=JSON.parse(JSON.stringify(e)),this.expanded=!0},deleteSearchPreset(e){this.$q.dialog({title:"Confirm",message:`Delete preset ${e}?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/deleteSearchPreset",e)}))}}});var c=a(12807),u=a(77716),p=a(9459),h=a(23316),m=a(44189),f=a(39270),g=a(1693),b=a(46868),_=a(62669),y=a(39942),k=a(50492),v=a(45262),S=a(98582),P=a.n(S);const A=(0,c.A)(i,[["render",l]]),F=A;P()(i,"components",{QPage:u.A,QExpansionItem:p.A,QCard:h.A,QCardSection:m.A,QInput:f.A,QBtn:g.A,QBanner:b.A,QCardActions:_.A,QTable:y.A,QIcon:k.A,QTd:v.A})}}]);