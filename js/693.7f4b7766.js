"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[693],{38957:(e,l,o)=>{o.d(l,{Z:()=>h});var a=o(59835);const t={ref:"editorWrapper",class:"col relative-position overflow-hidden editorWrapper"},n={ref:"editorElement",class:"absolute-top-left"};function s(e,l,o,s,d,i){const r=(0,a.up)("q-resize-observer");return(0,a.wg)(),(0,a.iD)("div",t,[(0,a.Wm)(r,{onResize:e.onResize},null,8,["onResize"]),(0,a._)("div",n,null,512)],512)}var d=o(14424),i=o(60499);const r=(0,a.aZ)({name:"MonacoEditor",props:{modelValue:{type:String,default:""},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:l}){const o=(0,i.iH)(null),t=(0,i.iH)(null);let n;return(0,a.bv)((()=>{n=d.j6.create(o.value,Object.assign({value:e.modelValue,language:"json",theme:"vs-dark",minimap:{enabled:!1}},e.options)),n.onDidChangeModelContent((()=>{l("update:modelValue",null===n||void 0===n?void 0:n.getValue())}))})),(0,a.Ah)((()=>{null===n||void 0===n||n.dispose()})),(0,a.YP)((()=>e.modelValue),(()=>{var l;e.modelValue!==(null===n||void 0===n?void 0:n.getValue())&&(null===(l=null===n||void 0===n?void 0:n.getModel())||void 0===l||l.setValue(e.modelValue),null===n||void 0===n||n.setScrollPosition({scrollTop:0}))})),{editorElement:o,editorWrapper:t,onResize(){null===n||void 0===n||n.layout({height:0,width:0}),window.setTimeout((()=>{null===n||void 0===n||n.layout({height:t.value.offsetHeight,width:t.value.offsetWidth})}))}}}});var m=o(11639),u=o(60883),c=o(69984),p=o.n(c);const f=(0,m.Z)(r,[["render",s],["__scopeId","data-v-46f34a38"]]),h=f;p()(r,"components",{QResizeObserver:u.Z})},92693:(e,l,o)=>{o.r(l),o.d(l,{default:()=>N});var a=o(59835),t=o(86970);function n(e,l,o,n,s,d){const i=(0,a.up)("collection-create"),r=(0,a.up)("q-btn"),m=(0,a.up)("q-td"),u=(0,a.up)("q-item-section"),c=(0,a.up)("q-avatar"),p=(0,a.up)("q-item"),f=(0,a.up)("q-menu"),h=(0,a.up)("q-icon"),_=(0,a.up)("q-tr"),w=(0,a.up)("q-input"),b=(0,a.up)("q-table"),g=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(g,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i),(0,a.Wm)(b,{filter:e.filter,columns:e.columns,rows:e.$store.state.node.data.collections,"row-key":"name",pagination:{rowsPerPage:0,sortBy:"name"}},{body:(0,a.w5)((l=>[(0,a.Wm)(_,{props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{key:"name",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"no-caps":"",flat:"",to:`/collection/${l.row.name}/search`,size:"1.2em",class:"text-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(l.row.name),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"actions",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{flat:"",round:"",color:"primary",icon:"sym_s_more_horiz"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{dense:"",clickable:"",to:`/collection/${l.row.name}/document`},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Import")])),_:1}),(0,a.Wm)(u,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{icon:"sym_s_file_upload"})])),_:1})])),_:2},1032,["to"]),(0,a.Wm)(p,{dense:"",clickable:"",onClick:o=>e.exportCollection(l.row.name)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Export")])),_:1}),(0,a.Wm)(u,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{icon:"sym_s_file_download"})])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(p,{dense:"",clickable:"",flat:"",style:{color:"#DE3B39"},onClick:o=>e.drop(l.row.name)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Delete")])),_:1}),(0,a.Wm)(u,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{icon:"sym_s_delete"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"num_documents",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"no-caps":"",flat:"",to:`/collection/${l.row.name}/search`},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(l.row.num_documents)+" ",1),(0,a.Wm)(h,{name:"sym_s_search",size:"1em",right:""})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"schema_fields",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"no-caps":"",flat:"",to:`/collection/${l.row.name}/schema`},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(l.row.fields.length||0)+" ",1),(0,a.Wm)(h,{name:"sym_s_data_object",size:"1em",right:""})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(m,{key:"created_at",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(new Date(1e3*l.row.created_at).toLocaleString()),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),"top-right":(0,a.w5)((()=>[(0,a.Wm)(w,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[0]||(l[0]=l=>e.filter=l),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(h,{name:"sym_s_search"})])),_:1},8,["modelValue"])])),_:1},8,["filter","columns","rows"])])),_:1})}const s={class:"row q-gutter-md"},d=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Fields",-1);function i(e,l,o,n,i,r){const m=(0,a.up)("q-tab"),u=(0,a.up)("q-tabs"),c=(0,a.up)("q-separator"),p=(0,a.up)("q-input"),f=(0,a.up)("q-select"),h=(0,a.up)("q-card-section"),_=(0,a.up)("q-checkbox"),w=(0,a.up)("q-btn"),b=(0,a.up)("q-card-actions"),g=(0,a.up)("q-card"),W=(0,a.up)("q-tab-panel"),v=(0,a.up)("monaco-editor"),y=(0,a.up)("q-banner"),V=(0,a.up)("q-tab-panels"),q=(0,a.up)("q-expansion-item"),k=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(k,{bordered:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{"expand-separator":"",icon:"sym_s_library_add","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:"Add Collection","header-class":"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=l=>e.tab=l),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"form",label:"Form Mode"}),(0,a.Wm)(m,{name:"json",label:"JSON Mode"})])),_:1},8,["modelValue"]),(0,a.Wm)(c),(0,a.Wm)(V,{modelValue:e.tab,"onUpdate:modelValue":l[4]||(l[4]=l=>e.tab=l),animated:"",style:{height:"60vh"},class:"bg-surface"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{name:"form"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(p,{class:"col",filled:"",dense:"",modelValue:e.schema.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.schema.name=l),label:"Collection Name",placeholder:"books",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),(0,a.Wm)(f,{filled:"",class:"col",dense:"",modelValue:e.schema.default_sorting_field,"onUpdate:modelValue":l[2]||(l[2]=l=>e.schema.default_sorting_field=l),options:e.availableSortFields,label:"Default sort field optional, but must be int32 or float"},null,8,["modelValue","options"])]),d,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.schema.fields,((l,o)=>((0,a.wg)(),(0,a.j4)(g,{flat:"",bordered:"",key:o,class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"row q-gutter-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"col",dense:"",outlined:"",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,label:"Field Name",placeholder:"title",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","rules"]),(0,a.Wm)(f,{class:"col",dense:"",outlined:"",modelValue:l.type,"onUpdate:modelValue":e=>l.type=e,label:"type",options:e.types,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"])])),_:2},1024),(0,a.Wm)(c),(0,a.Wm)(b,{align:"between"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(_,{modelValue:l.optional,"onUpdate:modelValue":e=>l.optional=e,label:"optional"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(_,{modelValue:l.facet,"onUpdate:modelValue":e=>l.facet=e,label:"facet"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(_,{modelValue:l.index,"onUpdate:modelValue":e=>l.index=e,label:"index"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(_,{modelValue:l.sort,"onUpdate:modelValue":e=>l.sort=e,label:"sort"},null,8,["modelValue","onUpdate:modelValue"])]),(0,a.Wm)(w,{size:"md",padding:"sm lg",unelevated:"",onClick:o=>e.removeField(l)},{default:(0,a.w5)((()=>[(0,a.Uk)("Remove Field")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.Wm)(W,{name:"json",class:"q-pa-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{modelValue:e.schemaJson,"onUpdate:modelValue":l[3]||(l[3]=l=>e.schemaJson=l),style:{height:"60vh"}},null,8,["modelValue"]),e.jsonError?((0,a.wg)(),(0,a.j4)(y,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Invalid Format: "+(0,t.zw)(e.jsonError),1)])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(c),(0,a.Wm)(b,{align:"between",class:"bg-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[5]||(l[5]=l=>e.addField())},{default:(0,a.w5)((()=>[(0,a.Uk)("Add field")])),_:1}),(0,a.Wm)(w,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[6]||(l[6]=l=>e.createCollection())},{default:(0,a.w5)((()=>[(0,a.Uk)("Create Collection")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var r=o(38957);const m=(0,a.aZ)({components:{MonacoEditor:r.Z},name:"CollectionCreate",data(){return{tab:"form",schema:{name:"",fields:[],default_sorting_field:"",token_separators:[],symbols_to_index:[]},types:["string","string[]","int32","int32[]","int64","int64[]","float","float[]","bool","bool[]","geopoint","geopoint[]","string*","auto"],jsonError:null}},mounted(){this.addField()},computed:{availableSortFields(){const e=(this.schema.fields||[]).filter((e=>["int32","float"].includes(e.type)||"string"===e.type&&e.sort));return[""].concat(e.map((e=>e.name)))},schemaJson:{get(){return JSON.stringify(this.schema,null,2)},set(e){try{this.schema=JSON.parse(e),this.jsonError=null}catch(l){this.jsonError=l.message}}}},methods:{addField(){this.schema.fields&&this.schema.fields.push({name:"",type:"string",optional:!1,facet:!1,index:!0})},removeField(e){if(this.schema.fields){const l=this.schema.fields.indexOf(e);l>-1&&this.schema.fields.splice(l,1)}},createCollection(){this.$store.dispatch("node/createCollection",this.schema)}}});var u=o(11639),c=o(13246),p=o(61123),f=o(44458),h=o(47817),_=o(70900),w=o(50926),b=o(89800),g=o(84106),W=o(63190),v=o(66611),y=o(67887),V=o(11821),q=o(11221),k=o(24455),C=o(47128),Z=o(69984),U=o.n(Z);const x=(0,u.Z)(m,[["render",i]]),Q=x;U()(m,"components",{QList:c.Z,QExpansionItem:p.Z,QCard:f.Z,QTabs:h.Z,QTab:_.Z,QSeparator:w.Z,QTabPanels:b.Z,QTabPanel:g.Z,QCardSection:W.Z,QInput:v.Z,QSelect:y.Z,QCardActions:V.Z,QCheckbox:q.Z,QBtn:k.Z,QBanner:C.Z});var z=function(e,l,o,a){function t(e){return e instanceof o?e:new o((function(l){l(e)}))}return new(o||(o=Promise))((function(o,n){function s(e){try{i(a.next(e))}catch(l){n(l)}}function d(e){try{i(a["throw"](e))}catch(l){n(l)}}function i(e){e.done?o(e.value):t(e.value).then(s,d)}i((a=a.apply(e,l||[])).next())}))};const j=(0,a.aZ)({components:{CollectionCreate:Q},name:"Collections",data(){return{filter:"",columns:[{name:"name",required:!0,label:"Name",field:"name",sortable:!0},{name:"actions",required:!1,label:"",field:"actions",sortable:!1},{name:"num_documents",required:!0,label:"Nb documents",field:"num_documents",sortable:!0},{name:"schema_fields",required:!0,label:"Schema fields",field:"fields",sortable:!0},{name:"created_at",required:!0,label:"Created at",field:"created_at",sortable:!0}]}},mounted(){this.$store.dispatch("node/getCollections")},methods:{exportCollection(e){return z(this,void 0,void 0,(function*(){this.$q.loading.show({message:"Downloading. Please wait...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),yield this.$store.dispatch("node/exportDocuments",e).then((()=>this.$q.loading.hide())).catch((()=>{this.$q.loading.hide(),this.$q.dialog({title:"Export failed",message:"Try desktop version of the app."})}))}))},drop(e){this.$q.dialog({title:"Confirm",message:`Drop ${e} and all documents?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/dropCollection",e)}))}}});var F=o(69885),$=o(86008),S=o(31233),E=o(67220),T=o(47447),D=o(490),I=o(76749),P=o(61357),O=o(22857);const M=(0,u.Z)(j,[["render",n]]),N=M;U()(j,"components",{QPage:F.Z,QTable:$.Z,QTr:S.Z,QTd:E.Z,QBtn:k.Z,QMenu:T.Z,QItem:D.Z,QItemSection:I.Z,QAvatar:P.Z,QIcon:O.Z,QInput:v.Z})}}]);