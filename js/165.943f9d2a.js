"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[165],{58067:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(59835),s=n(86970);const o={class:"row justify-between q-mb-md"},i={class:"text-h5"};function l(e,t,n,l,c,d){const r=(0,a.up)("q-icon"),m=(0,a.up)("q-btn"),u=(0,a.up)("collection-ui"),h=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(h,{padding:"",class:"column"},{default:(0,a.w5)((()=>{var n;return[(0,a._)("div",o,[(0,a._)("div",i,[(0,a.Wm)(r,{size:"md",name:"sym_s_data_object"}),(0,a.Uk)(" Schema for "+(0,s.zw)(null===(n=e.$store.state.node.currentCollection)||void 0===n?void 0:n.name),1)]),(0,a.Wm)(m,{unelevated:"",color:"negative",onClick:t[0]||(t[0]=t=>{var n;return e.drop((null===(n=e.$store.state.node.currentCollection)||void 0===n?void 0:n.name)||"")})},{default:(0,a.w5)((()=>[(0,a.Uk)("Drop Collection")])),_:1})]),(0,a.Wm)(u,{"initial-schema":e.schema,"primary-action-label":"Update Schema",onSubmit:e.update},null,8,["initial-schema","onSubmit"])]})),_:1})}var c=n(12239);const d=(0,a.aZ)({name:"Schema",components:{CollectionUi:c.Z},computed:{schema(){const e=this.$store.state.node.currentCollection;if(e){const t={name:e.name,fields:e.fields.map((e=>{const t=["name","type","facet","optional","index","sort","infix","locale"],n=Object.keys(e).filter((e=>!t.includes(e)));return t.concat(n).reduce(((t,n)=>(t[n]=e[n],t)),{})})),default_sorting_field:e.default_sorting_field},n=Object.keys(e).filter((e=>!["name","fields","default_sorting_field","created_at","num_documents"].includes(e)));return n.forEach((n=>{t[n]=e[n]})),t}return{name:"",fields:[],default_sorting_field:"",token_separators:[],symbols_to_index:[],enable_nested_fields:!1}}},methods:{drop(e){this.$q.dialog({title:"Confirm",message:`Drop ${e} and all documents?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/dropCollection",e)}))},update(e){if(!this.schema||!this.schema.name||!this.schema.fields)return;const t={fields:this.schema.fields.map((e=>({name:e.name,drop:!0}))).concat(e.fields)};this.$store.dispatch("node/updateCollection",{collectionName:this.schema.name,schema:t})}}});var r=n(11639),m=n(69885),u=n(22857),h=n(24455),p=n(69984),f=n.n(p);const _=(0,r.Z)(d,[["render",l]]),b=_;f()(d,"components",{QPage:m.Z,QIcon:u.Z,QBtn:h.Z})}}]);