"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[922],{98922:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var a=s(59835),l=s(86970);const o={class:"row"},r={class:"col col-12 col-md-8"},d=(0,a._)("div",{class:"text-h5"},"System",-1),n=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"CPU",-1),i={class:"row"},c={class:"text-overline"},u=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Memory",-1),m={class:"absolute-full flex flex-center"},p={class:"absolute-full flex justify-end"},_=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Disk",-1),b={class:"absolute-full flex flex-center"},y={class:"absolute-full flex justify-end"},v=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"System Network",-1),w=(0,a._)("div",{class:"text-h5 q-mb-md"},"Operations",-1),h=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Cache",-1),f=(0,a._)("p",null," Responses of search requests that are sent with use_cache parameter are cached in a LRU cache. ",-1),g=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Slow Request Log",-1),k=(0,a._)("p",null," Slow requests are logged to the primary log file, with the prefix SLOW REQUEST ",-1),q=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Compacting the on-disk database",-1),x=(0,a._)("p",null,"Recommended to run it during off-peak hours.",-1),$=(0,a._)("div",{class:"text-h5"},"Typesense",-1),z=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Node",-1),C={key:0},I=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Memory",-1),W=(0,a._)("div",{class:"text-subtitle1 q-pt-md"},"Stats",-1),D={key:1},Q={key:0};function S(e,t,s,S,B,Z){const P=(0,a.up)("q-circular-progress"),T=(0,a.up)("q-badge"),j=(0,a.up)("q-linear-progress"),U=(0,a.up)("q-card-section"),O=(0,a.up)("q-card"),R=(0,a.up)("q-btn"),H=(0,a.up)("q-input"),L=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(L,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a._)("div",r,[(0,a.Wm)(O,{flat:"",bordered:"",class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[d,n,(0,a._)("div",i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sortedCPU,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"column flex-center flex-wrap q-ma-md",key:e.node},[(0,a._)("span",c,"CPU "+(0,l.zw)(e.node),1),(0,a.Wm)(P,{"show-value":"",value:e.value,size:"50px",color:"accent","track-color":"grey-3"},null,8,["value"])])))),128))]),u,(0,a.Wm)(j,{size:"25px",value:parseInt(e.$store.state.node.data.metrics.system_memory_used_bytes,10)/parseInt(e.$store.state.node.data.metrics.system_memory_total_bytes,10),color:"accent"},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(T,{color:"white","text-color":"accent",label:e.prettyBytes(parseInt(e.$store.state.node.data.metrics.system_memory_used_bytes,10))},null,8,["label"])]),(0,a._)("div",p,[(0,a.Wm)(T,{color:"white","text-color":"accent",label:e.prettyBytes(parseInt(e.$store.state.node.data.metrics.system_memory_total_bytes,10))},null,8,["label"])])])),_:1},8,["value"]),_,(0,a.Wm)(j,{size:"25px",value:parseInt(e.$store.state.node.data.metrics.system_disk_used_bytes,10)/parseInt(e.$store.state.node.data.metrics.system_disk_total_bytes,10),color:"accent"},{default:(0,a.w5)((()=>[(0,a._)("div",b,[(0,a.Wm)(T,{color:"white","text-color":"accent",label:e.prettyBytes(parseInt(e.$store.state.node.data.metrics.system_disk_used_bytes,10))},null,8,["label"])]),(0,a._)("div",y,[(0,a.Wm)(T,{color:"white","text-color":"accent",label:e.prettyBytes(parseInt(e.$store.state.node.data.metrics.system_disk_total_bytes,10))},null,8,["label"])])])),_:1},8,["value"]),v,(0,a._)("div",null," Received: "+(0,l.zw)(e.prettyBytes(parseInt(e.$store.state.node.data.metrics.system_network_received_bytes,10)))+" Sent: "+(0,l.zw)(e.prettyBytes(parseInt(e.$store.state.node.data.metrics.system_network_sent_bytes,10))),1)])),_:1})])),_:1}),(0,a.Wm)(O,{flat:"",bordered:"",class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[w,h,f,(0,a.Wm)(R,{label:"Clear Search Cache",color:"accent",unelevated:"",size:"md",padding:"sm lg",onClick:t[0]||(t[0]=t=>e.$store.dispatch("node/clearCache"))}),g,k,(0,a.Wm)(H,{outlined:"",label:"Threshold (ms)",type:"number",modelValue:e.slowQueryThreshold,"onUpdate:modelValue":t[2]||(t[2]=t=>e.slowQueryThreshold=t),modelModifiers:{number:!0},hint:"Enable logging of requests that take over a defined threshold of time. (-1 to disable)"},{after:(0,a.w5)((()=>[(0,a.Wm)(R,{unelevated:"",label:"set",color:"accent",size:"md",padding:"sm lg",onClick:t[1]||(t[1]=t=>e.$store.dispatch("node/slowQueryThreshold",e.slowQueryThreshold))})])),_:1},8,["modelValue"]),q,x,(0,a.Wm)(R,{label:"Compact Database",color:"accent",unelevated:"",size:"md",padding:"sm lg",onClick:t[3]||(t[3]=t=>e.$store.dispatch("node/operationCompactDB"))})])),_:1})])),_:1})]),(0,a.Wm)(O,{flat:"",bordered:"",class:"col-12 col-md-3 offset-md-1 q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>{var t,s,o;return[$,z,(0,a._)("div",null,"Protocole: "+(0,l.zw)(null===(t=e.$store.state.node.loginData)||void 0===t?void 0:t.node.protocol),1),(0,a._)("div",null,"Host: "+(0,l.zw)(null===(s=e.$store.state.node.loginData)||void 0===s?void 0:s.node.host),1),(0,a._)("div",null,"Port: "+(0,l.zw)(null===(o=e.$store.state.node.loginData)||void 0===o?void 0:o.node.port),1),(0,a._)("div",null,"Version: "+(0,l.zw)(e.$store.state.node.data.debug.version),1),Object.hasOwnProperty.call(e.$store.state.node.data.debug,"state")?((0,a.wg)(),(0,a.iD)("div",C," Role: "+(0,l.zw)(1===e.$store.state.node.data.debug.state?"Leader":"Follower"),1)):(0,a.kq)("",!0),I,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(e.$store.state.node.data.metrics).filter((e=>e.includes("typesense"))),(t=>((0,a.wg)(),(0,a.iD)("div",{key:t},(0,l.zw)(t.split("_")[2])+" : "+(0,l.zw)(t.includes("bytes")?e.prettyBytes(parseInt(e.$store.state.node.data.metrics[t],10)):e.$store.state.node.data.metrics[t]),1)))),128)),W,e.$store.state.node.data.features.stats?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",D," Stats are not enabled on this node. ")),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.$store.state.node.data.stats,((t,s)=>((0,a.wg)(),(0,a.iD)("div",{key:s},[e.isObject(t)?((0,a.wg)(),(0,a.iD)("div",Q,[(0,a.Uk)((0,l.zw)(s)+" ",1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},(0,l.zw)(t)+" : "+(0,l.zw)(e),1)))),128))])):(0,a.kq)("",!0)])))),128))]})),_:1})])),_:1})])])),_:1})}var B=s(94991);const Z=(0,a.aZ)({name:"serverStatus",data(){return{refreshInterval:void 0,slowQueryThreshold:-1}},mounted(){this.refreshInterval=window.setInterval((()=>{this.$store.dispatch("node/refreshServerStatus")}),2e3)},computed:{sortedCPU(){return Object.entries(this.$store.state.node.data.metrics).filter((([e])=>e.includes("cpu"))).map((([e,t])=>({node:parseInt(e.split("_")[1].replace("cpu",""))||0,value:parseFloat(t)}))).sort(((e,t)=>e.node-t.node))}},methods:{prettyBytes:B.Z,isObject(e){return"object"===typeof e}},beforeUnmount(){window.clearInterval(this.refreshInterval)}});var P=s(11639),T=s(69885),j=s(44458),U=s(63190),O=s(83302),R=s(8289),H=s(20990),L=s(24455),K=s(66611),V=s(69984),Y=s.n(V);const E=(0,P.Z)(Z,[["render",S]]),M=E;Y()(Z,"components",{QPage:T.Z,QCard:j.Z,QCardSection:U.Z,QCircularProgress:O.Z,QLinearProgress:R.Z,QBadge:H.Z,QBtn:L.Z,QInput:K.Z})}}]);