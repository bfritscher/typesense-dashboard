"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[64],{66531:(e,l,o)=>{o.d(l,{Z:()=>h});var t=o(59835);const a={ref:"editorWrapper",class:"col relative-position overflow-hidden editorWrapper"},n={ref:"editorElement",class:"absolute-top-left"};function d(e,l,o,d,s,i){const r=(0,t.up)("q-resize-observer");return(0,t.wg)(),(0,t.iD)("div",a,[(0,t.Wm)(r,{onResize:e.onResize},null,8,["onResize"]),(0,t._)("div",n,null,512)],512)}var s=o(82584),i=o(60499);const r=(0,t.aZ)({name:"MonacoEditor",props:{modelValue:{type:String,default:""},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:l}){const o=(0,i.iH)(null),a=(0,i.iH)(null);let n;return(0,t.bv)((()=>{n=s.j6.create(o.value,Object.assign({value:e.modelValue,language:"json",theme:"vs-dark",minimap:{enabled:!1}},e.options)),n.onDidChangeModelContent((()=>{l("update:modelValue",null===n||void 0===n?void 0:n.getValue())}))})),(0,t.Ah)((()=>{null===n||void 0===n||n.dispose()})),(0,t.YP)((()=>e.modelValue),(()=>{var l;e.modelValue!==(null===n||void 0===n?void 0:n.getValue())&&(null===(l=null===n||void 0===n?void 0:n.getModel())||void 0===l||l.setValue(e.modelValue),null===n||void 0===n||n.setScrollPosition({scrollTop:0}))})),{editorElement:o,editorWrapper:a,onResize(){null===n||void 0===n||n.layout({height:0,width:0}),window.setTimeout((()=>{null===n||void 0===n||n.layout({height:a.value.offsetHeight,width:a.value.offsetWidth})}))}}}});var u=o(11639),m=o(76849),c=o(69984),p=o.n(c);const f=(0,u.Z)(r,[["render",d],["__scopeId","data-v-46f34a38"]]),h=f;p()(r,"components",{QResizeObserver:m.Z})},46115:(e,l,o)=>{o.d(l,{Z:()=>w});var t=o(59835),a=o(86970);function n(e,l,o,n,d,s){const i=(0,t.up)("q-item-section"),r=(0,t.up)("q-icon"),u=(0,t.up)("q-item"),m=(0,t.up)("q-separator"),c=(0,t.up)("q-item-label"),p=(0,t.up)("q-list"),f=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(p,{style:{"min-width":"100px"}},{default:(0,t.w5)((()=>[e.$props.showLogout?(0,t.wy)(((0,t.wg)(),(0,t.j4)(u,{key:0,clickable:"",onClick:e.logout},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Logout")])),_:1}),(0,t.Wm)(i,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"sym_s_logout"})])),_:1})])),_:1},8,["onClick"])),[[f]]):(0,t.kq)("",!0),e.$props.showLogout?((0,t.wg)(),(0,t.j4)(m,{key:1})):(0,t.kq)("",!0),(0,t.wy)(((0,t.wg)(),(0,t.j4)(u,{clickable:"",onClick:l[0]||(l[0]=l=>e.$store.commit("node/clearHistory"))},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Clear history")])),_:1}),(0,t.Wm)(i,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"sym_s_delete"})])),_:1})])),_:1})),[[f]]),(0,t.Wm)(m),0===e.loginHistory.length?((0,t.wg)(),(0,t.j4)(c,{key:2,header:""},{default:(0,t.w5)((()=>[(0,t.Uk)("No History")])),_:1})):(0,t.kq)("",!0),e.loginHistory.length>0?((0,t.wg)(),(0,t.j4)(c,{key:3,header:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Server History")])),_:1})):(0,t.kq)("",!0),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.loginHistory,((l,o)=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(u,{clickable:"",key:o,onClick:o=>e.loginWithHistory(l)},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(l.node.protocol)+"://"+(0,a.zw)(l.node.host)+":"+(0,a.zw)(l.node.port),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[f]]))),128))])),_:1})}const d=(0,t.aZ)({name:"ServerHistory",props:{showLogout:{default:!1}},computed:{loginHistory(){return this.$store.state.node.loginHistory.map((e=>JSON.parse(e)))},error(){return this.$store.state.node.error}},methods:{logout(){this.$store.dispatch("node/logout")},loginWithHistory(e){const l=this.$props.showLogout;this.$store.dispatch("node/login",Object.assign(Object.assign({},e),{forceHomeRedirect:l}))}}});var s=o(11639),i=o(13246),r=o(490),u=o(76749),m=o(22857),c=o(50926),p=o(33115),f=o(31281),h=o(69984),g=o.n(h);const b=(0,s.Z)(d,[["render",n]]),w=b;g()(d,"components",{QList:i.Z,QItem:r.Z,QItemSection:u.Z,QIcon:m.Z,QSeparator:c.Z,QItemLabel:p.Z}),g()(d,"directives",{ClosePopup:f.Z})},12239:(e,l,o)=>{o.d(l,{Z:()=>Z});var t=o(59835),a=o(86970);const n={class:"row q-gutter-md"},d=(0,t._)("div",{class:"text-subtitle1 q-pt-md"},"Fields",-1);function s(e,l,o,s,i,r){const u=(0,t.up)("q-tab"),m=(0,t.up)("q-tabs"),c=(0,t.up)("q-separator"),p=(0,t.up)("q-input"),f=(0,t.up)("q-select"),h=(0,t.up)("q-card-section"),g=(0,t.up)("q-checkbox"),b=(0,t.up)("q-btn"),w=(0,t.up)("q-card-actions"),y=(0,t.up)("q-card"),V=(0,t.up)("q-tab-panel"),_=(0,t.up)("monaco-editor"),v=(0,t.up)("q-banner"),k=(0,t.up)("q-tab-panels");return(0,t.wg)(),(0,t.j4)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=l=>e.tab=l),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{name:"form",label:"Form Mode"}),(0,t.Wm)(u,{name:"json",label:"JSON Mode"})])),_:1},8,["modelValue"]),(0,t.Wm)(c),(0,t.Wm)(k,{modelValue:e.tab,"onUpdate:modelValue":l[4]||(l[4]=l=>e.tab=l),animated:"",style:(0,a.j5)(e.createMode?"height: 60vh":""),class:"bg-surface"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{name:"form"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.Wm)(p,{class:"col",filled:"",dense:"",modelValue:e.schema.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.schema.name=l),label:"Collection Name",placeholder:"books",disable:!e.createMode,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","disable","rules"]),(0,t.Wm)(f,{filled:"",class:"col",dense:"",modelValue:e.schema.default_sorting_field,"onUpdate:modelValue":l[2]||(l[2]=l=>e.schema.default_sorting_field=l),options:e.availableSortFields,label:"Default sort field optional, but must be int32 or float"},null,8,["modelValue","options"])]),d,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.schema.fields,((l,o)=>((0,t.wg)(),(0,t.j4)(y,{flat:"",bordered:"",key:o,class:"q-mb-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"row q-col-gutter-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"col-12 col-sm-6",dense:"",outlined:"",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,label:"Field Name",placeholder:"title",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","rules"]),(0,t.Wm)(f,{class:"col-12 col-sm-4",dense:"",outlined:"",modelValue:l.type,"onUpdate:modelValue":e=>l.type=e,label:"type",options:e.types,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"]),"float[]"===l.type?((0,t.wg)(),(0,t.j4)(p,{key:0,class:"col-12 col-sm-2",dense:"",outlined:"",type:"number",modelValue:l.num_dim,"onUpdate:modelValue":e=>l.num_dim=e,modelModifiers:{number:!0},label:"num_dim",placeholder:""},null,8,["modelValue","onUpdate:modelValue"])):(0,t.kq)("",!0),l.type.startsWith("string")?((0,t.wg)(),(0,t.j4)(p,{key:1,class:"col-12 col-sm-2",dense:"",outlined:"",modelValue:l.locale,"onUpdate:modelValue":e=>l.locale=e,label:"locale",placeholder:""},null,8,["modelValue","onUpdate:modelValue"])):(0,t.kq)("",!0)])),_:2},1024),(0,t.Wm)(c),(0,t.Wm)(w,{align:"between"},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(g,{modelValue:l.optional,"onUpdate:modelValue":e=>l.optional=e,label:"optional"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(g,{modelValue:l.facet,"onUpdate:modelValue":e=>l.facet=e,label:"facet"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(g,{modelValue:l.index,"onUpdate:modelValue":e=>l.index=e,label:"index"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(g,{modelValue:l.sort,"onUpdate:modelValue":e=>l.sort=e,label:"sort"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(g,{modelValue:l.infix,"onUpdate:modelValue":e=>l.infix=e,label:"infix"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(g,{modelValue:l.stem,"onUpdate:modelValue":e=>l.stem=e,label:"stem"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Wm)(b,{size:"md",padding:"sm lg",unelevated:"",onClick:o=>e.removeField(l)},{default:(0,t.w5)((()=>[(0,t.Uk)("Remove Field")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,t.Wm)(V,{name:"json",class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{modelValue:e.schemaJson,"onUpdate:modelValue":l[3]||(l[3]=l=>e.schemaJson=l),style:{height:"60vh"}},null,8,["modelValue"]),e.jsonError?((0,t.wg)(),(0,t.j4)(v,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Invalid Format: "+(0,a.zw)(e.jsonError),1)])),_:1})):(0,t.kq)("",!0)])),_:1})])),_:1},8,["modelValue","style"]),(0,t.Wm)(c),(0,t.Wm)(w,{align:"between",class:"bg-primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[5]||(l[5]=l=>e.addField())},{default:(0,t.w5)((()=>[(0,t.Uk)("Add field")])),_:1}),(0,t.Wm)(b,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[6]||(l[6]=l=>e.$emit("submit",e.schema))},{default:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(e.primaryActionLabel),1)])),_:1})])),_:1})])),_:1})}var i=o(66531);const r=(0,t.aZ)({components:{MonacoEditor:i.Z},name:"CollectionUi",emits:["submit"],props:{initialSchema:{type:Object,default:()=>({name:"",fields:[{name:"",type:"string",facet:!1,optional:!1,index:!0,sort:!1,infix:!1,stem:!1,locale:"",num_dim:void 0}],default_sorting_field:"",token_separators:[],symbols_to_index:[],enable_nested_fields:!1})},primaryActionLabel:{type:String,required:!0},createMode:{type:Boolean,default:!1}},data(){return{tab:"form",schema:{name:"",fields:[],default_sorting_field:"",token_separators:[],symbols_to_index:[],enable_nested_fields:!1},types:["string","string[]","int32","int32[]","int64","int64[]","float","float[]","bool","bool[]","geopoint","geopoint[]","object","object[]","string*","auto"],jsonError:null}},computed:{availableSortFields(){const e=(this.schema.fields||[]).filter((e=>["int32","float"].includes(e.type)||"string"===e.type&&e.sort));return[""].concat(e.map((e=>e.name)))},schemaJson:{get(){return JSON.stringify(this.schema,null,2)},set(e){try{this.schema=JSON.parse(e),this.jsonError=null}catch(l){this.jsonError=l.message}}}},watch:{initialSchema:{immediate:!0,handler(e){this.schema=JSON.parse(JSON.stringify(e))}}},methods:{addField(){this.schema.fields&&this.schema.fields.push({name:"",type:"string",facet:!1,optional:!1,index:!0,sort:!1,infix:!1,stem:!1,locale:"",num_dim:void 0})},removeField(e){if(this.schema.fields){const l=this.schema.fields.indexOf(e);l>-1&&this.schema.fields.splice(l,1)}}}});var u=o(11639),m=o(44458),c=o(47817),p=o(70900),f=o(50926),h=o(89800),g=o(84106),b=o(63190),w=o(66611),y=o(26384),V=o(11821),_=o(11221),v=o(24455),k=o(47128),W=o(69984),q=o.n(W);const U=(0,u.Z)(r,[["render",s]]),Z=U;q()(r,"components",{QCard:m.Z,QTabs:c.Z,QTab:p.Z,QSeparator:f.Z,QTabPanels:h.Z,QTabPanel:g.Z,QCardSection:b.Z,QInput:w.Z,QSelect:y.Z,QCardActions:V.Z,QCheckbox:_.Z,QBtn:v.Z,QBanner:k.Z})}}]);