"use strict";(self["webpackChunktypesense_dashboard"]=self["webpackChunktypesense_dashboard"]||[]).push([[609],{73609:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var o=t(83673),l=t(62323);function s(e,n,t,s,a,i){const d=(0,o.up)("q-input"),y=(0,o.up)("q-option-group"),m=(0,o.up)("q-select"),r=(0,o.up)("q-card-section"),u=(0,o.up)("q-btn"),p=(0,o.up)("q-card-actions"),c=(0,o.up)("q-card"),h=(0,o.up)("q-expansion-item"),f=(0,o.up)("q-icon"),b=(0,o.up)("q-td"),g=(0,o.up)("q-table"),w=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(w,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{"expand-separator":"",icon:"sync_alt",label:(e.isUpdate?"Update":"Add")+" Synonym","header-class":"bg-primary text-white",modelValue:e.expanded,"onUpdate:modelValue":n[5]||(n[5]=n=>e.expanded=n)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"bg-grey-3 column"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"ID",modelValue:e.id,"onUpdate:modelValue":n[0]||(n[0]=n=>e.id=n),filled:"","bg-color":"white",class:"q-mb-md"},null,8,["modelValue"]),(0,o.Wm)(y,{filled:"","bg-color":"white",modelValue:e.type,"onUpdate:modelValue":n[1]||(n[1]=n=>e.type=n),options:e.typeOptions,color:"primary",inline:"",class:"q-mb-md"},null,8,["modelValue","options"]),e.type===e.types.ONE_WAY?((0,o.wg)(),(0,o.j4)(d,{key:0,filled:"","bg-color":"white",label:"Root",modelValue:e.synonym.root,"onUpdate:modelValue":n[2]||(n[2]=n=>e.synonym.root=n),class:"q-mb-md"},null,8,["modelValue"])):(0,o.kq)("",!0),(0,o.Wm)(m,{filled:"","bg-color":"white",modelValue:e.synonym.synonyms,"onUpdate:modelValue":n[3]||(n[3]=n=>e.synonym.synonyms=n),multiple:"","use-chips":"","use-input":"","new-value-mode":"add","stack-label":"","hide-dropdown-icon":"",label:"Synonyms"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{align:"right",class:"bg-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!e.isValid,onClick:n[4]||(n[4]=n=>e.createSynonym())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.isUpdate?"Update":"Add")+" Synonym",1)])),_:1},8,["disable"])])),_:1})])),_:1})])),_:1},8,["label","modelValue"]),(0,o.Wm)(g,{class:"q-mt-md",title:"Synonyms",flat:"",bordered:"",filter:e.filter,rows:e.$store.state.node.data.synonyms,columns:e.columns,"row-key":"id","visible-columns":["id","type","root","synonyms","actions"],pagination:{rowsPerPage:50,sortBy:"name"}},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":n[6]||(n[6]=n=>e.filter=n),placeholder:"Search"},{append:(0,o.w5)((()=>[(0,o.Wm)(f,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-actions":(0,o.w5)((n=>[(0,o.Wm)(b,{class:"text-right"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{flat:"",color:"primary",onClick:t=>e.editSynonym(n.row),icon:"edit",title:"Edit"},null,8,["onClick"]),(0,o.Wm)(u,{flat:"",color:"negative",onClick:t=>e.deleteSynonym(n.row.id),icon:"delete_forever",title:"Delete"},null,8,["onClick"])])),_:2},1024)])),_:1},8,["filter","rows","columns"])])),_:1})}var a,i=t(50731),d=function(e,n,t,o){function l(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,s){function a(e){try{d(o.next(e))}catch(n){s(n)}}function i(e){try{d(o["throw"](e))}catch(n){s(n)}}function d(e){e.done?t(e.value):l(e.value).then(a,i)}d((o=o.apply(e,n||[])).next())}))};(function(e){e["ONE_WAY"]="one-way",e["MULTI_WAY"]="multi-way"})(a||(a={}));const y=(0,o.aZ)({name:"Synonyms",data(){return{expanded:0===this.$store.state.node.data.synonyms.length,filter:"",type:a.MULTI_WAY,types:a,typeOptions:[{label:"Multi-way synonyms",value:a.MULTI_WAY},{label:"One-way synonym",value:a.ONE_WAY}],synonym:{root:"",synonyms:[]},id:(0,i.x0)(),columns:[{label:"ID",name:"id",field:"id",align:"left"},{label:"Type",name:"type",align:"left",field:e=>e.root?a.ONE_WAY:a.MULTI_WAY,sortable:!0},{label:"Root",name:"root",field:"root",align:"left",sortable:!0},{label:"Synonyms",name:"synonyms",field:e=>JSON.stringify(e.synonyms),align:"left",sortable:!0},{label:"Actions",name:"actions",align:"right"}]}},computed:{isValid(){return this.synonym.synonyms.length>0&&this.id.length>0},isUpdate(){return this.$store.state.node.data.synonyms.map((e=>e.id)).includes(this.id)}},methods:{createSynonym(){return d(this,void 0,void 0,(function*(){const e={synonyms:JSON.parse(JSON.stringify(this.synonym.synonyms))};this.type===this.types.ONE_WAY&&(e.root=this.synonym.root),yield this.$store.dispatch("node/createSynonym",{id:this.id,synonym:e}),this.id=(0,i.x0)(),this.synonym={root:"",synonyms:[]},this.expanded=!1}))},editSynonym(e){this.id=e.id||(0,i.x0)(),this.synonym=JSON.parse(JSON.stringify(e)),this.type=this.synonym.root?a.ONE_WAY:a.MULTI_WAY,this.expanded=!0},deleteSynonym(e){this.$q.dialog({title:"Confirm",message:`Delete synonym with id: ${e}?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/deleteSynonym",e)}))}}});var m=t(74260),r=t(24379),u=t(64615),p=t(10151),c=t(25589),h=t(34842),f=t(28758),b=t(97637),g=t(99367),w=t(48240),W=t(83243),_=t(24554),S=t(83884),V=t(7518),q=t.n(V);const U=(0,m.Z)(y,[["render",s]]),O=U;q()(y,"components",{QPage:r.Z,QExpansionItem:u.Z,QCard:p.Z,QCardSection:c.Z,QInput:h.Z,QOptionGroup:f.Z,QSelect:b.Z,QCardActions:g.Z,QBtn:w.Z,QTable:W.Z,QIcon:_.Z,QTd:S.Z})}}]);