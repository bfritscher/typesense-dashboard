(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[233],{8537:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_e});var n=s(61758);function i(e,t,s,i,r,a){const l=(0,n.g2)("q-tab"),o=(0,n.g2)("q-tabs"),c=(0,n.g2)("q-separator"),u=(0,n.g2)("search-instant-search"),d=(0,n.g2)("q-tab-panel"),h=(0,n.g2)("search-json"),m=(0,n.g2)("q-tab-panels"),p=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(p,{padding:""},{default:(0,n.k6)((()=>[(0,n.bF)(o,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"bg-primary text-white",align:"justify","narrow-indicator":""},{default:(0,n.k6)((()=>[(0,n.bF)(l,{name:"form",label:"InstantSearch Mode"}),(0,n.bF)(l,{name:"json",label:"JSON Mode"})])),_:1},8,["modelValue"]),(0,n.bF)(c),(0,n.bF)(m,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),animated:"","keep-alive":""},{default:(0,n.k6)((()=>[(0,n.bF)(d,{name:"form"},{default:(0,n.k6)((()=>[(0,n.bF)(u)])),_:1}),(0,n.bF)(d,{name:"json",class:"q-pa-none"},{default:(0,n.k6)((()=>[(0,n.bF)(h)])),_:1})])),_:1},8,["modelValue"])])),_:1})}var r=s(58790);const a={class:"row"},l={class:"col-9"},o={class:"col-3"},c={class:"q-mt-md"},u={key:1,class:"ais-Hits q-mt-md"},d={class:"ais-Hits-list"},h={key:2,class:"text-h5 q-mt-md"},m={key:3};function p(e,t,s,i,p,b){const g=(0,n.g2)("monaco-editor"),f=(0,n.g2)("q-item-label"),y=(0,n.g2)("q-item-section"),v=(0,n.g2)("q-item"),k=(0,n.g2)("q-list"),C=(0,n.g2)("q-scroll-area"),_=(0,n.g2)("q-banner"),F=(0,n.g2)("q-btn"),q=(0,n.g2)("search-result-item"),S=(0,n.gN)("ripple");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",a,[(0,n.Lk)("div",l,[(0,n.bF)(g,{modelValue:e.searchParametersJson,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchParametersJson=t),style:{height:"30vh","min-height":"200px"}},null,8,["modelValue"])]),(0,n.Lk)("div",o,[(0,n.bF)(C,{style:{height:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(k,{bordered:"",separator:"",dense:""},{default:(0,n.k6)((()=>[(0,n.bF)(f,{header:""},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("History")]))),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.history,(t=>(0,n.bo)(((0,n.uX)(),(0,n.Wv)(v,{clickable:"",key:t,title:t,onClick:s=>e.searchParametersJson=t},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(t.slice(0,60)),1)])),_:2},1024)])),_:2},1032,["title","onClick"])),[[S]]))),128))])),_:1})])),_:1})])]),e.jsonError?((0,n.uX)(),(0,n.Wv)(_,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,n.k6)((()=>[(0,n.eW)(" Invalid Format: "+(0,r.v_)(e.jsonError),1)])),_:1})):(0,n.Q3)("",!0),(0,n.Lk)("div",c,[(0,n.bF)(F,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!!e.jsonError,onClick:t[1]||(t[1]=t=>e.search())},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("Run Query")]))),_:1},8,["disable"]),(0,n.bF)(F,{size:"md",padding:"sm lg",unelevated:"",color:"accent",class:"q-ml-sm",disable:!e.results||!e.results.hits,onClick:t[2]||(t[2]=t=>e.exportHits())},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("Export Hits")]))),_:1},8,["disable"]),(0,n.bF)(F,{size:"md",padding:"sm lg",unelevated:"",color:"accent",class:"q-ml-sm",disable:!e.results,onClick:t[3]||(t[3]=t=>e.exportResults())},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("Export Raw Results")]))),_:1},8,["disable"])]),e.hits?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("ol",d,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.hits,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"ais-Hits-item",key:e.id},[(0,n.bF)(q,{item:e},null,8,["item"])])))),128))])])):(0,n.Q3)("",!0),e.results&&e.results.hits&&0===e.results.hits.length?((0,n.uX)(),(0,n.CE)("div",h," No match found ")):(0,n.Q3)("",!0),e.results&&!e.results.hits?((0,n.uX)(),(0,n.CE)("pre",m,"          "+(0,r.v_)(e.resultsJson)+"\n        ",1)):(0,n.Q3)("",!0)],64)}var b=s(74701);const g={key:0,class:"column no-wrap search-result-item"},f={key:0},y={key:0,class:"array-field"},v=["innerHTML"],k={key:1},C={key:0},_={key:0},F={key:1};function q(e,t,s,i,a,l){const o=(0,n.g2)("q-item-label"),c=(0,n.g2)("ais-highlight"),u=(0,n.g2)("q-img"),d=(0,n.g2)("q-item-section"),h=(0,n.g2)("q-btn"),m=(0,n.g2)("q-item"),p=(0,n.g2)("q-separator"),b=(0,n.g2)("q-list"),q=(0,n.g2)("q-space");return e.currentCollection?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.bF)(b,{dense:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.currentCollection.fields,(t=>((0,n.uX)(),(0,n.Wv)(m,{key:t.name},{default:(0,n.k6)((()=>[(0,n.bF)(d,{side:"",class:"q-mt-sm text-body2"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{caption:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(t.name)+" ",1),e.item&&Array.isArray(e.item[t.name])?((0,n.uX)(),(0,n.CE)("span",f,"["+(0,r.v_)(e.item[t.name].length)+"]",1)):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(o,{class:"overflow-hidden text-no-wrap text-ellipsis",title:e.item[t.name]},{default:(0,n.k6)((()=>[e.item&&Array.isArray(e.item._highlightResult[t.name])?((0,n.uX)(),(0,n.CE)("div",y,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.item._highlightResult[t.name],((e,t)=>((0,n.uX)(),(0,n.CE)("div",{innerHTML:e.value,key:t},null,8,v)))),128))])):((0,n.uX)(),(0,n.CE)("div",k,[t.name.includes(".*")?((0,n.uX)(),(0,n.CE)("div",C,[e.item&&Array.isArray(e.item[t.name])?((0,n.uX)(),(0,n.CE)("div",_,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.item[t.name],((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t},(0,r.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("div",F,(0,r.v_)(e.item&&e.item[t.name]),1))])):((0,n.uX)(),(0,n.Wv)(c,{key:1,attribute:t.name,hit:e.item},null,8,["attribute","hit"]))]))])),_:2},1032,["title"]),e.item&&e.isImage(e.item[t.name])?((0,n.uX)(),(0,n.Wv)(o,{key:0,caption:"",class:"img-preview"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{src:e.item[t.name],fit:"contain",class:"img-preview"},null,8,["src"])])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024),e.item&&e.isUrl(e.item[t.name])?((0,n.uX)(),(0,n.Wv)(d,{key:0,side:"",top:""},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{flat:"",href:e.item[t.name],target:"_blank",size:"sm",padding:"sm",icon:"sym_s_open_in_new",title:"open"},null,8,["href"])])),_:2},1024)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024)))),128)),(0,n.bF)(p),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.fieldsNotInSchema,(t=>((0,n.uX)(),(0,n.Wv)(m,{key:t},{default:(0,n.k6)((()=>[(0,n.bF)(d,{side:"",class:"q-mt-sm text-body2"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{caption:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(t),1)])),_:2},1024),(0,n.bF)(o,{class:"overflow-hidden text-no-wrap text-ellipsis",title:JSON.stringify(e.item[t],null,2)},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.item[t]),1)])),_:2},1032,["title"]),e.isImage(e.item[t])?((0,n.uX)(),(0,n.Wv)(o,{key:0,caption:"",class:"img-preview"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{src:e.item[t],fit:"contain",class:"img-preview"},null,8,["src"])])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024),e.isUrl(e.item[t])?((0,n.uX)(),(0,n.Wv)(d,{key:0,side:"",top:""},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{flat:"",href:e.item[t],target:"_blank",size:"sm",padding:"sm",icon:"sym_s_open_in_new",title:"open"},null,8,["href"])])),_:2},1024)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024)))),128))])),_:1}),(0,n.bF)(q),(0,n.bF)(p),(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{flat:"",size:"sm",padding:"sm",onClick:t[0]||(t[0]=t=>e.editDocument()),icon:"sym_s_edit",title:"Edit"})])),_:1})])),_:1}),(0,n.bF)(d,{side:""},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{flat:"",size:"sm",padding:"sm",onClick:t[1]||(t[1]=t=>e.deleteDocumentById(e.item.id)),icon:"sym_s_delete_forever",title:"Delete"})])),_:1})])),_:1})])),_:1})])):(0,n.Q3)("",!0)}const S=(0,n.pM)({name:"SearchResultItem",props:{item:{type:Object}},computed:{currentCollection(){return this.$store.state.node.currentCollection},fieldsNotInSchema(){if(!this.item||!this.currentCollection||!this.currentCollection.fields)return[];const e=this.currentCollection.fields.map((e=>e.name)).concat(["objectID","text_match"]);return Object.keys(this.item).filter((t=>!t.startsWith("_")&&!e.includes(t)))}},methods:{isUrl(e){return!!e&&(e=String(e),e.startsWith("http://")||e.startsWith("https://"))},isImage(e){var t;if(!e)return!1;e=String(e);const s=["jpg","jpeg","png","gif","bmp","svg","webp"],n=(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"";return s.includes(n)},editDocument(){const e={};this.item&&(Object.keys(this.item).forEach((t=>{if(!t.startsWith("_")&&!["objectID","text_match"].includes(t)){if(!this.item)return;e[t]=this.item[t]}})),this.$store.dispatch("node/editDocuments",[JSON.parse(JSON.stringify(e))]))},deleteDocumentById(e){this.$q.dialog({title:"Confirm",message:`Delete document with id: ${e}?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/deleteDocumentById",e)}))}}});var I=s(12807),A=s(53999),w=s(90124),E=s(25173),x=s(13796),Q=s(15046),X=s(1693),j=s(10386),W=s(93676),$=s(98582),P=s.n($);const L=(0,I.A)(S,[["render",q]]),O=L;P()(S,"components",{QList:A.A,QItem:w.A,QItemSection:E.A,QItemLabel:x.A,QImg:Q.A,QBtn:X.A,QSeparator:j.A,QSpace:W.A});var T=s(71271),J=function(e,t,s,n){function i(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,r){function a(e){try{o(n.next(e))}catch(t){r(t)}}function l(e){try{o(n["throw"](e))}catch(t){r(t)}}function o(e){e.done?s(e.value):i(e.value).then(a,l)}o((n=n.apply(e,t||[])).next())}))};const D="typesense-search-history",H=(0,n.pM)({components:{SearchResultItem:O,MonacoEditor:b.A},name:"Search",data(){return{tab:"form",history:[],searchParameters:{q:"stark",query_by:"company_name",filter_by:"num_employees:>100",sort_by:"num_employees:desc",page:1,per_page:10,exhaustive_search:!0},jsonError:null,results:null}},computed:{currentCollection(){return this.$store.state.node.currentCollection},searchParametersJson:{get(){return JSON.stringify(this.searchParameters,null,2)},set(e){try{this.searchParameters=JSON.parse(e),this.jsonError=null}catch(t){this.jsonError=t.message}}},hits(){return this.results&&this.results.hits?this.results.hits.map((e=>{const t=Object.assign({},e.document);return t._highlightResult=Object.keys(e.document).reduce(((t,s)=>(t[s]={value:String(e.document[s])},t)),{}),e.highlights.forEach((e=>{t._highlightResult[e.field]={value:e.snippet}})),t})):[]},resultsJson(){return JSON.stringify(this.results,null,2)}},methods:{exportResults(){return J(this,void 0,void 0,(function*(){this.results&&(yield this.$store.dispatch("node/exportToJson",this.results))}))},exportHits(){return J(this,void 0,void 0,(function*(){if(this.results&&this.results.hits){const e=this.results.hits.map((e=>e.document));yield this.$store.dispatch("node/exportToJson",e)}}))},search(){return J(this,void 0,void 0,(function*(){this.results=null,this.jsonError=null,this.addToHistory();try{this.results=yield this.$store.dispatch("node/search",this.searchParameters)}catch(e){this.jsonError=e.message}}))},addToHistory(){const e=this.searchParametersJson,t=this.history.indexOf(e);0!==t&&(t>0&&this.history.splice(t,1),this.history.unshift(e),this.saveHistory())},loadHistory(){var e;this.history=T.A.getItem(`${D}-${(null===(e=this.currentCollection)||void 0===e?void 0:e.name)||""}`)||[]},saveHistory(){var e;T.A.set(`${D}-${(null===(e=this.currentCollection)||void 0===e?void 0:e.name)||""}`,this.history.slice(0,20))}},watch:{currentCollection:{handler(){this.loadHistory()},immediate:!0}}});var V=s(48958),N=s(46868),R=s(39626);const B=(0,I.A)(H,[["render",p]]),K=B;P()(H,"components",{QScrollArea:V.A,QList:A.A,QItemLabel:x.A,QItem:w.A,QItemSection:E.A,QBanner:N.A,QBtn:X.A}),P()(H,"directives",{Ripple:R.A});const M={class:"row q-mt-md"},U={class:"col-3 q-pr-sm"},z={class:"text-subtitle2 q-pt-md"},G={class:"text-subtitle2 q-pt-md"},Y={class:"col-9"},Z={key:1};function ee(e,t,s,i,a,l){const o=(0,n.g2)("ais-configure"),c=(0,n.g2)("debounced-search-box"),u=(0,n.g2)("ais-search-box"),d=(0,n.g2)("ais-stats"),h=(0,n.g2)("ais-current-refinements"),m=(0,n.g2)("ais-hits-per-page"),p=(0,n.g2)("q-btn"),b=(0,n.g2)("ais-sort-by"),g=(0,n.g2)("q-select"),f=(0,n.g2)("ais-range-input"),y=(0,n.g2)("ais-refinement-list"),v=(0,n.g2)("ais-pagination"),k=(0,n.g2)("search-result-item"),C=(0,n.g2)("ais-hits"),_=(0,n.g2)("ais-instant-search"),F=(0,n.g2)("q-banner");return e.searchClient&&e.currentCollection?((0,n.uX)(),(0,n.Wv)(_,{key:0,"search-client":e.searchClient,"index-name":e.currentCollection.name,middlewares:e.middlewares},{default:(0,n.k6)((()=>[(0,n.bF)(o,{hitsPerPage:12}),(0,n.bF)(u,{"index-name":"instant_search","search-client":e.searchClient},{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1},8,["search-client"]),(0,n.bF)(d),(0,n.bF)(h),(0,n.Lk)("div",M,[(0,n.Lk)("div",U,[(0,n.bF)(m,{items:[{label:"12 hits per page",value:12,default:!0},{label:"48 hits per page",value:48},{label:"100 hits per page",value:100},{label:"250 hits per page",value:250}]}),(0,n.bF)(p,{flat:"",onClick:t[0]||(t[0]=t=>e.exportPage())},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("export current page")]))),_:1}),t[4]||(t[4]=(0,n.Lk)("div",{class:"text-subtitle2 q-pt-md"},"Sort By",-1)),(0,n.bF)(b,{items:e.sortBy},null,8,["items"]),t[5]||(t[5]=(0,n.Lk)("div",{class:"text-subtitle2 q-pt-md"},"Stopwords",-1)),(0,n.bF)(g,{modelValue:e.currentStopwordsSet,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.currentStopwordsSet=t),t[2]||(t[2]=t=>e.updateTypesenseAdapterConfiguration())],disable:!e.$store.state.node.data.features.stopwords,outlined:"",clearable:"",dense:"","options-dense":"",options:e.stopwords},null,8,["modelValue","disable","options"]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.facetNumberFields,(e=>((0,n.uX)(),(0,n.CE)("div",{class:"q-mb-sm",key:e},[(0,n.Lk)("div",z,(0,r.v_)(e),1),(0,n.bF)(f,{searchable:!0,attribute:e},null,8,["attribute"])])))),128)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.facetStringFields,(e=>((0,n.uX)(),(0,n.CE)("div",{class:"q-mb-sm",key:e},[(0,n.Lk)("div",G,(0,r.v_)(e),1),(0,n.bF)(y,{class:"q-mb-sm",searchable:!0,attribute:e},null,8,["attribute"])])))),128))]),(0,n.Lk)("div",Y,[(0,n.bF)(v,{class:"q-mb-md"}),(0,n.bF)(C,null,(0,n.eX)({_:2},[e.currentCollection?{name:"item",fn:(0,n.k6)((({item:e})=>[(0,n.bF)(k,{item:e},null,8,["item"])])),key:"0"}:void 0]),1024),(0,n.bF)(v,{class:"q-my-md"})])])])),_:1},8,["search-client","index-name","middlewares"])):e.searchClientError?((0,n.uX)(),(0,n.CE)("div",Z,[(0,n.bF)(F,{"inline-actions":"",class:"text-white bg-red"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.searchClientError),1)])),_:1})])):(0,n.Q3)("",!0)}function te(e,t,s,i,r,a){const l=(0,n.g2)("q-icon"),o=(0,n.g2)("q-input");return(0,n.uX)(),(0,n.Wv)(o,{modelValue:a.query,"onUpdate:modelValue":t[0]||(t[0]=e=>a.query=e),onClear:a.clear,dense:"",autofocus:"",outlined:"",type:"search",clearable:"","clear-icon":"close",placeholder:"Search..."},{prepend:(0,n.k6)((()=>[(0,n.bF)(l,{name:"search"})])),_:1},8,["modelValue","onClear"])}var se=s(88941),ne=s(39775);const ie={mixins:[(0,ne.yb)({connector:se.A})],props:{delay:{type:Number,default:200,required:!1}},data(){return{timerId:null,localQuery:""}},unmounted(){this.timerId&&clearTimeout(this.timerId)},methods:{clear(){this.query=""}},computed:{query:{get(){return this.localQuery},set(e){this.localQuery=e,this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this.state.refine(this.localQuery)}),this.delay)}}}};var re=s(39270),ae=s(50492);const le=(0,I.A)(ie,[["render",te]]),oe=le;P()(ie,"components",{QInput:re.A,QIcon:ae.A});var ce=s(5286),ue=function(e,t,s,n){function i(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,r){function a(e){try{o(n.next(e))}catch(t){r(t)}}function l(e){try{o(n["throw"](e))}catch(t){r(t)}}function o(e){e.done?s(e.value):i(e.value).then(a,l)}o((n=n.apply(e,t||[])).next())}))};const de=(0,n.pM)({components:{SearchResultItem:O,DebouncedSearchBox:oe},name:"SearchInstantSearch",data(){const e={searchClient:null,typesenseInstantsearchAdapter:null,instantSearchInstance:null,searchClientError:null,currentStopwordsSet:null,middlewares:[({instantSearchInstance:t})=>({subscribe(){e.instantSearchInstance=t},unsubscribe(){e.instantSearchInstance=null}})]};return e},computed:{currentCollection(){return this.$store.state.node.currentCollection},facetNumberFields(){return this.currentCollection&&this.currentCollection.fields?this.currentCollection.fields.filter((e=>e.facet&&["int32","int64","float","int32[]","int64[]","float[]"].includes(e.type)&&!e.name.includes(".*"))).map((e=>e.name)):[]},facetStringFields(){return this.currentCollection&&this.currentCollection.fields?this.currentCollection.fields.filter((e=>e.facet&&["string","string[]"].includes(e.type)&&!e.name.includes(".*"))).map((e=>e.name)):[]},sortBy(){if(!this.currentCollection||!this.currentCollection.fields)return[];const e=[{value:this.currentCollection.name,label:"Default"}];return this.currentCollection.fields.filter((e=>["int32","float"].includes(e.type)||"string"===e.type&&e.sort)).forEach((t=>{this.currentCollection&&(e.push({value:`${this.currentCollection.name}/sort/${t.name}:asc`,label:`${t.name} asc`}),e.push({value:`${this.currentCollection.name}/sort/${t.name}:desc`,label:`${t.name} desc`}))})),e},stopwords(){return this.$store.state.node.data.stopwords.map((e=>e.id))}},methods:{exportPage(){return ue(this,void 0,void 0,(function*(){this.instantSearchInstance&&this.currentCollection&&(yield this.$store.dispatch("node/exportToJson",this.instantSearchInstance.renderState[this.currentCollection.name].hits.results.hits))}))},updateTypesenseAdapterConfiguration(){this.typesenseInstantsearchAdapter&&this.currentCollection&&this.typesenseInstantsearchAdapter.updateConfiguration(Object.assign(Object.assign({},this.typesenseInstantsearchAdapter.configuration),{additionalSearchParameters:Object.assign(Object.assign({},this.typesenseInstantsearchAdapter.configuration.additionalSearchParameters),{stopwords:this.currentStopwordsSet})}))}},watch:{currentCollection:{handler(){this.searchClient=null,this.searchClientError=null,window.setTimeout((()=>{var e;if(!this.$store.state.node.loginData||!this.currentCollection)return;const t=((null===(e=this.currentCollection)||void 0===e?void 0:e.fields)||[]).filter((e=>e.index&&["string","string[]"].includes(e.type)&&!e.name.includes(".*"))).map((e=>e.name)).join(",");try{const e=new ce.A({server:{nodes:[Object.assign({},this.$store.state.node.loginData.node)],apiKey:this.$store.state.node.loginData.apiKey},additionalSearchParameters:{exhaustive_search:!0,query_by:t}});this.typesenseInstantsearchAdapter=e,this.searchClient=e.searchClient}catch(s){this.searchClientError=s.message+"Using query_by: "+t,console.error(s)}}))},immediate:!0}}});var he=s(75848);const me=(0,I.A)(de,[["render",ee]]),pe=me;P()(de,"components",{QBtn:X.A,QSelect:he.A,QBanner:N.A});const be=(0,n.pM)({components:{SearchJson:K,SearchInstantSearch:pe},name:"Search",data(){return{tab:"form"}}});var ge=s(77716),fe=s(42980),ye=s(10327),ve=s(39041),ke=s(71746);const Ce=(0,I.A)(be,[["render",i]]),_e=Ce;P()(be,"components",{QPage:ge.A,QTabs:fe.A,QTab:ye.A,QSeparator:j.A,QTabPanels:ve.A,QTabPanel:ke.A})},34711:()=>{}}]);