"use strict";(self["webpackChunktypesense_dashboard"]=self["webpackChunktypesense_dashboard"]||[]).push([[497],{49375:(e,l,t)=>{t.d(l,{Z:()=>h});var o=t(83673);const a={ref:"editorWrapper",class:"col relative-position overflow-hidden editorWrapper"},n={ref:"editorElement",class:"absolute-top-left"};function d(e,l,t,d,i,s){const r=(0,o.up)("q-resize-observer");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(r,{onResize:e.onResize},null,8,["onResize"]),(0,o._)("div",n,null,512)],512)}var i=t(19966),s=t(61959);const r=(0,o.aZ)({name:"MonacoEditor",props:{modelValue:{type:String,default:""},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.iH)(null),a=(0,s.iH)(null);let n;return(0,o.bv)((()=>{n=i.editor.create(t.value,Object.assign({value:e.modelValue,language:"json",theme:"vs-dark",minimap:{enabled:!1}},e.options)),n.onDidChangeModelContent((()=>{l("update:modelValue",null===n||void 0===n?void 0:n.getValue())}))})),(0,o.Ah)((()=>{null===n||void 0===n||n.dispose()})),(0,o.YP)((()=>e.modelValue),(()=>{var l;e.modelValue!==(null===n||void 0===n?void 0:n.getValue())&&(null===(l=null===n||void 0===n?void 0:n.getModel())||void 0===l||l.setValue(e.modelValue),null===n||void 0===n||n.setScrollPosition({scrollTop:0}))})),{editorElement:t,editorWrapper:a,onResize(){null===n||void 0===n||n.layout({height:0,width:0}),window.setTimeout((()=>{null===n||void 0===n||n.layout({height:a.value.offsetHeight,width:a.value.offsetWidth})}))}}}});var u=t(74260),m=t(15151),c=t(7518),p=t.n(c);const f=(0,u.Z)(r,[["render",d],["__scopeId","data-v-46f34a38"]]),h=f;p()(r,"components",{QResizeObserver:m.Z})},14497:(e,l,t)=>{t.r(l),t.d(l,{default:()=>L});var o=t(83673);function a(e,l,t,a,n,d){const i=(0,o.up)("collection-create"),s=(0,o.up)("q-icon"),r=(0,o.up)("q-input"),u=(0,o.up)("collection-list-item"),m=(0,o.up)("q-table"),c=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(c,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i),(0,o.Wm)(m,{grid:"","grid-header":"",filter:e.filter,columns:e.columns,rows:e.$store.state.node.data.collections,"row-key":"name",pagination:{rowsPerPage:0,sortBy:"name"}},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[0]||(l[0]=l=>e.filter=l),placeholder:"Search"},{append:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"search"})])),_:1},8,["modelValue"])])),item:(0,o.w5)((e=>[(0,o.Wm)(u,{collection:e.row},null,8,["collection"])])),_:1},8,["filter","columns","rows"])])),_:1})}var n=t(62323);const d={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3"},i=["title"];function s(e,l,t,a,s,r){const u=(0,o.up)("q-item-label"),m=(0,o.up)("q-item-section"),c=(0,o.up)("q-item"),p=(0,o.up)("q-list"),f=(0,o.up)("q-card-section"),h=(0,o.up)("q-separator"),w=(0,o.up)("q-btn"),b=(0,o.up)("q-space"),g=(0,o.up)("q-card-actions"),_=(0,o.up)("q-card");return(0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o._)("div",{class:"text-h5 text-ellipsis overflow-hidden",title:e.collection.name},(0,n.zw)(e.collection.name),9,i),(0,o.Wm)(p,{dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{to:`/collection/${e.collection.name}/search`},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Nb documents ")])),_:1})])),_:1}),(0,o.Wm)(m,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.collection.num_documents),1)])),_:1})])),_:1})])),_:1},8,["to"]),(0,o.Wm)(c,{to:`/collection/${e.collection.name}/schema`},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Schema fields ")])),_:1})])),_:1}),(0,o.Wm)(m,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.collection.fields.length),1)])),_:1})])),_:1})])),_:1},8,["to"]),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Nb memory shards ")])),_:1})])),_:1}),(0,o.Wm)(m,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.collection.num_memory_shards),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Created at ")])),_:1})])),_:1}),(0,o.Wm)(m,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(new Date(1e3*e.collection.created_at).toLocaleString()),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(h),(0,o.Wm)(g,{align:"right",class:"bg-grey-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{flat:"",to:`/collection/${e.collection.name}/schema`},{default:(0,o.w5)((()=>[(0,o.Uk)("schema")])),_:1},8,["to"]),(0,o.Wm)(b),(0,o.Wm)(w,{flat:"",to:`/collection/${e.collection.name}/document`},{default:(0,o.w5)((()=>[(0,o.Uk)("import")])),_:1},8,["to"]),(0,o.Wm)(w,{flat:"",onClick:l[0]||(l[0]=l=>e.exportCollection())},{default:(0,o.w5)((()=>[(0,o.Uk)("export")])),_:1})])),_:1})])),_:1})])}var r=function(e,l,t,o){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,n){function d(e){try{s(o.next(e))}catch(l){n(l)}}function i(e){try{s(o["throw"](e))}catch(l){n(l)}}function s(e){e.done?t(e.value):a(e.value).then(d,i)}s((o=o.apply(e,l||[])).next())}))};const u=(0,o.aZ)({name:"Collection",props:["collection"],methods:{exportCollection(){return r(this,void 0,void 0,(function*(){this.$q.loading.show({message:"Downloading. Please wait...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),yield this.$store.dispatch("node/exportDocuments",this.collection.name).then((()=>this.$q.loading.hide())).catch((()=>{this.$q.loading.hide(),this.$q.dialog({title:"Export failed",message:"Try desktop version of the app."})}))}))}}});var m=t(74260),c=t(10151),p=t(25589),f=t(27011),h=t(83414),w=t(52035),b=t(2350),g=t(65869),_=t(99367),W=t(48240),v=t(62025),V=t(7518),q=t.n(V);const y=(0,m.Z)(u,[["render",s]]),Z=y;q()(u,"components",{QCard:c.Z,QCardSection:p.Z,QList:f.Z,QItem:h.Z,QItemSection:w.Z,QItemLabel:b.Z,QSeparator:g.Z,QCardActions:_.Z,QBtn:W.Z,QSpace:v.Z});const C={class:"row q-gutter-md"},k=(0,o._)("div",{class:"text-subtitle1 q-pt-md"},"Fields",-1);function U(e,l,t,a,d,i){const s=(0,o.up)("q-tab"),r=(0,o.up)("q-tabs"),u=(0,o.up)("q-separator"),m=(0,o.up)("q-input"),c=(0,o.up)("q-select"),p=(0,o.up)("q-card-section"),f=(0,o.up)("q-checkbox"),h=(0,o.up)("q-btn"),w=(0,o.up)("q-card-actions"),b=(0,o.up)("q-card"),g=(0,o.up)("q-tab-panel"),_=(0,o.up)("monaco-editor"),W=(0,o.up)("q-banner"),v=(0,o.up)("q-tab-panels"),V=(0,o.up)("q-expansion-item"),q=(0,o.up)("q-list");return(0,o.wg)(),(0,o.j4)(q,{bordered:"",class:"rounded-borders"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{"expand-separator":"",icon:"post_add",label:"Add Collection","header-class":"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=l=>e.tab=l),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"form",label:"Form Mode"}),(0,o.Wm)(s,{name:"json",label:"JSON Mode"})])),_:1},8,["modelValue"]),(0,o.Wm)(u),(0,o.Wm)(v,{modelValue:e.tab,"onUpdate:modelValue":l[4]||(l[4]=l=>e.tab=l),animated:"",style:{height:"60vh"},class:"bg-grey-3"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{name:"form"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o._)("div",C,[(0,o.Wm)(m,{class:"col",filled:"","bg-color":"white",dense:"",modelValue:e.schema.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.schema.name=l),label:"Collection Name",placeholder:"books",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),(0,o.Wm)(c,{filled:"","bg-color":"white",class:"col",dense:"",modelValue:e.schema.default_sorting_field,"onUpdate:modelValue":l[2]||(l[2]=l=>e.schema.default_sorting_field=l),options:e.availableSortFields,label:"Default sort field optional, but must be int32 or float"},null,8,["modelValue","options"])]),k,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.schema.fields,((l,t)=>((0,o.wg)(),(0,o.j4)(b,{flat:"",bordered:"",key:t,class:"bg-grey-1 q-mb-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"row q-gutter-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"col",dense:"",filled:"","bg-color":"white",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,label:"Field Name",placeholder:"title",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","rules"]),(0,o.Wm)(c,{class:"col",dense:"",filled:"","bg-color":"white",modelValue:l.type,"onUpdate:modelValue":e=>l.type=e,label:"type",options:e.types,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"])])),_:2},1024),(0,o.Wm)(u),(0,o.Wm)(w,{align:"between"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(f,{modelValue:l.optional,"onUpdate:modelValue":e=>l.optional=e,label:"optional"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(f,{modelValue:l.facet,"onUpdate:modelValue":e=>l.facet=e,label:"facet"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(f,{modelValue:l.index,"onUpdate:modelValue":e=>l.index=e,label:"index"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(f,{modelValue:l.sort,"onUpdate:modelValue":e=>l.sort=e,label:"sort"},null,8,["modelValue","onUpdate:modelValue"])]),(0,o.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",onClick:t=>e.removeField(l)},{default:(0,o.w5)((()=>[(0,o.Uk)("Remove Field")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,o.Wm)(g,{name:"json",class:"q-pa-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{modelValue:e.schemaJson,"onUpdate:modelValue":l[3]||(l[3]=l=>e.schemaJson=l),style:{height:"60vh"}},null,8,["modelValue"]),e.jsonError?((0,o.wg)(),(0,o.j4)(W,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Invalid Format: "+(0,n.zw)(e.jsonError),1)])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(u),(0,o.Wm)(w,{align:"between",class:"bg-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[5]||(l[5]=l=>e.addField())},{default:(0,o.w5)((()=>[(0,o.Uk)("Add field")])),_:1}),(0,o.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[6]||(l[6]=l=>e.createCollection())},{default:(0,o.w5)((()=>[(0,o.Uk)("Create Collection")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var Q=t(49375);const x=(0,o.aZ)({components:{MonacoEditor:Q.Z},name:"CollectionCreate",data(){return{tab:"form",schema:{name:"",fields:[],default_sorting_field:"",token_separators:[],symbols_to_index:[]},types:["string","string[]","int32","int32[]","int64","int64[]","float","float[]","bool","bool[]","geopoint","geopoint[]","string*","auto"],jsonError:null}},mounted(){this.addField()},computed:{availableSortFields(){const e=this.schema.fields.filter((e=>["int32","float"].includes(e.type)||"string"===e.type&&e.sort));return[""].concat(e.map((e=>e.name)))},schemaJson:{get(){return JSON.stringify(this.schema,null,2)},set(e){try{this.schema=JSON.parse(e),this.jsonError=null}catch(l){this.jsonError=l.message}}}},methods:{addField(){this.schema.fields.push({name:"",type:"string",optional:!1,facet:!1,index:!0})},removeField(e){this.schema.fields.splice(this.schema.fields.indexOf(e),1)},createCollection(){this.$store.dispatch("node/createCollection",this.schema)}}});var S=t(64615),j=t(57547),z=t(3269),F=t(5906),$=t(64916),E=t(34842),I=t(68516),N=t(65735),P=t(15607);const D=(0,m.Z)(x,[["render",U]]),T=D;q()(x,"components",{QList:f.Z,QExpansionItem:S.Z,QCard:c.Z,QTabs:j.Z,QTab:z.Z,QSeparator:g.Z,QTabPanels:F.Z,QTabPanel:$.Z,QCardSection:p.Z,QInput:E.Z,QSelect:I.Z,QCardActions:_.Z,QCheckbox:N.Z,QBtn:W.Z,QBanner:P.Z});const O=(0,o.aZ)({components:{CollectionListItem:Z,CollectionCreate:T},name:"Collections",data(){return{filter:"",columns:[{name:"name",required:!0,label:"Name",field:"name",sortable:!0},{name:"num_documents",required:!0,label:"Nb documents",field:"num_documents",sortable:!0},{name:"schema_fields",required:!0,label:"Schema fields",field:e=>e.fields.length||0,sortable:!0},{name:"num_memory_shards",required:!0,label:"Nb memory shards",field:"num_memory_shards",sortable:!0},{name:"created_at",required:!0,label:"Created at",field:"created_at",sortable:!0}]}},mounted(){this.$store.dispatch("node/getCollections")}});var J=t(24379),M=t(83243),R=t(24554);const A=(0,m.Z)(O,[["render",a]]),L=A;q()(O,"components",{QPage:J.Z,QTable:M.Z,QInput:E.Z,QIcon:R.Z})}}]);