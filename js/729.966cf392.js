"use strict";(globalThis["webpackChunktypesense_dashboard"]=globalThis["webpackChunktypesense_dashboard"]||[]).push([[729],{49463:(e,t,o)=>{o.r(t),o.d(t,{default:()=>W});var n=o(61758),a=o(58790);function l(e,t,o,l,s,i){const r=(0,n.g2)("collection-create"),c=(0,n.g2)("q-btn"),d=(0,n.g2)("q-td"),m=(0,n.g2)("q-item-section"),u=(0,n.g2)("q-avatar"),p=(0,n.g2)("q-item"),_=(0,n.g2)("q-menu"),b=(0,n.g2)("q-icon"),f=(0,n.g2)("q-tr"),h=(0,n.g2)("q-input"),k=(0,n.g2)("q-table"),g=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(g,{padding:""},{default:(0,n.k6)((()=>[(0,n.bF)(r),(0,n.bF)(k,{filter:e.filter,columns:e.columns,rows:e.$store.state.node.data.collections,"row-key":"name",pagination:{rowsPerPage:0,sortBy:"name"}},{body:(0,n.k6)((o=>[(0,n.bF)(f,{props:o},{default:(0,n.k6)((()=>[(0,n.bF)(d,{key:"name",props:o},{default:(0,n.k6)((()=>[(0,n.bF)(c,{"no-caps":"",flat:"",to:`/collection/${o.row.name}/search`,size:"1.2em",class:"text-bold"},{default:(0,n.k6)((()=>[(0,n.eW)((0,a.v_)(o.row.name),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,n.bF)(d,{key:"actions",props:o},{default:(0,n.k6)((()=>[(0,n.bF)(c,{flat:"",round:"",icon:"sym_s_more_vert"},{default:(0,n.k6)((()=>[(0,n.bF)(_,null,{default:(0,n.k6)((()=>[(0,n.bF)(p,{dense:"",clickable:"",to:`/collection/${o.row.name}/document`},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("Import")]))),_:1}),(0,n.bF)(m,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{icon:"sym_s_file_upload"})])),_:1})])),_:2},1032,["to"]),(0,n.bF)(p,{dense:"",clickable:"",onClick:t=>e.exportCollection(o.row.name)},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("Export")]))),_:1}),(0,n.bF)(m,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{icon:"sym_s_file_download"})])),_:1})])),_:2},1032,["onClick"]),(0,n.bF)(p,{dense:"",clickable:"",to:`/collection/${o.row.name}/schema`},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("Edit")]))),_:1}),(0,n.bF)(m,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{icon:"sym_s_data_object"})])),_:1})])),_:2},1032,["to"]),(0,n.bF)(p,{dense:"",clickable:"",onClick:t=>e.cloneCollection(o.row.name)},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("Clone Schema")]))),_:1}),(0,n.bF)(m,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{icon:"sym_s_content_copy"})])),_:1})])),_:2},1032,["onClick"]),(0,n.bF)(p,{dense:"",clickable:"",flat:"",style:{color:"#de3b39"},onClick:t=>e.drop(o.row.name)},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("Delete")]))),_:1}),(0,n.bF)(m,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{icon:"sym_s_delete"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"]),(0,n.bF)(d,{key:"num_documents",props:o},{default:(0,n.k6)((()=>[(0,n.bF)(c,{"no-caps":"",flat:"",to:`/collection/${o.row.name}/search`},{default:(0,n.k6)((()=>[(0,n.eW)((0,a.v_)(o.row.num_documents)+" ",1),(0,n.bF)(b,{name:"sym_s_search",size:"1em",right:""})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,n.bF)(d,{key:"schema_fields",props:o},{default:(0,n.k6)((()=>[(0,n.bF)(c,{"no-caps":"",flat:"",to:`/collection/${o.row.name}/schema`},{default:(0,n.k6)((()=>[(0,n.eW)((0,a.v_)(o.row.fields.length||0)+" ",1),(0,n.bF)(b,{name:"sym_s_data_object",size:"1em",right:""})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,n.bF)(d,{key:"created_at",props:o},{default:(0,n.k6)((()=>[(0,n.eW)((0,a.v_)(new Date(1e3*o.row.created_at).toLocaleString()),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),"top-right":(0,n.k6)((()=>[(0,n.bF)(h,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),placeholder:"Search"},{append:(0,n.k6)((()=>[(0,n.bF)(b,{name:"sym_s_search"})])),_:1},8,["modelValue"])])),_:1},8,["filter","columns","rows"])])),_:1})}function s(e,t,o,a,l,s){const i=(0,n.g2)("collection-ui"),r=(0,n.g2)("q-expansion-item"),c=(0,n.g2)("q-list");return(0,n.uX)(),(0,n.Wv)(c,{bordered:"",class:"rounded-borders"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{"expand-separator":"",icon:"sym_s_library_add","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:"Add Collection","header-class":"bg-primary text-white"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{"primary-action-label":"Create Collection","create-mode":"",onSubmit:e.createCollection},null,8,["onSubmit"])])),_:1})])),_:1})}var i=o(93930);const r=(0,n.pM)({components:{CollectionUi:i.A},name:"CollectionCreate",methods:{createCollection(e){const t=JSON.parse(JSON.stringify(e));for(const o of t.fields)"float[]"===o.type&&o.num_dim||delete o.num_dim,o.type.startsWith("object")&&(t.enable_nested_fields=!0);this.$store.dispatch("node/createCollection",t)}}});var c=o(12807),d=o(53999),m=o(9459),u=o(98582),p=o.n(u);const _=(0,c.A)(r,[["render",s]]),b=_;p()(r,"components",{QList:d.A,QExpansionItem:m.A});var f=function(e,t,o,n){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function s(e){try{r(n.next(e))}catch(t){l(t)}}function i(e){try{r(n["throw"](e))}catch(t){l(t)}}function r(e){e.done?o(e.value):a(e.value).then(s,i)}r((n=n.apply(e,t||[])).next())}))};const h=(0,n.pM)({components:{CollectionCreate:b},name:"Collections",data(){return{filter:"",columns:[{name:"name",required:!0,label:"Name",field:"name",sortable:!0},{name:"actions",required:!1,label:"Actions",field:"actions",sortable:!1},{name:"num_documents",required:!0,label:"Nb documents",field:"num_documents",sortable:!0},{name:"schema_fields",required:!0,label:"Schema fields",field:"fields",sortable:!0},{name:"created_at",required:!0,label:"Created at",field:"created_at",sortable:!0}]}},mounted(){this.$store.dispatch("node/getCollections")},methods:{exportCollection(e){return f(this,void 0,void 0,(function*(){this.$q.loading.show({message:"Downloading. Please wait...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),yield this.$store.dispatch("node/exportDocuments",e).then((()=>this.$q.loading.hide())).catch((()=>{this.$q.loading.hide(),this.$q.dialog({title:"Export failed",message:"Try desktop version of the app."})}))}))},drop(e){this.$q.dialog({title:"Confirm",message:`Drop ${e} and all documents?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("node/dropCollection",e)}))},cloneCollection(e){this.$q.dialog({title:"Clone Schema",message:"Provide name for new collection? (documents are not copied!, only schema, currations and synonyms)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((t=>{this.$store.dispatch("node/cloneCollectionSchema",{collectionName:e,destinationName:t})}))}}});var k=o(77716),g=o(39942),y=o(44488),F=o(45262),C=o(1693),w=o(55998),v=o(90124),q=o(25173),A=o(3952),$=o(50492),x=o(39270);const Q=(0,c.A)(h,[["render",l]]),W=Q;p()(h,"components",{QPage:k.A,QTable:g.A,QTr:y.A,QTd:F.A,QBtn:C.A,QMenu:w.A,QItem:v.A,QItemSection:q.A,QAvatar:A.A,QIcon:$.A,QInput:x.A})}}]);