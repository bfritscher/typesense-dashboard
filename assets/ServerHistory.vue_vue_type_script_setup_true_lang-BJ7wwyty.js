import{Q as y,a as u,b as h}from"./QSelect-2an0Xdjf.js";import{aw as N,aP as Q,bb as w,bc as H,K as S,u as B,f as E,L as i,M as n,N as r,B as _,Y as m,O as l,a4 as I,S as v,R as d,Q as L,T as C,a6 as K,a5 as P,X as k}from"./index-COFOeL2T.js";import{Q as q}from"./QList-BdM4oJbp.js";function b(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const g=N({name:"close-popup",beforeMount(e,{value:t}){const o={depth:b(t),handler(s){o.depth!==0&&setTimeout(()=>{const p=w(e);p!==void 0&&H(p,s,o.depth)})},handlerKey(s){Q(s,13)===!0&&o.handler(s)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=b(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}}),O=S({__name:"ServerHistory",props:{showLogout:{type:Boolean,default:!1}},setup(e){const t=e,o=B(),s=E(()=>o.loginHistory.map(c=>JSON.parse(c)));function p(c){const a=t.showLogout;o.login({...c,forceHomeRedirect:a})}return(c,a)=>(n(),i(q,{style:{"min-width":"100px"}},{default:r(()=>[t.showLogout?_((n(),i(y,{key:0,clickable:"",onClick:v(o).logout},{default:r(()=>[l(u,null,{default:r(()=>a[0]||(a[0]=[d("Logout")])),_:1}),l(u,{avatar:""},{default:r(()=>[l(L,{name:"sym_s_logout"})]),_:1})]),_:1},8,["onClick"])),[[g]]):m("",!0),t.showLogout?(n(),i(C,{key:1})):m("",!0),_((n(),i(y,{clickable:"",onClick:v(o).clearHistory},{default:r(()=>[l(u,null,{default:r(()=>a[1]||(a[1]=[d("Clear history")])),_:1}),l(u,{avatar:""},{default:r(()=>[l(L,{name:"sym_s_delete"})]),_:1})]),_:1},8,["onClick"])),[[g]]),l(C),s.value.length===0?(n(),i(h,{key:2,header:""},{default:r(()=>a[2]||(a[2]=[d("No History")])),_:1})):m("",!0),s.value.length>0?(n(),i(h,{key:3,header:""},{default:r(()=>a[3]||(a[3]=[d("Server History")])),_:1})):m("",!0),(n(!0),I(P,null,K(s.value,(f,x)=>_((n(),i(y,{key:x,clickable:"",onClick:D=>p(f)},{default:r(()=>[l(u,null,{default:r(()=>[d(k(f.node.protocol)+"://"+k(f.node.host)+":"+k(f.node.port),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[g]])),128))]),_:1}))}});export{O as _};
