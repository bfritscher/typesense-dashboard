import{Q as qa,a as fr,b as Ta,c as hr}from"./QTabPanels-CcHMvx2K.js";import{e as qt,h as Y,B as sr,p as xa,r as Q,i as ea,s as ja,f as U,ab as ka,w as Tt,ac as Mt,ad as Ia,ae as Ma,o as Na,J as Ha,af as pr,t as vr,G as Da,A as Fa,ag as Ua,g as za,ah as $a,ai as Nt,K as me,V as re,a4 as X,M as L,O as M,Y as ae,L as ie,W as pe,a5 as de,_ as ta,N as W,a6 as _e,aa as _r,R as ce,X as fe,u as lr,T as ra,a1 as ne,P as mr,U as La,Q as Ba,a7 as Wa,aj as j,ak as Ka,al as Qa,am as ur,an as Ga,S as Ja,ao as Va}from"./index-COFOeL2T.js";import{Q as Xa}from"./QPage-BBJw8y2s.js";import{Q as cr,a as Et,b as Te,c as Ya}from"./QSelect-2an0Xdjf.js";import{Q as na}from"./QList-BdM4oJbp.js";import{Q as yr}from"./QResizeObserver-Noi1RvW0.js";import{Q as Za,T as gr}from"./QScrollObserver-BA975hDr.js";import{b as ge}from"./format-BvkBI9bc.js";import{Q as aa}from"./QBanner-7Mldg0mA.js";import{M as ei}from"./MonacoEditor-BaqsUY8n.js";import{u as ti}from"./use-quasar-CSTLctX9.js";import{G as ri,J as ni}from"./ExperimentalDynamicWidgets-CBcgJRGx.js";import"./touch-BjYP5sR0.js";const ai=qt({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup(e){return()=>[Y("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),Y("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),sr(Y("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),sr(Y("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]}}),br=["vertical","horizontal"],Ht={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Sr={prevent:!0,mouse:!0,mouseAllDir:!0},Cr=e=>e>=250?50:Math.ceil(e/5),ii=qt({name:"QScrollArea",props:{...xa,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:u,emit:d}){const r=Q(!1),t=Q(!1),i=Q(!1),s={vertical:Q(0),horizontal:Q(0)},c={vertical:{ref:Q(null),position:Q(0),size:Q(0)},horizontal:{ref:Q(null),position:Q(0),size:Q(0)}},{proxy:p}=ea(),_=ja(e,p.$q);let m=null,h;const a=Q(null),n=U(()=>"q-scrollarea"+(_.value===!0?" q-scrollarea--dark":""));Object.assign(s,{verticalInner:U(()=>s.vertical.value-e.verticalOffset[0]-e.verticalOffset[1]),horizontalInner:U(()=>s.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1])}),c.vertical.percentage=U(()=>{const O=c.vertical.size.value-s.vertical.value;if(O<=0)return 0;const x=ge(c.vertical.position.value/O,0,1);return Math.round(x*1e4)/1e4}),c.vertical.thumbHidden=U(()=>(e.visible===null?i.value:e.visible)!==!0&&r.value===!1&&t.value===!1||c.vertical.size.value<=s.vertical.value+1),c.vertical.thumbStart=U(()=>e.verticalOffset[0]+c.vertical.percentage.value*(s.verticalInner.value-c.vertical.thumbSize.value)),c.vertical.thumbSize=U(()=>Math.round(ge(s.verticalInner.value*s.verticalInner.value/c.vertical.size.value,Cr(s.verticalInner.value),s.verticalInner.value))),c.vertical.style=U(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${c.vertical.thumbStart.value}px`,height:`${c.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`})),c.vertical.thumbClass=U(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(c.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),c.vertical.barClass=U(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(c.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),c.horizontal.percentage=U(()=>{const O=c.horizontal.size.value-s.horizontal.value;if(O<=0)return 0;const x=ge(Math.abs(c.horizontal.position.value)/O,0,1);return Math.round(x*1e4)/1e4}),c.horizontal.thumbHidden=U(()=>(e.visible===null?i.value:e.visible)!==!0&&r.value===!1&&t.value===!1||c.horizontal.size.value<=s.horizontal.value+1),c.horizontal.thumbStart=U(()=>e.horizontalOffset[0]+c.horizontal.percentage.value*(s.horizontalInner.value-c.horizontal.thumbSize.value)),c.horizontal.thumbSize=U(()=>Math.round(ge(s.horizontalInner.value*s.horizontalInner.value/c.horizontal.size.value,Cr(s.horizontalInner.value),s.horizontalInner.value))),c.horizontal.style=U(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[p.$q.lang.rtl===!0?"right":"left"]:`${c.horizontal.thumbStart.value}px`,width:`${c.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`})),c.horizontal.thumbClass=U(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(c.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),c.horizontal.barClass=U(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(c.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const o=U(()=>c.vertical.thumbHidden.value===!0&&c.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle);function l(){const O={};return br.forEach(x=>{const F=c[x];Object.assign(O,{[x+"Position"]:F.position.value,[x+"Percentage"]:F.percentage.value,[x+"Size"]:F.size.value,[x+"ContainerSize"]:s[x].value,[x+"ContainerInnerSize"]:s[x+"Inner"].value})}),O}const f=ka(()=>{const O=l();O.ref=p,d("scroll",O)},0);function v(O,x,F){if(br.includes(O)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(O==="vertical"?pr:Mt)(a.value,x,F)}function y({height:O,width:x}){let F=!1;s.vertical.value!==O&&(s.vertical.value=O,F=!0),s.horizontal.value!==x&&(s.horizontal.value=x,F=!0),F===!0&&T()}function S({position:O}){let x=!1;c.vertical.position.value!==O.top&&(c.vertical.position.value=O.top,x=!0),c.horizontal.position.value!==O.left&&(c.horizontal.position.value=O.left,x=!0),x===!0&&T()}function b({height:O,width:x}){c.horizontal.size.value!==x&&(c.horizontal.size.value=x,T()),c.vertical.size.value!==O&&(c.vertical.size.value=O,T())}function A(O,x){const F=c[x];if(O.isFirst===!0){if(F.thumbHidden.value===!0)return;h=F.position.value,t.value=!0}else if(t.value!==!0)return;O.isFinal===!0&&(t.value=!1);const H=Ht[x],z=(F.size.value-s[x].value)/(s[x+"Inner"].value-F.thumbSize.value),P=O.distance[H.dist],g=h+(O.direction===H.dir?1:-1)*P*z;k(g,x)}function q(O,x){const F=c[x];if(F.thumbHidden.value!==!0){const H=x==="vertical"?e.verticalOffset[0]:e.horizontalOffset[0],z=O[Ht[x].offset]-H,P=F.thumbStart.value-H;if(z<P||z>P+F.thumbSize.value){const g=z-F.thumbSize.value/2,w=ge(g/(s[x+"Inner"].value-F.thumbSize.value),0,1);k(w*Math.max(0,F.size.value-s[x].value),x)}F.ref.value!==null&&F.ref.value.dispatchEvent(new MouseEvent(O.type,O))}}function T(){r.value=!0,m!==null&&clearTimeout(m),m=setTimeout(()=>{m=null,r.value=!1},e.delay),e.onScroll!==void 0&&f()}function k(O,x){a.value[Ht[x].scroll]=O}let C=null;function D(){C!==null&&clearTimeout(C),C=setTimeout(()=>{C=null,i.value=!0},p.$q.platform.is.ios?50:0)}function $(){C!==null&&(clearTimeout(C),C=null),i.value=!1}let E=null;Tt(()=>p.$q.lang.rtl,O=>{a.value!==null&&Mt(a.value,Math.abs(c.horizontal.position.value)*(O===!0?-1:1))}),Ia(()=>{E={top:c.vertical.position.value,left:c.horizontal.position.value}}),Ma(()=>{if(E===null)return;const O=a.value;O!==null&&(Mt(O,E.left),pr(O,E.top))}),Na(f.cancel),Object.assign(p,{getScrollTarget:()=>a.value,getScroll:l,getScrollPosition:()=>({top:c.vertical.position.value,left:c.horizontal.position.value}),getScrollPercentage:()=>({top:c.vertical.percentage.value,left:c.horizontal.percentage.value}),setScrollPosition:v,setScrollPercentage(O,x,F){v(O,x*(c[O].size.value-s[O].value)*(O==="horizontal"&&p.$q.lang.rtl===!0?-1:1),F)}});const K={scroll:c,thumbVertDir:[[gr,O=>{A(O,"vertical")},void 0,{vertical:!0,...Sr}]],thumbHorizDir:[[gr,O=>{A(O,"horizontal")},void 0,{horizontal:!0,...Sr}]],onVerticalMousedown(O){q(O,"vertical")},onHorizontalMousedown(O){q(O,"horizontal")}};return()=>Y("div",{class:n.value,onMouseenter:D,onMouseleave:$},[Y("div",{ref:a,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[Y("div",{class:"q-scrollarea__content absolute",style:o.value},Ha(u.default,[Y(yr,{debounce:0,onResize:b})])),Y(Za,{axis:"both",onScroll:S})]),Y(yr,{debounce:0,onResize:y}),Y(ai,{store:K,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}}),oi=qt({name:"QSpace",setup(){const e=Y("div",{class:"q-space"});return()=>e}}),si={ratio:[String,Number]};function ui(e,u){return U(()=>{const d=Number(e.ratio||(u!==void 0?u.value:void 0));return isNaN(d)!==!0&&d>0?{paddingBottom:`${100/d}%`}:null})}const li=1.7778,ci=qt({name:"QImg",props:{...si,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:li},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:u,emit:d}){const r=Q(e.initialRatio),t=ui(e,r),i=ea(),{registerTimeout:s,removeTimeout:c}=vr(),{registerTimeout:p,removeTimeout:_}=vr(),m=U(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),h=U(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),a=[Q(null),Q(m.value)],n=Q(0),o=Q(!1),l=Q(!1),f=U(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),v=U(()=>({width:e.width,height:e.height})),y=U(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),S=U(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function b(){if(_(),e.loadingShowDelay===0){o.value=!0;return}p(()=>{o.value=!0},e.loadingShowDelay)}function A(){_(),o.value=!1}function q({target:E}){Nt(i)===!1&&(c(),r.value=E.naturalHeight===0?.5:E.naturalWidth/E.naturalHeight,T(E,1))}function T(E,K){K===1e3||Nt(i)===!0||(E.complete===!0?k(E):s(()=>{T(E,K+1)},50))}function k(E){Nt(i)!==!0&&(n.value=n.value^1,a[n.value].value=null,A(),E.getAttribute("__qerror")!=="true"&&(l.value=!1),d("load",E.currentSrc||E.src))}function C(E){c(),A(),l.value=!0,a[n.value].value=h.value,a[n.value^1].value=m.value,d("error",E)}function D(E){const K=a[E].value,O={key:"img_"+E,class:y.value,style:S.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...K};return n.value===E?Object.assign(O,{class:O.class+"current",onLoad:q,onError:C}):O.class+="loaded",Y("div",{class:"q-img__container absolute-full",key:"img"+E},Y("img",O))}function $(){return o.value===!1?Y("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},za(u[l.value===!0?"error":"default"])):Y("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},u.loading!==void 0?u.loading():e.noSpinner===!0?void 0:[Y($a,{color:e.spinnerColor,size:e.spinnerSize})])}{let E=function(){Tt(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,K=>{c(),l.value=!1,K===null?(A(),a[n.value^1].value=m.value):b(),a[n.value].value=K},{immediate:!0})};Da.value===!0?Fa(E):E()}return()=>{const E=[];return t.value!==null&&E.push(Y("div",{key:"filler",style:t.value})),a[0].value!==null&&E.push(D(0)),a[1].value!==null&&E.push(D(1)),E.push(Y(Ua,{name:"q-transition--fade"},$)),Y("div",{key:"main",class:f.value,style:v.value,role:"img","aria-label":e.alt},E)}}}),di={key:0,class:"img-preview"},fi=me({__name:"SearchResultItemAttribute",props:{hit:{}},setup(e){const u=r=>r?(r=String(r),r.startsWith("http://")||r.startsWith("https://")):!1,d=r=>{if(!r)return!1;r=String(r);const t=["jpg","jpeg","png","gif","bmp","svg","webp"],i=r.split(".").pop()?.toLowerCase()||"";return t.includes(i)};return(r,t)=>{const i=re("ais-highlight");return L(),X(de,null,[M(i,{attribute:"a",hit:{_highlightResult:{a:r.hit}}},null,8,["hit"]),d(r.hit?.value)?(L(),X("div",di,[M(ci,{src:r.hit.value,fit:"contain",class:"img-preview"},null,8,["src"])])):ae("",!0),u(r.hit?.value)?(L(),ie(pe,{key:1,class:"absolute-top-right",flat:"",href:r.hit.value,target:"_blank",size:"sm",padding:"sm",icon:"sym_s_open_in_new",title:"open"},null,8,["href"])):ae("",!0)],64)}}}),Rr=ta(fi,[["__scopeId","data-v-1b631cd2"]]),hi={key:0},pi={key:0},vi={key:1},_i=me({__name:"SearchResultItemNestedDisplay",props:{item:{},includeFields:{default:()=>[]},embedFields:{default:()=>[]}},setup(e){const u=e;function d(s){return s.some(c=>c.value&&c.matchLevel)}function r(s,c){return s.filter(p=>p.startsWith(c)&&p!==c).map(p=>p.replace(`${c}.`,""))}const t=U(()=>{const s=Object.keys(u.item);return u.includeFields.filter(c=>s.includes(c)).concat(s.filter(c=>!u.includeFields.includes(c)))});function i(s){if(Array.isArray(s))return s.map(p=>i(p));if(Object.prototype.hasOwnProperty.call(s,"value")&&Object.prototype.hasOwnProperty.call(s,"matchLevel"))return s.value;const c={};for(const p in s)c[p]=i(s[p]);return c}return(s,c)=>{const p=re("search-result-item-nested-display",!0);return L(),ie(na,{dense:""},{default:W(()=>[(L(!0),X(de,null,_e(t.value,_=>(L(),ie(cr,{key:_},{default:W(()=>[M(Et,{side:"",class:"q-mt-sm text-body2"},{default:W(()=>[M(Te,{caption:"",class:_r(u.includeFields.includes(_)?"schema-field":"text-warning unknown-field")},{default:W(()=>[ce(fe(_)+" ",1),Array.isArray(s.item[_])&&s.item[_].length>1?(L(),X("span",hi,"["+fe(s.item[_].length)+"]",1)):ae("",!0)]),_:2},1032,["class"]),u.embedFields.includes(_)?ae("",!0):(L(),ie(Te,{key:0,class:"overflow-hidden text-no-wrap text-ellipsis",title:JSON.stringify(i(s.item[_]),null,2)},{default:W(()=>[Array.isArray(s.item[_])?(L(),X("div",{key:0,class:_r(d(s.item[_])?"array-field":"nested-field")},[(L(!0),X(de,null,_e(s.item[_],(m,h)=>(L(),X(de,{key:h},[m.value&&m.matchLevel?(L(),X("div",pi,[M(Rr,{hit:m},null,8,["hit"])])):(L(),ie(p,{key:1,item:m,"include-fields":r(u.includeFields,_),"embed-fields":r(u.embedFields,_)},null,8,["item","include-fields","embed-fields"]))],64))),128))],2)):(L(),X("div",vi,[M(Rr,{hit:s.item[_]},null,8,["hit"])]))]),_:2},1032,["title"]))]),_:2},1024)]),_:2},1024))),128))]),_:1})}}}),mi={key:0,class:"column no-wrap search-result-item"},ia=me({__name:"SearchResultItem",props:{item:{}},setup(e){const u=e,d=lr(),r=ti(),t=U(()=>d.currentCollection),i=U(()=>!u.item||!t.value||!t.value.fields?[]:t.value.fields.map(_=>_.name)),s=U(()=>!u.item||!t.value||!t.value.fields?[]:t.value.fields.filter(_=>_.embed).map(_=>_.name)),c=()=>{const _={};u.item&&(Object.keys(u.item).forEach(m=>{!m.startsWith("_")&&!["objectID","text_match"].includes(m)&&(_[m]=u.item?.[m])}),d.editDocuments([JSON.parse(JSON.stringify(_))]))},p=_=>{r.dialog({title:"Confirm",message:`Delete document with id: ${_}?`,cancel:!0,persistent:!0}).onOk(()=>{d.deleteDocumentById(_)})};return(_,m)=>t.value?(L(),X("div",mi,[_.item?(L(),ie(_i,{key:0,item:_.item._highlightResult,"include-fields":i.value,"embed-fields":s.value},null,8,["item","include-fields","embed-fields"])):ae("",!0),M(oi),M(ra),M(cr,null,{default:W(()=>[M(Et,null,{default:W(()=>[M(Te,null,{default:W(()=>[M(pe,{flat:"",size:"sm",padding:"sm",icon:"sym_s_edit",title:"Edit",onClick:m[0]||(m[0]=h=>c())})]),_:1})]),_:1}),M(Et,{side:""},{default:W(()=>[M(Te,null,{default:W(()=>[M(pe,{flat:"",size:"sm",padding:"sm",icon:"sym_s_delete_forever",title:"Delete",onClick:m[1]||(m[1]=h=>p(_.item?.id))})]),_:1})]),_:1})]),_:1})])):ae("",!0)}}),yi={class:"row"},gi={class:"col-9"},bi={class:"col-3"},Si={class:"q-mt-md"},Ci={key:1,class:"ais-Hits q-mt-md"},Ri={class:"ais-Hits-list"},Pi={key:2,class:"text-h5 q-mt-md"},wi={key:3},Pr="typesense-search-history",Oi=me({__name:"SearchJson",setup(e){const u=lr(),d=Q([]),r=Q({q:"stark",query_by:"company_name",filter_by:"num_employees:>100",sort_by:"num_employees:desc",page:1,per_page:10,exhaustive_search:!0}),t=Q(null),i=Q(null),s=U(()=>u.currentCollection),c=U({get:()=>JSON.stringify(r.value,null,2),set:f=>{try{r.value=JSON.parse(f),t.value=null}catch(v){t.value=v.message}}}),p=U(()=>i.value?.hits?i.value.hits.map(f=>{const v=Object.assign({},f.document);return v._highlightResult=Object.keys(f.document).reduce((y,S)=>(y[S]={value:String(f.document[S])},y),{}),f.highlights.forEach(y=>{v._highlightResult[y.field]={value:y.snippet}}),v}):[]),_=U(()=>JSON.stringify(i.value,null,2)),m=()=>{i.value&&u.exportToJson(i.value)},h=()=>{if(i.value?.hits){const f=i.value.hits.map(v=>v.document);u.exportToJson(f)}},a=()=>{mr.set(`${Pr}-${s.value?.name||""}`,d.value.slice(0,20))},n=()=>{const f=c.value,v=d.value.indexOf(f);v!==0&&(v>0&&d.value.splice(v,1),d.value.unshift(f),a())},o=async()=>{i.value=null,t.value=null,n();try{i.value=await u.search(r.value)}catch(f){t.value=f.message}};return Tt(s,()=>{d.value=mr.getItem(`${Pr}-${s.value?.name||""}`)||[]},{immediate:!0}),(f,v)=>(L(),X(de,null,[ne("div",yi,[ne("div",gi,[M(ei,{modelValue:c.value,"onUpdate:modelValue":v[0]||(v[0]=y=>c.value=y),style:{height:"30vh","min-height":"200px"}},null,8,["modelValue"])]),ne("div",bi,[M(ii,{style:{height:"100%"}},{default:W(()=>[M(na,{bordered:"",separator:"",dense:""},{default:W(()=>[M(Te,{header:""},{default:W(()=>v[4]||(v[4]=[ce("History")])),_:1}),(L(!0),X(de,null,_e(d.value,y=>sr((L(),ie(cr,{key:y,clickable:"",title:y,onClick:S=>c.value=y},{default:W(()=>[M(Et,null,{default:W(()=>[ce(fe(y.slice(0,60)),1)]),_:2},1024)]),_:2},1032,["title","onClick"])),[[La]])),128))]),_:1})]),_:1})])]),t.value?(L(),ie(aa,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:W(()=>[ce(" Invalid Format: "+fe(t.value),1)]),_:1})):ae("",!0),ne("div",Si,[M(pe,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!!t.value,onClick:v[1]||(v[1]=y=>o())},{default:W(()=>v[5]||(v[5]=[ce("Run Query")])),_:1},8,["disable"]),M(pe,{size:"md",padding:"sm lg",unelevated:"",color:"accent",class:"q-ml-sm",disable:!i.value||!i.value.hits,onClick:v[2]||(v[2]=y=>h())},{default:W(()=>v[6]||(v[6]=[ce("Export Hits")])),_:1},8,["disable"]),M(pe,{size:"md",padding:"sm lg",unelevated:"",color:"accent",class:"q-ml-sm",disable:!i.value,onClick:v[3]||(v[3]=y=>m())},{default:W(()=>v[7]||(v[7]=[ce("Export Raw Results")])),_:1},8,["disable"])]),p.value?(L(),X("div",Ci,[ne("ol",Ri,[(L(!0),X(de,null,_e(p.value,y=>(L(),X("li",{key:y.id,class:"ais-Hits-item"},[M(ia,{item:y},null,8,["item"])]))),128))])])):ae("",!0),i.value&&i.value.hits&&i.value.hits.length===0?(L(),X("div",Pi," No match found ")):ae("",!0),i.value&&!i.value.hits?(L(),X("pre",wi,"          "+fe(_.value)+`
        `,1)):ae("",!0)],64))}}),Ai={mixins:[ri({connector:ni})],props:{delay:{type:Number,default:200,required:!1}},data(){return{timerId:null,localQuery:""}},computed:{query:{get(){return this.localQuery},set(e){this.localQuery=e,this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.state.refine(this.localQuery)},this.delay)}}},unmounted(){this.timerId&&clearTimeout(this.timerId)},methods:{clear(){this.query=""}}};function Ei(e,u,d,r,t,i){return L(),ie(Wa,{modelValue:i.query,"onUpdate:modelValue":u[0]||(u[0]=s=>i.query=s),dense:"",autofocus:"",outlined:"",type:"search",clearable:"","clear-icon":"close",placeholder:"Search...",onClear:i.clear},{prepend:W(()=>[M(Ba,{name:"search"})]),_:1},8,["modelValue","onClear"])}const qi=ta(Ai,[["render",Ei]]);var Dt={},Ft={exports:{}},wr;function xe(){return wr||(wr=1,function(e){function u(d){return d&&d.__esModule?d:{default:d}}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(Ft)),Ft.exports}var Ut={exports:{}},zt={exports:{}},Or;function xt(){return Or||(Or=1,function(e){function u(d){"@babel/helpers - typeof";return e.exports=u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,u(d)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(zt)),zt.exports}var Ar;function Ti(){return Ar||(Ar=1,function(e){var u=xt().default;function d(){e.exports=d=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var r,t={},i=Object.prototype,s=i.hasOwnProperty,c=Object.defineProperty||function(P,g,w){P[g]=w.value},p=typeof Symbol=="function"?Symbol:{},_=p.iterator||"@@iterator",m=p.asyncIterator||"@@asyncIterator",h=p.toStringTag||"@@toStringTag";function a(P,g,w){return Object.defineProperty(P,g,{value:w,enumerable:!0,configurable:!0,writable:!0}),P[g]}try{a({},"")}catch{a=function(w,R,N){return w[R]=N}}function n(P,g,w,R){var N=g&&g.prototype instanceof b?g:b,I=Object.create(N.prototype),G=new H(R||[]);return c(I,"_invoke",{value:K(P,w,G)}),I}function o(P,g,w){try{return{type:"normal",arg:P.call(g,w)}}catch(R){return{type:"throw",arg:R}}}t.wrap=n;var l="suspendedStart",f="suspendedYield",v="executing",y="completed",S={};function b(){}function A(){}function q(){}var T={};a(T,_,function(){return this});var k=Object.getPrototypeOf,C=k&&k(k(z([])));C&&C!==i&&s.call(C,_)&&(T=C);var D=q.prototype=b.prototype=Object.create(T);function $(P){["next","throw","return"].forEach(function(g){a(P,g,function(w){return this._invoke(g,w)})})}function E(P,g){function w(N,I,G,Z){var V=o(P[N],P,I);if(V.type!=="throw"){var ee=V.arg,B=ee.value;return B&&u(B)=="object"&&s.call(B,"__await")?g.resolve(B.__await).then(function(se){w("next",se,G,Z)},function(se){w("throw",se,G,Z)}):g.resolve(B).then(function(se){ee.value=se,G(ee)},function(se){return w("throw",se,G,Z)})}Z(V.arg)}var R;c(this,"_invoke",{value:function(I,G){function Z(){return new g(function(V,ee){w(I,G,V,ee)})}return R=R?R.then(Z,Z):Z()}})}function K(P,g,w){var R=l;return function(N,I){if(R===v)throw Error("Generator is already running");if(R===y){if(N==="throw")throw I;return{value:r,done:!0}}for(w.method=N,w.arg=I;;){var G=w.delegate;if(G){var Z=O(G,w);if(Z){if(Z===S)continue;return Z}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(R===l)throw R=y,w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);R=v;var V=o(P,g,w);if(V.type==="normal"){if(R=w.done?y:f,V.arg===S)continue;return{value:V.arg,done:w.done}}V.type==="throw"&&(R=y,w.method="throw",w.arg=V.arg)}}}function O(P,g){var w=g.method,R=P.iterator[w];if(R===r)return g.delegate=null,w==="throw"&&P.iterator.return&&(g.method="return",g.arg=r,O(P,g),g.method==="throw")||w!=="return"&&(g.method="throw",g.arg=new TypeError("The iterator does not provide a '"+w+"' method")),S;var N=o(R,P.iterator,g.arg);if(N.type==="throw")return g.method="throw",g.arg=N.arg,g.delegate=null,S;var I=N.arg;return I?I.done?(g[P.resultName]=I.value,g.next=P.nextLoc,g.method!=="return"&&(g.method="next",g.arg=r),g.delegate=null,S):I:(g.method="throw",g.arg=new TypeError("iterator result is not an object"),g.delegate=null,S)}function x(P){var g={tryLoc:P[0]};1 in P&&(g.catchLoc=P[1]),2 in P&&(g.finallyLoc=P[2],g.afterLoc=P[3]),this.tryEntries.push(g)}function F(P){var g=P.completion||{};g.type="normal",delete g.arg,P.completion=g}function H(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(x,this),this.reset(!0)}function z(P){if(P||P===""){var g=P[_];if(g)return g.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length)){var w=-1,R=function N(){for(;++w<P.length;)if(s.call(P,w))return N.value=P[w],N.done=!1,N;return N.value=r,N.done=!0,N};return R.next=R}}throw new TypeError(u(P)+" is not iterable")}return A.prototype=q,c(D,"constructor",{value:q,configurable:!0}),c(q,"constructor",{value:A,configurable:!0}),A.displayName=a(q,h,"GeneratorFunction"),t.isGeneratorFunction=function(P){var g=typeof P=="function"&&P.constructor;return!!g&&(g===A||(g.displayName||g.name)==="GeneratorFunction")},t.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,q):(P.__proto__=q,a(P,h,"GeneratorFunction")),P.prototype=Object.create(D),P},t.awrap=function(P){return{__await:P}},$(E.prototype),a(E.prototype,m,function(){return this}),t.AsyncIterator=E,t.async=function(P,g,w,R,N){N===void 0&&(N=Promise);var I=new E(n(P,g,w,R),N);return t.isGeneratorFunction(g)?I:I.next().then(function(G){return G.done?G.value:I.next()})},$(D),a(D,h,"Generator"),a(D,_,function(){return this}),a(D,"toString",function(){return"[object Generator]"}),t.keys=function(P){var g=Object(P),w=[];for(var R in g)w.push(R);return w.reverse(),function N(){for(;w.length;){var I=w.pop();if(I in g)return N.value=I,N.done=!1,N}return N.done=!0,N}},t.values=z,H.prototype={constructor:H,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(F),!g)for(var w in this)w.charAt(0)==="t"&&s.call(this,w)&&!isNaN(+w.slice(1))&&(this[w]=r)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var w=this;function R(ee,B){return G.type="throw",G.arg=g,w.next=ee,B&&(w.method="next",w.arg=r),!!B}for(var N=this.tryEntries.length-1;N>=0;--N){var I=this.tryEntries[N],G=I.completion;if(I.tryLoc==="root")return R("end");if(I.tryLoc<=this.prev){var Z=s.call(I,"catchLoc"),V=s.call(I,"finallyLoc");if(Z&&V){if(this.prev<I.catchLoc)return R(I.catchLoc,!0);if(this.prev<I.finallyLoc)return R(I.finallyLoc)}else if(Z){if(this.prev<I.catchLoc)return R(I.catchLoc,!0)}else{if(!V)throw Error("try statement without catch or finally");if(this.prev<I.finallyLoc)return R(I.finallyLoc)}}}},abrupt:function(g,w){for(var R=this.tryEntries.length-1;R>=0;--R){var N=this.tryEntries[R];if(N.tryLoc<=this.prev&&s.call(N,"finallyLoc")&&this.prev<N.finallyLoc){var I=N;break}}I&&(g==="break"||g==="continue")&&I.tryLoc<=w&&w<=I.finallyLoc&&(I=null);var G=I?I.completion:{};return G.type=g,G.arg=w,I?(this.method="next",this.next=I.finallyLoc,S):this.complete(G)},complete:function(g,w){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&w&&(this.next=w),S},finish:function(g){for(var w=this.tryEntries.length-1;w>=0;--w){var R=this.tryEntries[w];if(R.finallyLoc===g)return this.complete(R.completion,R.afterLoc),F(R),S}},catch:function(g){for(var w=this.tryEntries.length-1;w>=0;--w){var R=this.tryEntries[w];if(R.tryLoc===g){var N=R.completion;if(N.type==="throw"){var I=N.arg;F(R)}return I}}throw Error("illegal catch attempt")},delegateYield:function(g,w,R){return this.delegate={iterator:z(g),resultName:w,nextLoc:R},this.method==="next"&&(this.arg=r),S}},t}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(Ut)),Ut.exports}var $t,Er;function oa(){if(Er)return $t;Er=1;var e=Ti()();$t=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return $t}var Lt={exports:{}},qr;function sa(){return qr||(qr=1,function(e){function u(r,t,i,s,c,p,_){try{var m=r[p](_),h=m.value}catch(a){return void i(a)}m.done?t(h):Promise.resolve(h).then(s,c)}function d(r){return function(){var t=this,i=arguments;return new Promise(function(s,c){var p=r.apply(t,i);function _(h){u(p,s,c,_,m,"next",h)}function m(h){u(p,s,c,_,m,"throw",h)}_(void 0)})}}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(Lt)),Lt.exports}var Bt={exports:{}},Tr;function je(){return Tr||(Tr=1,function(e){function u(d,r){if(!(d instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(Bt)),Bt.exports}var Wt={exports:{}},Kt={exports:{}},Qt={exports:{}},xr;function xi(){return xr||(xr=1,function(e){var u=xt().default;function d(r,t){if(u(r)!="object"||!r)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,t||"default");if(u(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(Qt)),Qt.exports}var jr;function ua(){return jr||(jr=1,function(e){var u=xt().default,d=xi();function r(t){var i=d(t,"string");return u(i)=="symbol"?i:i+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Kt)),Kt.exports}var kr;function ke(){return kr||(kr=1,function(e){var u=ua();function d(t,i){for(var s=0;s<i.length;s++){var c=i[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,u(c.key),c)}}function r(t,i,s){return i&&d(t.prototype,i),s&&d(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Wt)),Wt.exports}var be={},Ir;function ji(){if(Ir)return be;Ir=1;var e=xe();Object.defineProperty(be,"__esModule",{value:!0}),be.Configuration=void 0;var u=e(je()),d=e(ke());return be.Configuration=function(){function r(){var t,i,s,c,p,_,m,h,a,n,o,l,f,v=this,y,S,b,A,q,T,k,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,u.default)(this,r),this.server=C.server||{nodes:[{host:"localhost",port:"8108",path:"",protocol:"http"}]},this.server.cacheSearchResultsForSeconds=(t=this.server.cacheSearchResultsForSeconds)!==null&&t!==void 0?t:2*60,this.additionalSearchParameters=(i=C.additionalSearchParameters)!==null&&i!==void 0?i:{},this.additionalSearchParameters.query_by=(s=(c=this.additionalSearchParameters.queryBy)!==null&&c!==void 0?c:this.additionalSearchParameters.query_by)!==null&&s!==void 0?s:"",this.additionalSearchParameters.preset=(p=(_=this.additionalSearchParameters.preset)!==null&&_!==void 0?_:this.additionalSearchParameters.preset)!==null&&p!==void 0?p:"",this.additionalSearchParameters.sort_by=(m=(h=this.additionalSearchParameters.sortBy)!==null&&h!==void 0?h:this.additionalSearchParameters.sort_by)!==null&&m!==void 0?m:"",this.additionalSearchParameters.highlight_full_fields=(a=(n=this.additionalSearchParameters.highlightFullFields)!==null&&n!==void 0?n:this.additionalSearchParameters.highlight_full_fields)!==null&&a!==void 0?a:this.additionalSearchParameters.query_by,this.geoLocationField=(o=C.geoLocationField)!==null&&o!==void 0?o:"_geoloc",this.facetableFieldsWithSpecialCharacters=(l=C.facetableFieldsWithSpecialCharacters)!==null&&l!==void 0?l:[],this.collectionSpecificSearchParameters=(f=C.collectionSpecificSearchParameters)!==null&&f!==void 0?f:{},Object.keys(this.collectionSpecificSearchParameters).forEach(function(D){var $,E,K,O,x,F,H=v.collectionSpecificSearchParameters[D];H.query_by=($=H.queryBy)!==null&&$!==void 0?$:H.query_by,H.preset=(E=H.preset)!==null&&E!==void 0?E:H.preset,H.sort_by=(K=H.sortBy)!==null&&K!==void 0?K:H.sort_by,H.highlight_full_fields=(O=(x=(F=H.highlightFullFields)!==null&&F!==void 0?F:H.highlight_full_fields)!==null&&x!==void 0?x:v.additionalSearchParameters.highlight_full_fields)!==null&&O!==void 0?O:H.query_by,Object.keys(H).forEach(function(z){return H[z]===void 0?delete H[z]:{}})}),this.renderingContent=C.renderingContent,this.flattenGroupedHits=(y=C.flattenGroupedHits)!==null&&y!==void 0?y:!0,this.facetByOptions=(S=C.facetByOptions)!==null&&S!==void 0?S:{},this.filterByOptions=(b=C.filterByOptions)!==null&&b!==void 0?b:{},this.sortByOptions=(A=C.sortByOptions)!==null&&A!==void 0?A:{},this.collectionSpecificFacetByOptions=(q=C.collectionSpecificFacetByOptions)!==null&&q!==void 0?q:{},this.collectionSpecificFilterByOptions=(T=C.collectionSpecificFilterByOptions)!==null&&T!==void 0?T:{},this.collectionSpecificSortByOptions=(k=C.collectionSpecificSortByOptions)!==null&&k!==void 0?k:{}}return(0,d.default)(r,[{key:"validate",value:function(){if((this.additionalSearchParameters.queryBy||Object.values(this.collectionSpecificSearchParameters).some(function(i){return i.queryBy}))&&console.warn("[typesense-instantsearch-adapter] Please use snake_cased versions of parameters in additionalSearchParameters instead of camelCased parameters. For example: Use query_by instead of queryBy. camelCased parameters will be deprecated in a future version. We're making this change so that parameter names are identical to the ones sent to Typesense (which are all snake_cased), and to also keep the types for these parameters in sync with the types defined in typesense-js."),this.additionalSearchParameters.query_by.length===0&&this.additionalSearchParameters.preset.length===0&&(Object.keys(this.collectionSpecificSearchParameters).length===0||Object.values(this.collectionSpecificSearchParameters).some(function(i){return(i.query_by||"").length===0&&(i.preset||"").length===0})))throw new Error("[typesense-instantsearch-adapter] Missing parameter: One of additionalSearchParameters.query_by or additionalSearchParameters.preset needs to be set, or all collectionSpecificSearchParameters need to have either .query_by or .preset set.")}}])}(),be}var ue={},Me={},Ne={},J={},He={},De={},Mr;function oe(){if(Mr)return De;Mr=1,Object.defineProperty(De,"__esModule",{value:!0});var e=j,u=function(d){e.__extends(r,d);function r(t,i,s){var c=this.constructor,p=d.call(this,t)||this;return p.name=c.name,p.httpBody=i,p.httpStatus=s,Object.setPrototypeOf(p,c.prototype),p}return r}(Error);return De.default=u,De}var Nr;function ki(){if(Nr)return He;Nr=1,Object.defineProperty(He,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(u.default);return He.default=d,He}var Fe={},Hr;function Ii(){if(Hr)return Fe;Hr=1,Object.defineProperty(Fe,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(u.default);return Fe.default=d,Fe}var Ue={},Dr;function Mi(){if(Dr)return Ue;Dr=1,Object.defineProperty(Ue,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(u.default);return Ue.default=d,Ue}var ze={},Fr;function Ni(){if(Fr)return ze;Fr=1,Object.defineProperty(ze,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(u.default);return ze.default=d,ze}var $e={},Ur;function Hi(){if(Ur)return $e;Ur=1,Object.defineProperty($e,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(u.default);return $e.default=d,$e}var Le={},zr;function Di(){if(zr)return Le;zr=1,Object.defineProperty(Le,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(u.default);return Le.default=d,Le}var Be={},$r;function Fi(){if($r)return Be;$r=1,Object.defineProperty(Be,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(u.default);return Be.default=d,Be}var We={},Lr;function Ui(){if(Lr)return We;Lr=1,Object.defineProperty(We,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(u.default);return We.default=d,We}var Ke={},Br;function zi(){if(Br)return Ke;Br=1,Object.defineProperty(Ke,"__esModule",{value:!0});var e=j,u=e.__importDefault(oe()),d=function(r){e.__extends(t,r);function t(i,s,c){var p=r.call(this,i)||this;return p.importResults=s,p.payload=c,p}return t}(u.default);return Ke.default=d,Ke}var Wr;function Ie(){if(Wr)return J;Wr=1,Object.defineProperty(J,"__esModule",{value:!0}),J.ImportError=J.TypesenseError=J.ServerError=J.RequestUnauthorized=J.RequestMalformed=J.ObjectUnprocessable=J.ObjectNotFound=J.ObjectAlreadyExists=J.MissingConfigurationError=J.HTTPError=void 0;var e=j,u=e.__importDefault(ki());J.HTTPError=u.default;var d=e.__importDefault(Ii());J.MissingConfigurationError=d.default;var r=e.__importDefault(Mi());J.ObjectAlreadyExists=r.default;var t=e.__importDefault(Ni());J.ObjectNotFound=t.default;var i=e.__importDefault(Hi());J.ObjectUnprocessable=i.default;var s=e.__importDefault(Di());J.RequestMalformed=s.default;var c=e.__importDefault(Fi());J.RequestUnauthorized=c.default;var p=e.__importDefault(Ui());J.ServerError=p.default;var _=e.__importDefault(zi());J.ImportError=_.default;var m=e.__importDefault(oe());return J.TypesenseError=m.default,J}var Kr;function la(){if(Kr)return Ne;Kr=1,Object.defineProperty(Ne,"__esModule",{value:!0});var e=j,u=e.__importStar(Ka()),d=Ie(),r=function(){function t(i){var s=this;this.nodes=i.nodes||[],this.nodes=this.nodes.map(function(c){return s.setDefaultPathInNode(c)}).map(function(c){return s.setDefaultPortInNode(c)}).map(function(c){return e.__assign({},c)}),i.randomizeNodes==null&&(i.randomizeNodes=!0),i.randomizeNodes===!0&&this.shuffleArray(this.nodes),this.nearestNode=i.nearestNode,this.nearestNode=this.setDefaultPathInNode(this.nearestNode),this.nearestNode=this.setDefaultPortInNode(this.nearestNode),this.connectionTimeoutSeconds=i.connectionTimeoutSeconds||i.timeoutSeconds||5,this.healthcheckIntervalSeconds=i.healthcheckIntervalSeconds||60,this.numRetries=(i.numRetries!==void 0&&i.numRetries>=0?i.numRetries:this.nodes.length+(this.nearestNode==null?0:1))||3,this.retryIntervalSeconds=i.retryIntervalSeconds||.1,this.apiKey=i.apiKey,this.sendApiKeyAsQueryParam=i.sendApiKeyAsQueryParam,this.cacheSearchResultsForSeconds=i.cacheSearchResultsForSeconds||0,this.useServerSideSearchCache=i.useServerSideSearchCache||!1,this.axiosAdapter=i.axiosAdapter,this.logger=i.logger||u,this.logLevel=i.logLevel||"warn",this.logger.setLevel(this.logLevel),this.additionalHeaders=i.additionalHeaders,this.httpAgent=i.httpAgent,this.httpsAgent=i.httpsAgent,this.paramsSerializer=i.paramsSerializer,this.streamConfig=i.streamConfig,this.showDeprecationWarnings(i),this.validate()}return t.prototype.validate=function(){if(this.nodes==null||this.nodes.length===0||this.validateNodes())throw new d.MissingConfigurationError("Ensure that nodes[].protocol, nodes[].host and nodes[].port are set");if(this.nearestNode!=null&&this.isNodeMissingAnyParameters(this.nearestNode))throw new d.MissingConfigurationError("Ensure that nearestNodes.protocol, nearestNodes.host and nearestNodes.port are set");if(this.apiKey==null)throw new d.MissingConfigurationError("Ensure that apiKey is set");return!0},t.prototype.validateNodes=function(){var i=this;return this.nodes.some(function(s){return i.isNodeMissingAnyParameters(s)})},t.prototype.isNodeMissingAnyParameters=function(i){return!["protocol","host","port","path"].every(function(s){return i.hasOwnProperty(s)})&&i.url==null},t.prototype.setDefaultPathInNode=function(i){return i!=null&&!i.hasOwnProperty("path")&&(i.path=""),i},t.prototype.setDefaultPortInNode=function(i){if(i!=null&&!i.hasOwnProperty("port")&&i.hasOwnProperty("protocol"))switch(i.protocol){case"https":i.port=443;break;case"http":i.port=80;break}return i},t.prototype.showDeprecationWarnings=function(i){i.timeoutSeconds&&this.logger.warn("Deprecation warning: timeoutSeconds is now renamed to connectionTimeoutSeconds"),i.masterNode&&this.logger.warn("Deprecation warning: masterNode is now consolidated to nodes, starting with Typesense Server v0.12"),i.readReplicaNodes&&this.logger.warn("Deprecation warning: readReplicaNodes is now consolidated to nodes, starting with Typesense Server v0.12")},t.prototype.shuffleArray=function(i){for(var s,c=i.length-1;c>0;c--){var p=Math.floor(Math.random()*(c+1));s=[i[p],i[c]],i[c]=s[0],i[p]=s[1]}},t}();return Ne.default=r,Ne}var Qe={},Qr;function ca(){if(Qr)return Qe;Qr=1,Object.defineProperty(Qe,"__esModule",{value:!0});var e=j,u=e.__importDefault(Qa()),d=ur,r=ur,t=Ie(),i=e.__importDefault(oe()),s="X-TYPESENSE-API-KEY",c=!0,p=!1,_=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,m=function(){function h(a){this.configuration=a,this.apiKey=this.configuration.apiKey,this.nodes=this.configuration.nodes==null?this.configuration.nodes:JSON.parse(JSON.stringify(this.configuration.nodes)),this.nearestNode=this.configuration.nearestNode==null?this.configuration.nearestNode:JSON.parse(JSON.stringify(this.configuration.nearestNode)),this.connectionTimeoutSeconds=this.configuration.connectionTimeoutSeconds,this.healthcheckIntervalSeconds=this.configuration.healthcheckIntervalSeconds,this.numRetriesPerRequest=this.configuration.numRetries,this.retryIntervalSeconds=this.configuration.retryIntervalSeconds,this.sendApiKeyAsQueryParam=this.configuration.sendApiKeyAsQueryParam,this.additionalUserHeaders=this.configuration.additionalHeaders,this.logger=this.configuration.logger,this.initializeMetadataForNodes(),this.currentNodeIndex=-1}return h.prototype.get=function(a,n,o){n===void 0&&(n={});var l=o===void 0?{}:o,f=l.abortSignal,v=f===void 0?null:f,y=l.responseType,S=y===void 0?void 0:y;return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(b){return[2,this.performRequest("get",a,{queryParameters:n,abortSignal:v,responseType:S})]})})},h.prototype.delete=function(a,n){return n===void 0&&(n={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(o){return[2,this.performRequest("delete",a,{queryParameters:n})]})})},h.prototype.post=function(a,n,o,l){return n===void 0&&(n={}),o===void 0&&(o={}),l===void 0&&(l={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(f){return[2,this.performRequest("post",a,{queryParameters:o,bodyParameters:n,additionalHeaders:l})]})})},h.prototype.put=function(a,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(l){return[2,this.performRequest("put",a,{queryParameters:o,bodyParameters:n})]})})},h.prototype.patch=function(a,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(l){return[2,this.performRequest("patch",a,{queryParameters:o,bodyParameters:n})]})})},h.prototype.getAdapter=function(){if(this.configuration.axiosAdapter){if(typeof this.configuration.axiosAdapter=="function")return this.configuration.axiosAdapter;var a=typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers";return a?u.default.getAdapter(this.configuration.axiosAdapter).bind(globalThis):u.default.getAdapter(this.configuration.axiosAdapter)}},h.prototype.performRequest=function(a,n,o){var l,f,v,y,S=o.queryParameters,b=S===void 0?null:S,A=o.bodyParameters,q=A===void 0?null:A,T=o.additionalHeaders,k=T===void 0?{}:T,C=o.abortSignal,D=C===void 0?null:C,$=o.responseType,E=$===void 0?void 0:$,K=o.skipConnectionTimeout,O=K===void 0?!1:K,x=o.enableKeepAlive,F=x===void 0?void 0:x;return e.__awaiter(this,void 0,void 0,function(){var H,z,P,g,w,R,N,I;return e.__generator(this,function(G){switch(G.label){case 0:this.configuration.validate(),H=b?.conversation_stream===!0&&a.toLowerCase()==="get",H&&(this.logger.debug("Request: Performing streaming request to ".concat(n)),!_&&typeof fetch<"u"&&(this.logger.debug("Using fetch adapter for browser streaming"),E="stream")),z=Date.now(),g=!1,this.logger.debug("Request #".concat(z,": Performing ").concat(a.toUpperCase()," request: ").concat(n)),w=function(Z){var V,ee,B,se,kt,te,le;return e.__generator(this,function(ve){switch(ve.label){case 0:if(V=R.getNextNode(z),R.logger.debug("Request #".concat(z,": Attempting ").concat(a.toUpperCase()," request Try #").concat(Z," to Node ").concat(V.index)),D&&D.aborted)return[2,{value:Promise.reject(new Error("Request aborted by caller."))}];ee=void 0,ve.label=1;case 1:return ve.trys.push([1,3,5,6]),B={method:a,url:R.uriFor(n,V),headers:Object.assign({},R.defaultHeaders(),k,R.additionalUserHeaders),maxContentLength:1/0,maxBodyLength:1/0,validateStatus:function(ye){return ye>0},transformResponse:[function(ye,It){var dr=ye;return It!==void 0&&typeof ye=="string"&&It["content-type"]&&It["content-type"].startsWith("application/json")&&(dr=JSON.parse(ye)),dr}]},B.adapter=H&&!_?"fetch":R.getAdapter(),O!==!0&&(B.timeout=R.connectionTimeoutSeconds*1e3),b&&Object.keys(b).length!==0&&(B.params=b),R.sendApiKeyAsQueryParam&&(B.params=B.params||{},B.params["x-typesense-api-key"]=R.apiKey),R.configuration.httpAgent?(R.logger.debug("Request #".concat(z,": Using custom httpAgent")),B.httpAgent=R.configuration.httpAgent):F===!0&&(_?(R.logger.debug("Request #".concat(z,": Enabling KeepAlive")),B.httpAgent=new d.Agent({keepAlive:!0})):R.logger.warn("Request #".concat(z,": Cannot use custom httpAgent in a browser environment to enable keepAlive"))),R.configuration.httpsAgent?(R.logger.debug("Request #".concat(z,": Using custom httpsAgent")),B.httpsAgent=R.configuration.httpsAgent):F===!0&&(_?(R.logger.debug("Request #".concat(z,": Enabling keepAlive")),B.httpsAgent=new r.Agent({keepAlive:!0})):R.logger.warn("Request #".concat(z,": Cannot use custom httpAgent in a browser environment to enable keepAlive"))),R.configuration.paramsSerializer&&(R.logger.debug("Request #".concat(z,": Using custom paramsSerializer")),B.paramsSerializer=R.configuration.paramsSerializer),q&&(typeof q=="string"&&q.length!==0||typeof q=="object"&&Object.keys(q).length!==0)&&(B.data=q),D&&(se=u.default.CancelToken,kt=se.source(),ee=function(){g=!0,kt.cancel()},D.addEventListener("abort",ee),B.cancelToken=kt.token),H?(B.responseType="stream",_||(B.headers=e.__assign(e.__assign({},B.headers),{Accept:"text/event-stream"}))):E&&(B.responseType=E),[4,(0,u.default)(B)];case 2:if(te=ve.sent(),te.status>=1&&te.status<=499&&R.setNodeHealthcheck(V,c),R.logger.debug("Request #".concat(z,": Request to Node ").concat(V.index," was made. Response Code was ").concat(te.status,".")),te.status>=200&&te.status<300)return H?[2,{value:R.handleStreamingResponse(te)}]:[2,{value:Promise.resolve(te.data)}];if(te.status<500)return[2,{value:Promise.reject(R.customErrorForResponse(te,(l=te.data)===null||l===void 0?void 0:l.message,B.data))}];throw R.customErrorForResponse(te,(f=te.data)===null||f===void 0?void 0:f.message,B.data);case 3:if(le=ve.sent(),g||R.setNodeHealthcheck(V,p),P=le,R.logger.warn("Request #".concat(z,": Request to Node ").concat(V.index,' failed due to "').concat((v=le?.code)!==null&&v!==void 0?v:""," ").concat(le.message).concat(le.response==null?"":" - "+JSON.stringify((y=le.response)===null||y===void 0?void 0:y.data),'"')),g)return[2,{value:Promise.reject(new Error("Request aborted by caller."))}];if(H&&R.invokeOnErrorCallback(le),Z<R.numRetriesPerRequest+1)R.logger.warn("Request #".concat(z,": Sleeping for ").concat(R.retryIntervalSeconds,"s and then retrying request..."));else return R.logger.debug("Request #".concat(z,": No retries left. Raising last error")),[2,{value:Promise.reject(P)}];return[4,R.timer(R.retryIntervalSeconds)];case 4:return ve.sent(),[3,6];case 5:return D&&ee&&D.removeEventListener("abort",ee),[7];case 6:return[2]}})},R=this,N=1,G.label=1;case 1:return N<=this.numRetriesPerRequest+1?[5,w(N)]:[3,4];case 2:if(I=G.sent(),typeof I=="object")return[2,I.value];G.label=3;case 3:return N++,[3,1];case 4:return this.logger.debug("Request #".concat(z,": No retries left. Raising last error")),[2,Promise.reject(P)]}})})},h.prototype.processStreamingLine=function(a){if(!a.trim()||a==="data: [DONE]")return null;if(a.startsWith("data: "))return this.processDataLine(a.slice(6).trim());if(a.trim().startsWith("{"))try{var n=JSON.parse(a.trim());return n&&typeof n=="object"?(n.conversation_id||(n.conversation_id="unknown"),!n.message&&n.message!==""&&(n.message=""),n):{conversation_id:"unknown",message:JSON.stringify(n)}}catch{return{conversation_id:"unknown",message:a.trim()}}return{conversation_id:"unknown",message:a.trim()}},h.prototype.processDataLine=function(a){if(!a)return null;if(a.startsWith("{"))try{var n=JSON.parse(a);return n&&typeof n=="object"?(n.conversation_id||(n.conversation_id="unknown"),!n.message&&n.message!==""&&(n.message=""),n):{conversation_id:"unknown",message:JSON.stringify(n)}}catch{return{conversation_id:"unknown",message:a}}return{conversation_id:"unknown",message:a}},h.prototype.handleStreamingResponse=function(a){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(n){return this.logger.debug("Handling streaming response. Environment: ".concat(_?"Node.js":"Browser")),_&&a.data?[2,this.handleNodeStreaming(a)]:_?(this.logger.debug("Processing non-streaming response"),this.invokeOnCompleteCallback(a.data),[2,Promise.resolve(a.data)]):[2,this.handleBrowserStreaming(a)]})})},h.prototype.handleNodeStreaming=function(a){var n=this;return this.logger.debug("Processing Node.js stream"),new Promise(function(o,l){var f=a.data,v=[],y="";f.on("data",function(S){var b;try{var A=S.toString();y+=A;var q=y.split(`
`);y=(b=q.pop())!==null&&b!==void 0?b:"",n.processStreamLines(q,v)}catch(T){l(T)}}),f.on("end",function(){if(y.trim().length>0){var S=y.split(`
`);n.processStreamLines(S,v)}n.finalizeStreamResult(v,o,a)}),f.on("error",function(S){n.logger.error("Stream error: ".concat(S)),n.invokeOnErrorCallback(S),l(S)})})},h.prototype.handleBrowserStreaming=function(a){var n=this;return this.logger.debug("Processing browser stream"),new Promise(function(o,l){return e.__awaiter(n,void 0,void 0,function(){return e.__generator(this,function(f){try{return a.data&&typeof a.data.getReader=="function"?[2,this.handleBrowserReadableStream(a.data,o,l,a)]:typeof a.data=="string"?[2,this.handleBrowserStringResponse(a.data,o,a)]:typeof a.data=="object"&&a.data!==null?(this.logger.debug("No stream found, but data object is available"),this.invokeOnCompleteCallback(a.data),[2,o(a.data)]):(this.logger.error("No usable data found in response"),[2,l(new Error("No usable data found in response"))])}catch(v){this.logger.error("Error processing streaming response: ".concat(v)),this.invokeOnErrorCallback(v),l(v)}return[2]})})})},h.prototype.handleBrowserReadableStream=function(a,n,o,l){return e.__awaiter(this,void 0,void 0,function(){var f,v,y,S,b,A,q,T,k,C;return e.__generator(this,function(D){switch(D.label){case 0:this.logger.debug("Found ReadableStream in response.data"),f=a.getReader(),v=[],y="",D.label=1;case 1:D.trys.push([1,5,,6]),D.label=2;case 2:return[4,f.read()];case 3:return S=D.sent(),b=S.done,A=S.value,b?(this.logger.debug("Stream reading complete"),y.trim()&&(q=y.split(`
`),this.processStreamLines(q,v)),[3,4]):(T=new TextDecoder().decode(A),this.logger.debug("Received chunk: ".concat(T.length," bytes")),y+=T,k=y.split(`
`),y=k.pop()||"",this.processStreamLines(k,v),[3,2]);case 4:return this.finalizeStreamResult(v,n,l),[3,6];case 5:return C=D.sent(),o(C),[3,6];case 6:return[2]}})})},h.prototype.handleBrowserStringResponse=function(a,n,o){this.logger.debug("Processing text response as stream data");var l=[],f=a.split(`
`);if(this.processStreamLines(f,l),l.length>0){var v=this.combineStreamingChunks(l);this.invokeOnCompleteCallback(v),n(v)}else this.logger.debug("No chunks processed, returning original API response"),this.invokeOnCompleteCallback(o.data),n(o.data)},h.prototype.processStreamLines=function(a,n){for(var o=0,l=a;o<l.length;o++){var f=l[o];if(f.trim()&&f!=="data: [DONE]"){var v=this.processStreamingLine(f);v!==null&&(this.invokeOnChunkCallback(v),n.push(v))}}},h.prototype.finalizeStreamResult=function(a,n,o){if(a.length>0){var l=this.combineStreamingChunks(a);this.logger.debug("Stream processing complete"),this.invokeOnCompleteCallback(l),n(l)}else this.logger.debug("No chunks processed, returning original API response"),this.invokeOnCompleteCallback(o.data),n(o.data)},h.prototype.combineStreamingChunks=function(a){if(a.length===0)return{};if(a.length===1)return a[0];var n=this.getMessageChunks(a);if(n.length>0)return this.combineMessageChunks(a,n);var o=a[a.length-1];return this.isCompleteSearchResponse(o)?o:this.attemptChunksMerge(a,o)},h.prototype.getMessageChunks=function(a){return a.filter(function(n){return typeof n=="object"&&n!==null&&"message"in n})},h.prototype.combineMessageChunks=function(a,n){this.logger.debug("Found ".concat(n.length," message chunks to combine"));var o=a[a.length-1];if(typeof o=="object"&&o!==null&&("hits"in o||"found"in o))return this.logger.debug("Last chunk appears to be a complete search response"),o;var l=n.map(function(v){return v.message}).join(""),f=a.find(function(v){return typeof v=="object"&&v!==null&&("hits"in v||"found"in v||"request_params"in v)});return f?e.__assign(e.__assign({},f),{message:l}):{message:l}},h.prototype.isCompleteSearchResponse=function(a){return typeof a=="object"&&a!==null&&Object.keys(a).length>0?"found"in a||"hits"in a||"page"in a||"search_time_ms"in a:!1},h.prototype.attemptChunksMerge=function(a,n){try{for(var o={},l=0,f=a;l<f.length;l++){var v=f[l];typeof v=="object"&&v!==null&&(o=e.__assign(e.__assign({},o),v))}if(Object.keys(o).length>0)return o}catch(y){this.logger.warn("Failed to merge chunks: ".concat(y))}return n},h.prototype.getNextNode=function(a){if(a===void 0&&(a=0),this.nearestNode!=null){if(this.logger.debug("Request #".concat(a,": Nodes Health: Node ").concat(this.nearestNode.index," is ").concat(this.nearestNode.isHealthy===!0?"Healthy":"Unhealthy")),this.nearestNode.isHealthy===!0||this.nodeDueForHealthcheck(this.nearestNode,a))return this.logger.debug("Request #".concat(a,": Updated current node to Node ").concat(this.nearestNode.index)),this.nearestNode;this.logger.debug("Request #".concat(a,": Falling back to individual nodes"))}this.logger.debug("Request #".concat(a,": Nodes Health: ").concat(this.nodes.map(function(l){return"Node ".concat(l.index," is ").concat(l.isHealthy===!0?"Healthy":"Unhealthy")}).join(" || ")));for(var n=this.nodes[0],o=0;o<=this.nodes.length;o++)if(this.currentNodeIndex=(this.currentNodeIndex+1)%this.nodes.length,n=this.nodes[this.currentNodeIndex],n.isHealthy===!0||this.nodeDueForHealthcheck(n,a))return this.logger.debug("Request #".concat(a,": Updated current node to Node ").concat(n.index)),n;return this.logger.debug("Request #".concat(a,": No healthy nodes were found. Returning the next node, Node ").concat(n.index)),n},h.prototype.nodeDueForHealthcheck=function(a,n){n===void 0&&(n=0);var o=Date.now()-a.lastAccessTimestamp>this.healthcheckIntervalSeconds*1e3;return o&&this.logger.debug("Request #".concat(n,": Node ").concat(a.index," has exceeded healtcheckIntervalSeconds of ").concat(this.healthcheckIntervalSeconds,". Adding it back into rotation.")),o},h.prototype.initializeMetadataForNodes=function(){var a=this;this.nearestNode!=null&&(this.nearestNode.index="nearestNode",this.setNodeHealthcheck(this.nearestNode,c)),this.nodes.forEach(function(n,o){n.index=o,a.setNodeHealthcheck(n,c)})},h.prototype.setNodeHealthcheck=function(a,n){a.isHealthy=n,a.lastAccessTimestamp=Date.now()},h.prototype.uriFor=function(a,n){return n.url!=null?"".concat(n.url).concat(a):"".concat(n.protocol,"://").concat(n.host,":").concat(n.port).concat(n.path).concat(a)},h.prototype.defaultHeaders=function(){var a={};return this.sendApiKeyAsQueryParam||(a[s]=this.apiKey),a["Content-Type"]="application/json",a},h.prototype.timer=function(a){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(n){return[2,new Promise(function(o){return setTimeout(o,a*1e3)})]})})},h.prototype.customErrorForResponse=function(a,n,o){var l="Request failed with HTTP code ".concat(a.status);typeof n=="string"&&n.trim()!==""&&(l+=" | Server said: ".concat(n));var f=new i.default(l,o,a.status);return a.status===400?f=new t.RequestMalformed(l):a.status===401?f=new t.RequestUnauthorized(l):a.status===404?f=new t.ObjectNotFound(l):a.status===409?f=new t.ObjectAlreadyExists(l):a.status===422?f=new t.ObjectUnprocessable(l):a.status>=500&&a.status<=599?f=new t.ServerError(l):f=new t.HTTPError(l),f},h.prototype.invokeOnChunkCallback=function(a){var n;if(!((n=this.configuration.streamConfig)===null||n===void 0)&&n.onChunk)try{this.configuration.streamConfig.onChunk(a)}catch(o){this.logger.warn("Error in onChunk callback: ".concat(o))}},h.prototype.invokeOnCompleteCallback=function(a){var n;if(!((n=this.configuration.streamConfig)===null||n===void 0)&&n.onComplete)try{this.configuration.streamConfig.onComplete(a)}catch(o){this.logger.warn("Error in onComplete callback: ".concat(o))}},h.prototype.invokeOnErrorCallback=function(a){var n;if(!((n=this.configuration.streamConfig)===null||n===void 0)&&n.onError){var o=a instanceof Error?a:new Error(String(a));try{this.configuration.streamConfig.onError(o)}catch(l){this.logger.warn("Error in onError callback: ".concat(l))}}},h}();return Qe.default=m,Qe}var Ge={},Gr;function he(){if(Gr)return Ge;Gr=1,Object.defineProperty(Ge,"__esModule",{value:!0});var e=j,u="/collections",d=function(){function r(t){this.apiCall=t}return r.prototype.create=function(t,i){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.apiCall.post(u,t,i)]})})},r.prototype.retrieve=function(t){return t===void 0&&(t={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.get(u,t)]})})},Object.defineProperty(r,"RESOURCEPATH",{get:function(){return u},enumerable:!1,configurable:!0}),r}();return Ge.default=d,Ge}var Je={},Ve={},Se={},Xe={},Jr;function da(){if(Jr)return Xe;Jr=1,Object.defineProperty(Xe,"__esModule",{value:!0});var e=j,u=2*60,d=100,r=function(){function t(){this.responseCache=new Map,this.responsePromiseCache=new Map}return t.prototype.clearCache=function(){this.responseCache=new Map,this.responsePromiseCache=new Map},t.prototype.perform=function(i,s,c,p){return e.__awaiter(this,void 0,void 0,function(){var _,m,h,a,n,o,l,f,y,v,y,S,b,A,T,q,T;return e.__generator(this,function(k){switch(k.label){case 0:if(_=p.cacheResponseForSeconds,m=_===void 0?u:_,h=p.maxSize,a=h===void 0?d:h,n=m<=0||a<=0,n)return[2,s.call.apply(s,e.__spreadArray([i],c,!1))];if(o=JSON.stringify(c),l=this.responseCache.get(o),f=Date.now(),l){if(y=f-l.requestTimestamp<m*1e3,y)return this.responseCache.delete(o),this.responseCache.set(o,l),[2,Promise.resolve(l.response)];this.responseCache.delete(o)}if(v=this.responsePromiseCache.get(o),v){if(y=f-v.requestTimestamp<m*1e3,y)return this.responsePromiseCache.delete(o),this.responsePromiseCache.set(o,v),[2,v.responsePromise];this.responsePromiseCache.delete(o)}return S=s.call.apply(s,e.__spreadArray([i],c,!1)),this.responsePromiseCache.set(o,{requestTimestamp:f,responsePromise:S}),[4,S];case 1:return b=k.sent(),this.responseCache.set(o,{requestTimestamp:f,response:b}),A=this.responseCache.size>a,A&&(T=this.responseCache.keys().next().value,T&&this.responseCache.delete(T)),q=this.responsePromiseCache.size>a,q&&(T=this.responsePromiseCache.keys().next().value,T&&this.responsePromiseCache.delete(T)),[2,b]}})})},t}();return Xe.default=r,Xe}var Ce={},Re={},Vr;function $i(){return Vr||(Vr=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.arrayableParams=void 0,Re.arrayableParams={query_by:"query_by",query_by_weights:"query_by_weights",facet_by:"facet_by",group_by:"group_by",include_fields:"include_fields",exclude_fields:"exclude_fields",highlight_fields:"highlight_fields",highlight_full_fields:"highlight_full_fields",pinned_hits:"pinned_hits",hidden_hits:"hidden_hits",infix:"infix",override_tags:"override_tags",num_typos:"num_typos",prefix:"prefix",sort_by:"sort_by"}),Re}var Xr;function jt(){if(Xr)return Ce;Xr=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.normalizeArrayableParams=void 0;var e=j,u=$i();function d(i){return Object.keys(u.arrayableParams).filter(function(s){return i[s]!==void 0}).every(function(s){return t(i[s])})}function r(i){var s=e.__assign({},i),c=Object.keys(u.arrayableParams).filter(function(p){return Array.isArray(s[p])}).map(function(p){return s[p]=s[p].join(","),p});if(!c.length&&d(s))return s;if(!d(s))throw new Error("Failed to normalize arrayable params: ".concat(JSON.stringify(s)));return s}Ce.normalizeArrayableParams=r;function t(i){return!Array.isArray(i)}return Ce}var Yr;function fa(){if(Yr)return Se;Yr=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.SearchOnlyDocuments=void 0;var e=j,u=e.__importDefault(da()),d=e.__importDefault(he()),r=jt(),t="/documents",i=function(){function s(c,p,_){this.collectionName=c,this.apiCall=p,this.configuration=_,this.requestWithCache=new u.default}return s.prototype.clearCache=function(){this.requestWithCache.clearCache()},s.prototype.search=function(c,p){var _=p===void 0?{}:p,m=_.cacheSearchResultsForSeconds,h=m===void 0?this.configuration.cacheSearchResultsForSeconds:m,a=_.abortSignal,n=a===void 0?null:a;return e.__awaiter(this,void 0,void 0,function(){var o,l,f;return e.__generator(this,function(v){return o={},this.configuration.useServerSideSearchCache===!0&&(o.use_cache=!0),l=(0,r.normalizeArrayableParams)(c),f=Object.assign({},o,l),[2,this.requestWithCache.perform(this.apiCall,this.apiCall.get,[this.endpointPath("search"),f,{abortSignal:n}],{cacheResponseForSeconds:h})]})})},s.prototype.endpointPath=function(c){return"".concat(d.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.collectionName)).concat(t).concat(c===void 0?"":"/"+c)},Object.defineProperty(s,"RESOURCEPATH",{get:function(){return t},enumerable:!1,configurable:!0}),s}();return Se.SearchOnlyDocuments=i,Se}var Zr;function ha(){if(Zr)return Ve;Zr=1,Object.defineProperty(Ve,"__esModule",{value:!0});var e=j,u=Ie(),d=fa(),r=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,t=function(s){e.__extends(c,s);function c(p,_,m){return s.call(this,p,_,m)||this}return c.prototype.create=function(p,_){return _===void 0&&(_={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(m){if(!p)throw new Error("No document provided");return[2,this.apiCall.post(this.endpointPath(),p,_)]})})},c.prototype.upsert=function(p,_){return _===void 0&&(_={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(m){if(!p)throw new Error("No document provided");return[2,this.apiCall.post(this.endpointPath(),p,Object.assign({},_,{action:"upsert"}))]})})},c.prototype.update=function(p,_){return _===void 0&&(_={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(m){if(!p)throw new Error("No document provided");return _.filter_by!=null?[2,this.apiCall.patch(this.endpointPath(),p,Object.assign({},_))]:[2,this.apiCall.post(this.endpointPath(),p,Object.assign({},_,{action:"update"}))]})})},c.prototype.delete=function(p){return p===void 0&&(p={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(_){return[2,this.apiCall.delete(this.endpointPath(),p)]})})},c.prototype.createMany=function(p,_){return _===void 0&&(_={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(m){return this.configuration.logger.warn("createMany is deprecated and will be removed in a future version. Use import instead, which now takes both an array of documents or a JSONL string of documents"),[2,this.import(p,_)]})})},c.prototype.import=function(p,_){return _===void 0&&(_={}),e.__awaiter(this,void 0,void 0,function(){var m,h,a,n;return e.__generator(this,function(o){switch(o.label){case 0:if(Array.isArray(p)){if(p.length===0)throw new u.RequestMalformed("No documents provided");try{m=p.map(function(l){return JSON.stringify(l)}).join(`
`)}catch(l){throw l instanceof RangeError&&l.message.includes("Too many properties to enumerate")?new Error("".concat(l,`
          It looks like you have reached a Node.js limit that restricts the number of keys in an Object: https://stackoverflow.com/questions/9282869/are-there-limits-to-the-number-of-properties-in-a-javascript-object

         Please try reducing the number of keys in your document, or using CURL to import your data.
          `)):new Error(l)}}else if(m=p,i(m))throw new u.RequestMalformed("No documents provided");return[4,this.apiCall.performRequest("post",this.endpointPath("import"),{queryParameters:_,bodyParameters:m,additionalHeaders:{"Content-Type":"text/plain"},skipConnectionTimeout:!0,enableKeepAlive:!!r})];case 1:if(h=o.sent(),Array.isArray(p)){if(a=h.split(`
`).map(function(l){return JSON.parse(l)}),n=a.filter(function(l){return l.success===!1}),n.length>0)throw new u.ImportError("".concat(a.length-n.length," documents imported successfully, ").concat(n.length," documents failed during import. Use `error.importResults` from the raised exception to get a detailed error reason for each document."),a,{documentsInJSONLFormat:m,options:_,failedItems:n,successCount:a.length-n.length});return[2,a]}else return[2,h]}})})},c.prototype.importStream=function(p,_){return _===void 0&&(_={}),e.__awaiter(this,void 0,void 0,function(){var m,h,a;return e.__generator(this,function(n){switch(n.label){case 0:return[4,this.apiCall.performRequest("post",this.endpointPath("import"),{queryParameters:_,bodyParameters:p,additionalHeaders:{"Content-Type":"text/plain"},skipConnectionTimeout:!0,enableKeepAlive:!!r})];case 1:if(m=n.sent(),h=m.split(`
`).map(function(o){return JSON.parse(o)}),a=h.filter(function(o){return o.success===!1}),a.length>0)throw new u.ImportError("".concat(h.length-a.length," documents imported successfully, ").concat(a.length," documents failed during import. Use `error.importResults` from the raised exception to get a detailed error reason for each document."),h,{documentsInJSONLFormat:p,options:_,failedItems:a,successCount:h.length-a.length});return[2,h]}})})},c.prototype.export=function(p){return p===void 0&&(p={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(_){return[2,this.apiCall.get(this.endpointPath("export"),p)]})})},c.prototype.exportStream=function(p){return p===void 0&&(p={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(_){return[2,this.apiCall.get(this.endpointPath("export"),p,{responseType:"stream"})]})})},c}(d.SearchOnlyDocuments);Ve.default=t;function i(s){return s==null||s===""||s.length===0}return Ve}var Ye={},en;function pa(){if(en)return Ye;en=1,Object.defineProperty(Ye,"__esModule",{value:!0});var e=j,u=e.__importDefault(he()),d="/overrides",r=function(){function t(i,s){this.collectionName=i,this.apiCall=s}return t.prototype.upsert=function(i,s){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(c){return[2,this.apiCall.put(this.endpointPath(i),s)]})})},t.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},t.prototype.endpointPath=function(i){return"".concat(u.default.RESOURCEPATH,"/").concat(this.collectionName).concat(t.RESOURCEPATH).concat(i===void 0?"":"/"+encodeURIComponent(i))},Object.defineProperty(t,"RESOURCEPATH",{get:function(){return d},enumerable:!1,configurable:!0}),t}();return Ye.default=r,Ye}var Ze={},tn;function Li(){if(tn)return Ze;tn=1,Object.defineProperty(Ze,"__esModule",{value:!0});var e=j,u=e.__importDefault(he()),d=e.__importDefault(pa()),r=function(){function t(i,s,c){this.collectionName=i,this.overrideId=s,this.apiCall=c}return t.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},t.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.delete(this.endpointPath())]})})},t.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.collectionName)).concat(d.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.overrideId))},t}();return Ze.default=r,Ze}var et={},rn;function va(){if(rn)return et;rn=1,Object.defineProperty(et,"__esModule",{value:!0});var e=j,u=e.__importDefault(he()),d="/synonyms",r=function(){function t(i,s){this.collectionName=i,this.apiCall=s}return t.prototype.upsert=function(i,s){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(c){return[2,this.apiCall.put(this.endpointPath(i),s)]})})},t.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},t.prototype.endpointPath=function(i){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.collectionName)).concat(t.RESOURCEPATH).concat(i===void 0?"":"/"+encodeURIComponent(i))},Object.defineProperty(t,"RESOURCEPATH",{get:function(){return d},enumerable:!1,configurable:!0}),t}();return et.default=r,et}var tt={},nn;function Bi(){if(nn)return tt;nn=1,Object.defineProperty(tt,"__esModule",{value:!0});var e=j,u=e.__importDefault(he()),d=e.__importDefault(va()),r=function(){function t(i,s,c){this.collectionName=i,this.synonymId=s,this.apiCall=c}return t.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},t.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.delete(this.endpointPath())]})})},t.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.collectionName)).concat(d.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.synonymId))},t}();return tt.default=r,tt}var Pe={},an;function Wi(){if(an)return Pe;an=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.Document=void 0;var e=j,u=e.__importDefault(he()),d=e.__importDefault(ha()),r=function(){function t(i,s,c){this.collectionName=i,this.documentId=s,this.apiCall=c}return t.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},t.prototype.delete=function(i){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.apiCall.delete(this.endpointPath(),i)]})})},t.prototype.update=function(i,s){return s===void 0&&(s={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(c){return[2,this.apiCall.patch(this.endpointPath(),i,s)]})})},t.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.collectionName)).concat(d.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.documentId))},t}();return Pe.Document=r,Pe}var on;function Ki(){if(on)return Je;on=1,Object.defineProperty(Je,"__esModule",{value:!0});var e=j,u=e.__importDefault(he()),d=e.__importDefault(ha()),r=Ie(),t=e.__importDefault(pa()),i=e.__importDefault(Li()),s=e.__importDefault(va()),c=e.__importDefault(Bi()),p=Wi(),_=function(){function m(h,a,n){this.name=h,this.apiCall=a,this.configuration=n,this.individualDocuments={},this.individualOverrides={},this.individualSynonyms={},this.name=h,this.apiCall=a,this.configuration=n,this._documents=new d.default(this.name,this.apiCall,this.configuration),this._overrides=new t.default(this.name,this.apiCall),this._synonyms=new s.default(this.name,this.apiCall)}return m.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(h){return[2,this.apiCall.get(this.endpointPath())]})})},m.prototype.update=function(h){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2,this.apiCall.patch(this.endpointPath(),h)]})})},m.prototype.delete=function(h){return h===void 0&&(h={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2,this.apiCall.delete(this.endpointPath(),h)]})})},m.prototype.exists=function(){return e.__awaiter(this,void 0,void 0,function(){var h;return e.__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.retrieve()];case 1:return a.sent(),[2,!0];case 2:if(h=a.sent(),h instanceof r.ObjectNotFound)return[2,!1];throw h;case 3:return[2]}})})},m.prototype.documents=function(h){return h?(this.individualDocuments[h]===void 0&&(this.individualDocuments[h]=new p.Document(this.name,h,this.apiCall)),this.individualDocuments[h]):this._documents},m.prototype.overrides=function(h){return h===void 0?this._overrides:(this.individualOverrides[h]===void 0&&(this.individualOverrides[h]=new i.default(this.name,h,this.apiCall)),this.individualOverrides[h])},m.prototype.synonyms=function(h){return h===void 0?this._synonyms:(this.individualSynonyms[h]===void 0&&(this.individualSynonyms[h]=new c.default(this.name,h,this.apiCall)),this.individualSynonyms[h])},m.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.name))},m}();return Je.default=_,Je}var rt={},sn;function _a(){if(sn)return rt;sn=1,Object.defineProperty(rt,"__esModule",{value:!0});var e=j,u="/aliases",d=function(){function r(t){this.apiCall=t}return r.prototype.upsert=function(t,i){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.apiCall.put(this.endpointPath(t),i)]})})},r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(u)]})})},r.prototype.endpointPath=function(t){return"".concat(r.RESOURCEPATH,"/").concat(encodeURIComponent(t))},Object.defineProperty(r,"RESOURCEPATH",{get:function(){return u},enumerable:!1,configurable:!0}),r}();return rt.default=d,rt}var nt={},un;function Qi(){if(un)return nt;un=1,Object.defineProperty(nt,"__esModule",{value:!0});var e=j,u=e.__importDefault(_a()),d=function(){function r(t,i){this.name=t,this.apiCall=i}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.delete(this.endpointPath())]})})},r.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.name))},r}();return nt.default=d,nt}var at={},ln;function ma(){if(ln)return at;ln=1,Object.defineProperty(at,"__esModule",{value:!0});var e=j,u=ur,d=jt(),r="/keys",t=function(){function i(s){this.apiCall=s,this.apiCall=s}return i.prototype.create=function(s){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(c){return[2,this.apiCall.post(i.RESOURCEPATH,s)]})})},i.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.apiCall.get(r)]})})},i.prototype.generateScopedSearchKey=function(s,c){var p=(0,d.normalizeArrayableParams)(c),_=JSON.stringify(p),m=Buffer.from((0,u.createHmac)("sha256",s).update(_).digest("base64")),h=s.substr(0,4),a="".concat(m).concat(h).concat(_);return Buffer.from(a).toString("base64")},Object.defineProperty(i,"RESOURCEPATH",{get:function(){return r},enumerable:!1,configurable:!0}),i}();return at.default=t,at}var it={},cn;function Gi(){if(cn)return it;cn=1,Object.defineProperty(it,"__esModule",{value:!0});var e=j,u=e.__importDefault(ma()),d=function(){function r(t,i){this.id=t,this.apiCall=i}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.delete(this.endpointPath())]})})},r.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.id))},r}();return it.default=d,it}var ot={},dn;function Ji(){if(dn)return ot;dn=1,Object.defineProperty(ot,"__esModule",{value:!0});var e=j,u="/debug",d=function(){function r(t){this.apiCall=t}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(u)]})})},r}();return ot.default=d,ot}var st={},fn;function Vi(){if(fn)return st;fn=1,Object.defineProperty(st,"__esModule",{value:!0});var e=j,u="/metrics.json",d=function(){function r(t){this.apiCall=t}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(u)]})})},r}();return st.default=d,st}var ut={},hn;function Xi(){if(hn)return ut;hn=1,Object.defineProperty(ut,"__esModule",{value:!0});var e=j,u="/stats.json",d=function(){function r(t){this.apiCall=t}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(u)]})})},r}();return ut.default=d,ut}var lt={},pn;function Yi(){if(pn)return lt;pn=1,Object.defineProperty(lt,"__esModule",{value:!0});var e=j,u="/health",d=function(){function r(t){this.apiCall=t}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(u)]})})},r}();return lt.default=d,lt}var ct={},vn;function Zi(){if(vn)return ct;vn=1,Object.defineProperty(ct,"__esModule",{value:!0});var e=j,u="/operations",d=function(){function r(t){this.apiCall=t}return r.prototype.perform=function(t,i){return i===void 0&&(i={}),e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.apiCall.post("".concat(u,"/").concat(t),{},i)]})})},r}();return ct.default=d,ct}var dt={},_n;function ya(){if(_n)return dt;_n=1,Object.defineProperty(dt,"__esModule",{value:!0});var e=j,u=e.__importDefault(da()),d=jt(),r="/multi_search",t=function(){function i(s,c,p){p===void 0&&(p=!1),this.apiCall=s,this.configuration=c,this.useTextContentType=p,this.requestWithCache=new u.default}return i.prototype.clearCache=function(){this.requestWithCache.clearCache()},i.prototype.perform=function(s,c,p){c===void 0&&(c={});var _=p===void 0?{}:p,m=_.cacheSearchResultsForSeconds,h=m===void 0?this.configuration.cacheSearchResultsForSeconds:m;return e.__awaiter(this,void 0,void 0,function(){var a,n,o,l,f;return e.__generator(this,function(v){return a={},this.useTextContentType&&(a["content-type"]="text/plain"),n={},this.configuration.useServerSideSearchCache===!0&&(n.use_cache=!0),o=e.__assign(e.__assign({},c),n),l=e.__assign(e.__assign({},s),{searches:s.searches.map(d.normalizeArrayableParams)}),f=(0,d.normalizeArrayableParams)(o),[2,this.requestWithCache.perform(this.apiCall,this.apiCall.post,[r,l,f,a],{cacheResponseForSeconds:h})]})})},i}();return dt.default=t,dt}var ft={},mn;function ga(){if(mn)return ft;mn=1,Object.defineProperty(ft,"__esModule",{value:!0});var e=j,u=jt(),d="/presets",r=function(){function t(i){this.apiCall=i}return t.prototype.upsert=function(i,s){return e.__awaiter(this,void 0,void 0,function(){var c,p;return e.__generator(this,function(_){return typeof s.value=="object"&&"searches"in s.value?(c=s.value.searches.map(function(m){return(0,u.normalizeArrayableParams)(m)}),[2,this.apiCall.put(this.endpointPath(i),{value:{searches:c}})]):(p=(0,u.normalizeArrayableParams)(s.value),[2,this.apiCall.put(this.endpointPath(i),{value:p})])})})},t.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},t.prototype.endpointPath=function(i){return"".concat(t.RESOURCEPATH).concat(i===void 0?"":"/"+encodeURIComponent(i))},Object.defineProperty(t,"RESOURCEPATH",{get:function(){return d},enumerable:!1,configurable:!0}),t}();return ft.default=r,ft}var ht={},yn;function eo(){if(yn)return ht;yn=1,Object.defineProperty(ht,"__esModule",{value:!0});var e=j,u=e.__importDefault(ga()),d=function(){function r(t,i){this.presetId=t,this.apiCall=i}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.delete(this.endpointPath())]})})},r.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.presetId))},r}();return ht.default=d,ht}var pt={},vt={},gn;function ba(){if(gn)return vt;gn=1,Object.defineProperty(vt,"__esModule",{value:!0});var e=j,u="/analytics/rules",d=function(){function r(t){this.apiCall=t,this.apiCall=t}return r.prototype.upsert=function(t,i){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.apiCall.put(this.endpointPath(t),i)]})})},r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.endpointPath=function(t){return"".concat(r.RESOURCEPATH).concat(t===void 0?"":"/"+encodeURIComponent(t))},Object.defineProperty(r,"RESOURCEPATH",{get:function(){return u},enumerable:!1,configurable:!0}),r}();return vt.default=d,vt}var _t={},bn;function to(){if(bn)return _t;bn=1,Object.defineProperty(_t,"__esModule",{value:!0});var e=j,u=e.__importDefault(ba()),d=function(){function r(t,i){this.name=t,this.apiCall=i}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.delete(this.endpointPath())]})})},r.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.name))},r}();return _t.default=d,_t}var mt={},Sn;function ro(){if(Sn)return mt;Sn=1,Object.defineProperty(mt,"__esModule",{value:!0});var e=j,u="/analytics/events",d=function(){function r(t){this.apiCall=t,this.apiCall=t}return r.prototype.create=function(t){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.post(this.endpointPath(),t)]})})},r.prototype.endpointPath=function(t){return"".concat(r.RESOURCEPATH).concat(t===void 0?"":"/"+encodeURIComponent(t))},Object.defineProperty(r,"RESOURCEPATH",{get:function(){return u},enumerable:!1,configurable:!0}),r}();return mt.default=d,mt}var Cn;function no(){if(Cn)return pt;Cn=1,Object.defineProperty(pt,"__esModule",{value:!0});var e=j,u=e.__importDefault(ba()),d=e.__importDefault(to()),r=e.__importDefault(ro()),t="/analytics",i=function(){function s(c){this.apiCall=c,this.individualAnalyticsRules={},this.apiCall=c,this._analyticsRules=new u.default(this.apiCall),this._analyticsEvents=new r.default(this.apiCall)}return s.prototype.rules=function(c){return c===void 0?this._analyticsRules:(this.individualAnalyticsRules[c]===void 0&&(this.individualAnalyticsRules[c]=new d.default(c,this.apiCall)),this.individualAnalyticsRules[c])},s.prototype.events=function(){return this._analyticsEvents},Object.defineProperty(s,"RESOURCEPATH",{get:function(){return t},enumerable:!1,configurable:!0}),s}();return pt.default=i,pt}var yt={},Rn;function Sa(){if(Rn)return yt;Rn=1,Object.defineProperty(yt,"__esModule",{value:!0});var e=j,u="/stopwords",d=function(){function r(t){this.apiCall=t}return r.prototype.upsert=function(t,i){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.apiCall.put(this.endpointPath(t),i)]})})},r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.endpointPath=function(t){return"".concat(r.RESOURCEPATH).concat(t===void 0?"":"/"+encodeURIComponent(t))},Object.defineProperty(r,"RESOURCEPATH",{get:function(){return u},enumerable:!1,configurable:!0}),r}();return yt.default=d,yt}var gt={},Pn;function ao(){if(Pn)return gt;Pn=1,Object.defineProperty(gt,"__esModule",{value:!0});var e=j,u=e.__importDefault(Sa()),d=function(){function r(t,i){this.stopwordId=t,this.apiCall=i}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.delete(this.endpointPath())]})})},r.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.stopwordId))},r}();return gt.default=d,gt}var bt={},St={},wn;function Ca(){if(wn)return St;wn=1,Object.defineProperty(St,"__esModule",{value:!0});var e=j,u="/conversations/models",d=function(){function r(t){this.apiCall=t,this.apiCall=t}return r.prototype.create=function(t){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.post(this.endpointPath(),t)]})})},r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.endpointPath=function(t){return"".concat(r.RESOURCEPATH).concat(t===void 0?"":"/"+encodeURIComponent(t))},Object.defineProperty(r,"RESOURCEPATH",{get:function(){return u},enumerable:!1,configurable:!0}),r}();return St.default=d,St}var Ct={},On;function io(){if(On)return Ct;On=1,Object.defineProperty(Ct,"__esModule",{value:!0});var e=j,u=e.__importDefault(Ca()),d=function(){function r(t,i){this.id=t,this.apiCall=i}return r.prototype.update=function(t){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.put(this.endpointPath(),t)]})})},r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.delete(this.endpointPath())]})})},r.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.id))},r}();return Ct.default=d,Ct}var An;function Ra(){if(An)return bt;An=1,Object.defineProperty(bt,"__esModule",{value:!0});var e=j,u=e.__importDefault(Ca()),d=e.__importDefault(io()),r="/conversations",t=function(){function i(s){this.apiCall=s,this.individualConversationModels={},this.apiCall=s,this._conversationsModels=new u.default(this.apiCall)}return i.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.apiCall.get(r)]})})},i.prototype.models=function(s){return s===void 0?this._conversationsModels:(this.individualConversationModels[s]===void 0&&(this.individualConversationModels[s]=new d.default(s,this.apiCall)),this.individualConversationModels[s])},Object.defineProperty(i,"RESOURCEPATH",{get:function(){return r},enumerable:!1,configurable:!0}),i}();return bt.default=t,bt}var Rt={},En;function oo(){if(En)return Rt;En=1,Object.defineProperty(Rt,"__esModule",{value:!0});var e=j,u=e.__importDefault(Ra()),d=function(){function r(t,i){this.id=t,this.apiCall=i}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.update=function(t){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,this.apiCall.put(this.endpointPath(),t)]})})},r.prototype.delete=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.delete(this.endpointPath())]})})},r.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.id))},r}();return Rt.default=d,Rt}var Pt={},wt={},qn;function Pa(){if(qn)return wt;qn=1,Object.defineProperty(wt,"__esModule",{value:!0});var e=j,u="/stemming/dictionaries",d=function(){function r(t){this.apiCall=t,this.apiCall=t}return r.prototype.upsert=function(t,i){return e.__awaiter(this,void 0,void 0,function(){var s,c;return e.__generator(this,function(p){switch(p.label){case 0:return s=Array.isArray(i)?i.map(function(_){return JSON.stringify(_)}).join(`
`):i,[4,this.apiCall.performRequest("post",this.endpointPath("import"),{queryParameters:{id:t},bodyParameters:s,additionalHeaders:{"Content-Type":"text/plain"},skipConnectionTimeout:!0})];case 1:return c=p.sent(),[2,Array.isArray(i)?c.split(`
`).map(function(_){return JSON.parse(_)}):c]}})})},r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.endpointPath=function(t){return t===void 0?"".concat(r.RESOURCEPATH):"".concat(r.RESOURCEPATH,"/").concat(encodeURIComponent(t))},Object.defineProperty(r,"RESOURCEPATH",{get:function(){return u},enumerable:!1,configurable:!0}),r}();return wt.default=d,wt}var Ot={},Tn;function so(){if(Tn)return Ot;Tn=1,Object.defineProperty(Ot,"__esModule",{value:!0});var e=j,u=e.__importDefault(Pa()),d=function(){function r(t,i){this.id=t,this.apiCall=i}return r.prototype.retrieve=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(t){return[2,this.apiCall.get(this.endpointPath())]})})},r.prototype.endpointPath=function(){return"".concat(u.default.RESOURCEPATH,"/").concat(encodeURIComponent(this.id))},r}();return Ot.default=d,Ot}var xn;function uo(){if(xn)return Pt;xn=1,Object.defineProperty(Pt,"__esModule",{value:!0});var e=j,u=e.__importDefault(Pa()),d=e.__importDefault(so()),r="/stemming",t=function(){function i(s){this.apiCall=s,this.individualStemmingDictionaries={},this.apiCall=s,this._stemmingDictionaries=new u.default(this.apiCall)}return i.prototype.dictionaries=function(s){return s===void 0?this._stemmingDictionaries:(this.individualStemmingDictionaries[s]===void 0&&(this.individualStemmingDictionaries[s]=new d.default(s,this.apiCall)),this.individualStemmingDictionaries[s])},Object.defineProperty(i,"RESOURCEPATH",{get:function(){return r},enumerable:!1,configurable:!0}),i}();return Pt.default=t,Pt}var jn;function lo(){if(jn)return Me;jn=1,Object.defineProperty(Me,"__esModule",{value:!0});var e=j,u=e.__importDefault(la()),d=e.__importDefault(ca()),r=e.__importDefault(he()),t=e.__importDefault(Ki()),i=e.__importDefault(_a()),s=e.__importDefault(Qi()),c=e.__importDefault(ma()),p=e.__importDefault(Gi()),_=e.__importDefault(Ji()),m=e.__importDefault(Vi()),h=e.__importDefault(Xi()),a=e.__importDefault(Yi()),n=e.__importDefault(Zi()),o=e.__importDefault(ya()),l=e.__importDefault(ga()),f=e.__importDefault(eo()),v=e.__importDefault(no()),y=e.__importDefault(Sa()),S=e.__importDefault(ao()),b=e.__importDefault(Ra()),A=e.__importDefault(oo()),q=e.__importDefault(uo()),T=function(){function k(C){var D;C.sendApiKeyAsQueryParam=(D=C.sendApiKeyAsQueryParam)!==null&&D!==void 0?D:!1,this.configuration=new u.default(C),this.apiCall=new d.default(this.configuration),this.debug=new _.default(this.apiCall),this.metrics=new m.default(this.apiCall),this.stats=new h.default(this.apiCall),this.health=new a.default(this.apiCall),this.operations=new n.default(this.apiCall),this.multiSearch=new o.default(this.apiCall,this.configuration),this._collections=new r.default(this.apiCall),this.individualCollections={},this._aliases=new i.default(this.apiCall),this.individualAliases={},this._keys=new c.default(this.apiCall),this.individualKeys={},this._presets=new l.default(this.apiCall),this.individualPresets={},this._stopwords=new y.default(this.apiCall),this.individualStopwords={},this.analytics=new v.default(this.apiCall),this.stemming=new q.default(this.apiCall),this._conversations=new b.default(this.apiCall),this.individualConversations={}}return k.prototype.collections=function(C){return C===void 0?this._collections:(this.individualCollections[C]===void 0&&(this.individualCollections[C]=new t.default(C,this.apiCall,this.configuration)),this.individualCollections[C])},k.prototype.aliases=function(C){return C===void 0?this._aliases:(this.individualAliases[C]===void 0&&(this.individualAliases[C]=new s.default(C,this.apiCall)),this.individualAliases[C])},k.prototype.keys=function(C){return C===void 0?this._keys:(this.individualKeys[C]===void 0&&(this.individualKeys[C]=new p.default(C,this.apiCall)),this.individualKeys[C])},k.prototype.presets=function(C){return C===void 0?this._presets:(this.individualPresets[C]===void 0&&(this.individualPresets[C]=new f.default(C,this.apiCall)),this.individualPresets[C])},k.prototype.stopwords=function(C){return C===void 0?this._stopwords:(this.individualStopwords[C]===void 0&&(this.individualStopwords[C]=new S.default(C,this.apiCall)),this.individualStopwords[C])},k.prototype.conversations=function(C){return C===void 0?this._conversations:(this.individualConversations[C]===void 0&&(this.individualConversations[C]=new A.default(C,this.apiCall)),this.individualConversations[C])},k}();return Me.default=T,Me}var At={},we={},kn;function co(){if(kn)return we;kn=1,Object.defineProperty(we,"__esModule",{value:!0}),we.SearchOnlyCollection=void 0;var e=fa(),u=function(){function d(r,t,i){this.name=r,this.apiCall=t,this.configuration=i,this._documents=new e.SearchOnlyDocuments(this.name,this.apiCall,this.configuration)}return d.prototype.documents=function(){return this._documents},d}();return we.SearchOnlyCollection=u,we}var In;function fo(){if(In)return At;In=1,Object.defineProperty(At,"__esModule",{value:!0});var e=j,u=e.__importDefault(la()),d=e.__importDefault(ca()),r=e.__importDefault(ya()),t=co(),i=function(){function s(c){var p;c.sendApiKeyAsQueryParam=(p=c.sendApiKeyAsQueryParam)!==null&&p!==void 0?p:!0,c.sendApiKeyAsQueryParam===!0&&(c.apiKey||"").length>2e3&&(console.warn("[typesense] API Key is longer than 2000 characters which is over the allowed limit, so disabling sending it as a query parameter."),c.sendApiKeyAsQueryParam=!1),this.configuration=new u.default(c),this.apiCall=new d.default(this.configuration),this.multiSearch=new r.default(this.apiCall,this.configuration,!0),this.individualCollections={}}return s.prototype.clearCache=function(){this.multiSearch.clearCache(),Object.entries(this.individualCollections).forEach(function(c){c[0];var p=c[1];p.documents().clearCache()})},s.prototype.collections=function(c){if(c)return this.individualCollections[c]===void 0&&(this.individualCollections[c]=new t.SearchOnlyCollection(c,this.apiCall,this.configuration)),this.individualCollections[c];throw new Error("Typesense.SearchClient only supports search operations, so the collectionName that needs to be searched must be specified. Use Typesense.Client if you need to access the collection object.")},s}();return At.default=i,At}var Mn;function ho(){if(Mn)return ue;Mn=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.Errors=ue.SearchClient=ue.Client=void 0;var e=j,u=e.__importDefault(lo());ue.Client=u.default;var d=e.__importDefault(fo());ue.SearchClient=d.default;var r=e.__importStar(Ie());return ue.Errors=r,ue.default={Client:u.default,SearchClient:d.default,Errors:r},ue}var Oe={},Gt={exports:{}},Jt={exports:{}},Nn;function po(){return Nn||(Nn=1,function(e){function u(d,r){if(d==null)return{};var t={};for(var i in d)if({}.hasOwnProperty.call(d,i)){if(r.indexOf(i)!==-1)continue;t[i]=d[i]}return t}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(Jt)),Jt.exports}var Hn;function vo(){return Hn||(Hn=1,function(e){var u=po();function d(r,t){if(r==null)return{};var i,s,c=u(r,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(r);for(s=0;s<p.length;s++)i=p[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(r,i)&&(c[i]=r[i])}return c}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(Gt)),Gt.exports}var Vt={exports:{}},Xt={exports:{}},Dn;function _o(){return Dn||(Dn=1,function(e){function u(d){if(Array.isArray(d))return d}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(Xt)),Xt.exports}var Yt={exports:{}},Fn;function mo(){return Fn||(Fn=1,function(e){function u(d,r){var t=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(t!=null){var i,s,c,p,_=[],m=!0,h=!1;try{if(c=(t=t.call(d)).next,r===0){if(Object(t)!==t)return;m=!1}else for(;!(m=(i=c.call(t)).done)&&(_.push(i.value),_.length!==r);m=!0);}catch(a){h=!0,s=a}finally{try{if(!m&&t.return!=null&&(p=t.return(),Object(p)!==p))return}finally{if(h)throw s}}return _}}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(Yt)),Yt.exports}var Zt={exports:{}},er={exports:{}},Un;function wa(){return Un||(Un=1,function(e){function u(d,r){(r==null||r>d.length)&&(r=d.length);for(var t=0,i=Array(r);t<r;t++)i[t]=d[t];return i}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(er)),er.exports}var zn;function Oa(){return zn||(zn=1,function(e){var u=wa();function d(r,t){if(r){if(typeof r=="string")return u(r,t);var i={}.toString.call(r).slice(8,-1);return i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set"?Array.from(r):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(r,t):void 0}}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(Zt)),Zt.exports}var tr={exports:{}},$n;function yo(){return $n||($n=1,function(e){function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(tr)),tr.exports}var Ln;function Aa(){return Ln||(Ln=1,function(e){var u=_o(),d=mo(),r=Oa(),t=yo();function i(s,c){return u(s)||d(s,c)||r(s,c)||t()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(Vt)),Vt.exports}var Bn;function go(){if(Bn)return Oe;Bn=1;var e=xe();Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.SearchRequestAdapter=void 0;var u=e(oa()),d=e(vo()),r=e(sa()),t=e(Aa()),i=e(je()),s=e(ke()),c=["q","conversation","conversation_id","conversation_model_id"];return Oe.SearchRequestAdapter=function(){function p(_,m,h){(0,i.default)(this,p),this.instantsearchRequests=_,this.typesenseClient=m,this.configuration=h,this.additionalSearchParameters=h.additionalSearchParameters,this.collectionSpecificSearchParameters=h.collectionSpecificSearchParameters}return(0,s.default)(p,[{key:"_shouldUseExactMatchForField",value:function(m,h){var a,n;return!(((a=this.configuration.collectionSpecificFilterByOptions)===null||a===void 0||(a=a[h])===null||a===void 0||(a=a[m])===null||a===void 0?void 0:a.exactMatch)===!1||((n=this.configuration.filterByOptions)===null||n===void 0||(n=n[m])===null||n===void 0?void 0:n.exactMatch)===!1)}},{key:"_adaptFacetFilters",value:function(m,h){var a=this,n="";if(!m)return n;var o=m.map(function(l){if(Array.isArray(l)){var f={};l.forEach(function(H){var z=a._parseFacetFilter(H),P=z.fieldName,g=z.fieldValue;f[P]=f[P]||[],f[P].push(g)}),Object.keys(f).length>1&&console.error("[Typesense-Instantsearch-Adapter] Typesense does not support cross-field ORs at the moment. The adapter could not OR values between these fields: ".concat(Object.keys(f).join(",")));var v=Object.keys(f)[0],y=f[v],S=y.reduce(function(H,z){return z.startsWith("-")&&!a._isNumber(z)?H[0].push(z.substring(1)):H[1].push(z),H},[[],[]]),b=(0,t.default)(S,2),A=b[0],q=b[1],T=[];if(q.length>0){var k=a._shouldUseExactMatchForField(v,h)?":=":":";T.push("".concat(v).concat(k,"[").concat(q.map(function(H){return a._escapeFacetValue(H)}).join(","),"]"))}if(A.length>0){var C=a._shouldUseExactMatchForField(v,h)?":!=":":!";T.push("".concat(v).concat(C,"[").concat(A.map(function(H){return a._escapeFacetValue(H)}).join(","),"]"))}var D=T.filter(function(H){return H}).join(" && ");return D}else{var $=a._parseFacetFilter(l),E=$.fieldName,K=$.fieldValue,O;if(K.startsWith("-")&&!a._isNumber(K)){var x=a._shouldUseExactMatchForField(E,h)?":!=":":!";O="".concat(E).concat(x,"[").concat(a._escapeFacetValue(K.substring(1)),"]")}else{var F=a._shouldUseExactMatchForField(E,h)?":=":":";O="".concat(E).concat(F,"[").concat(a._escapeFacetValue(K),"]")}return O}});return n=o.join(" && "),n}},{key:"_parseFacetFilter",value:function(m){var h,a,n,o,l;if(((h=this.configuration.facetableFieldsWithSpecialCharacters)===null||h===void 0?void 0:h.length)>0){var f=this.configuration.facetableFieldsWithSpecialCharacters.flat().map(function(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});if(a=new RegExp("^(".concat(f.join("|"),"):(.*)$")),n=m.match(a),n!=null)return o="".concat(n[1]),l="".concat(n[2]),{fieldName:o,fieldValue:l}}return a=this.constructor.DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX,n=m.match(a),n==null?console.error("[Typesense-Instantsearch-Adapter] Parsing failed for a facet filter `".concat(m,"` with the Regex `").concat(a,"`. If you have field names with special characters, be sure to add them to a parameter called `facetableFieldsWithSpecialCharacters` when instantiating the adapter.")):(o="".concat(n[1]).concat(n[2]),l="".concat(n[3])),{fieldName:o,fieldValue:l}}},{key:"_escapeFacetValue",value:function(m){return typeof m=="boolean"||m==="true"||m==="false"||this._isNumber(m)?m:"`".concat(m,"`")}},{key:"_isNumber",value:function(m){return Number.isInteger(m%1)||!!(m%1)}},{key:"_adaptNumericFilters",value:function(m){var h=this,a="";if(!m)return a;var n={};m.forEach(function(l){var f=h._parseNumericFilter(l),v=f.fieldName,y=f.operator,S=f.fieldValue;n[v]=n[v]||{},n[v][y]=S});var o=[];return Object.keys(n).forEach(function(l){n[l]["<="]!=null&&n[l][">="]!=null?o.push("".concat(l,":=[").concat(n[l][">="],"..").concat(n[l]["<="],"]")):n[l]["<="]!=null?o.push("".concat(l,":<=").concat(n[l]["<="])):n[l][">="]!=null?o.push("".concat(l,":>=").concat(n[l][">="])):n[l]["="]!=null?o.push("".concat(l,":=").concat(n[l]["="])):console.warn("[Typesense-Instantsearch-Adapter] Unsupported operator found ".concat(JSON.stringify(n[l])))}),a=o.join(" && "),a}},{key:"_parseNumericFilter",value:function(m){var h,a,n,o,l,f;if(((h=this.configuration.facetableFieldsWithSpecialCharacters)===null||h===void 0?void 0:h.length)>0){var v=this.configuration.facetableFieldsWithSpecialCharacters.map(function(q){return q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});if(a=new RegExp("^(".concat(v.join("|"),")(<=|>=|>|<|=)(.*)$")),n=m.match(a),n!=null){var y=n,S=(0,t.default)(y,4);return o=S[1],l=S[2],f=S[3],{fieldName:o,operator:l,fieldValue:f}}}if(a=this.constructor.DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX,n=m.match(a),n==null)console.error("[Typesense-Instantsearch-Adapter] Parsing failed for a numeric filter `".concat(m,"` with the Regex `").concat(a,"`. If you have field names with special characters, be sure to add them to a parameter called `facetableFieldsWithSpecialCharacters` when instantiating the adapter."));else{var b=n,A=(0,t.default)(b,4);o=A[1],l=A[2],f=A[3]}return{fieldName:o,operator:l,fieldValue:f}}},{key:"_adaptGeoFilter",value:function(m){var h=m.insideBoundingBox,a=m.aroundRadius,n=m.aroundLatLng,o=m.insidePolygon;if(h){var l,f,v,y;if(Array.isArray(h)){var S=h.flat(),b=(0,t.default)(S,4);l=b[0],f=b[1],v=b[2],y=b[3]}else{var A=h.split(","),q=(0,t.default)(A,4);l=q[0],f=q[1],v=q[2],y=q[3]}return"".concat(this.configuration.geoLocationField,":(").concat(l,", ").concat(f,", ").concat(l,", ").concat(y,", ").concat(v,", ").concat(y,", ").concat(v,", ").concat(f,")")}if(n||a){if(!a||a==="all")throw new Error("[Typesense-Instantsearch-Adapter] In Typesense, geo-filtering around a lat/lng also requires a numerical radius. So the `aroundRadius` parameter is required when `aroundLatLng` is used. If you intend to just geo-sort around a lat/long, you want to use the sortBy InstantSearch widget (or a virtual sortBy custom widget).");var T="".concat(parseFloat(a)/1e3," km");return"".concat(this.configuration.geoLocationField,":(").concat(n,", ").concat(T,")")}if(o){var k=o;return Array.isArray(o)&&(k=o.flat().join(",")),"".concat(this.configuration.geoLocationField,":(").concat(k,")")}}},{key:"_adaptFilters",value:function(m,h){var a=[];return m.filters&&a.push(m.filters),a.push(this._adaptFacetFilters(m.facetFilters,h)),a.push(this._adaptNumericFilters(m.numericFilters)),a.push(this._adaptGeoFilter(m)),a.filter(function(n){return n&&n!==""}).join(" && ")}},{key:"_adaptIndexName",value:function(m){return m.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[1]}},{key:"_adaptSortBy",value:function(m){return m.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[3]}},{key:"_adaptFacetBy",value:function(m,h){var a=this;return[m].flat().map(function(n){var o;return(o=a.configuration.collectionSpecificFacetByOptions)!==null&&o!==void 0&&(o=o[h])!==null&&o!==void 0&&o[n]?"".concat(n).concat(a.configuration.collectionSpecificFacetByOptions[h][n]):a.configuration.facetByOptions[n]?"".concat(n).concat(a.configuration.facetByOptions[n]):n}).join(",")}},{key:"_adaptRulesContextsToOverrideTags",value:function(m){return m.join(",")}},{key:"_buildSearchParameters",value:function(m){for(var h,a,n=m.params,o=m.indexName,l=this._adaptIndexName(o),f={},v=0,y=Object.entries(this.additionalSearchParameters);v<y.length;v++){var S=(0,t.default)(y[v],2),b=S[0],A=S[1];f[this._camelToSnakeCase(b)]=A}if(this.collectionSpecificSearchParameters[l])for(var q=0,T=Object.entries(this.collectionSpecificSearchParameters[l]);q<T.length;q++){var k=(0,t.default)(T[q],2),C=k[0],D=k[1];f[this._camelToSnakeCase(C)]=D}var $=Object.assign({},f),E=this._adaptSortBy(o);Object.assign($,{collection:l,q:n.query===""||n.query===void 0?"*":n.query,facet_by:f.facet_by||this._adaptFacetBy(n.facets,l),filter_by:this._adaptFilters(n,l)||f.filter_by,sort_by:E||f.sort_by,max_facet_values:n.maxValuesPerFacet,page:(n.page||0)+1}),n.hitsPerPage!=null&&($.per_page=n.hitsPerPage),n.facetQuery&&($.facet_query="".concat(n.facetName,":").concat(n.facetQuery),$.per_page=0),n.ruleContexts&&n.ruleContexts.length>0&&($.override_tags=this._adaptRulesContextsToOverrideTags(n.ruleContexts)),n.typesenseVectorQuery&&($.vector_query=n.typesenseVectorQuery);var K=((h=this.configuration.collectionSpecificSortByOptions)===null||h===void 0||(h=h[l])===null||h===void 0?void 0:h[$.sort_by])||((a=this.configuration.sortByOptions)===null||a===void 0?void 0:a[$.sort_by]);return K?.enable_overrides!=null&&($.enable_overrides=K.enable_overrides),Object.fromEntries(Object.entries($).filter(function(O){var x=(0,t.default)(O,2);x[0];var F=x[1];return F!=null&&F!==""}))}},{key:"_camelToSnakeCase",value:function(m){return m.split(/(?=[A-Z])/).join("_").toLowerCase()}},{key:"request",value:function(){var _=(0,r.default)(u.default.mark(function h(){var a=this,n,o,l,f,v,y,S,b,A;return u.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return l=this.instantsearchRequests.map(function(k){return a._buildSearchParameters(k)}),f={},(((n=l[0])===null||n===void 0?void 0:n.conversation)===!0||((o=l[0])===null||o===void 0?void 0:o.conversation)==="true")&&(v=l[0],y=v.q,S=v.conversation,b=v.conversation_id,A=v.conversation_model_id,f={q:y,conversation:S,conversation_id:b,conversation_model_id:A},l=l.map(function(k){k.q,k.conversation,k.conversation_id,k.conversation_model_id;var C=(0,d.default)(k,c);return C})),T.abrupt("return",this.typesenseClient.multiSearch.perform({searches:l},f));case 4:case"end":return T.stop()}},h,this)}));function m(){return _.apply(this,arguments)}return m}()}],[{key:"INDEX_NAME_MATCHING_REGEX",get:function(){return new RegExp("^(.+?)(?=(/sort/(.*))|$)")}},{key:"DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX",get:function(){return new RegExp("(.*)((?!:).):(?!:)(.*)")}},{key:"DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX",get:function(){return new RegExp("(.*?)(<=|>=|>|<|=)(.*)")}}])}(),Oe}var Ae={},rr={exports:{}},nr={exports:{}},Wn;function bo(){return Wn||(Wn=1,function(e){var u=wa();function d(r){if(Array.isArray(r))return u(r)}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(nr)),nr.exports}var ar={exports:{}},Kn;function So(){return Kn||(Kn=1,function(e){function u(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(ar)),ar.exports}var ir={exports:{}},Qn;function Co(){return Qn||(Qn=1,function(e){function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}(ir)),ir.exports}var Gn;function Ro(){return Gn||(Gn=1,function(e){var u=bo(),d=So(),r=Oa(),t=Co();function i(s){return u(s)||d(s)||r(s)||t()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(rr)),rr.exports}var or={exports:{}},Jn;function Po(){return Jn||(Jn=1,function(e){var u=ua();function d(r,t,i){return(t=u(t))in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i,r}e.exports=d,e.exports.__esModule=!0,e.exports.default=e.exports}(or)),or.exports}var Ee={},Vn;function Ea(){return Vn||(Vn=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.utils=void 0,Ee.utils={_adaptHighlightTag:function(u,d,r){return u.replace(new RegExp("<mark>","g"),d||"<mark>").replace(new RegExp("</mark>","g"),r||"</mark>")},_adaptNumberOfPages:function(){var u=this.typesenseResponse.found/this.typesenseResponse.request_params.per_page;return Number.isFinite(u)?Math.ceil(u):1}}),Ee}var Xn;function wo(){if(Xn)return Ae;Xn=1;var e=xe();Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.SearchResponseAdapter=void 0;var u=e(xt()),d=e(Aa()),r=e(Ro()),t=e(Po()),i=e(je()),s=e(ke()),c=Ea();function p(h,a){var n=Object.keys(h);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(h);a&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(h,l).enumerable})),n.push.apply(n,o)}return n}function _(h){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?p(Object(n),!0).forEach(function(o){(0,t.default)(h,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(o){Object.defineProperty(h,o,Object.getOwnPropertyDescriptor(n,o))})}return h}var m=Ae.SearchResponseAdapter=function(){function h(a,n,o){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};(0,i.default)(this,h),this.typesenseResponse=a,this.instantsearchRequest=n,this.configuration=o,this.allTypesenseResults=l,this.fullTypesenseResponse=f}return(0,s.default)(h,[{key:"_adaptGroupedHits",value:function(n){var o=this,l=[];return l=n.map(function(f){var v=o._adaptHits(f.hits);return v.forEach(function(y){y.group_key=y._group_key=f.group_key,f.found&&(y._group_found=f.found)}),v}),this.configuration.flattenGroupedHits?l=l.flat():l=l.map(function(f){return _(_({},f[0]),{},{_grouped_hits:f})}),l}},{key:"_adaptHits",value:function(n){var o=this,l=[];return l=n.map(function(f){var v=_({},f.document);v.objectID=f.document.id,v._snippetResult=o._adaptHighlightResult(f,"snippet"),v._highlightResult=o._adaptHighlightResult(f,"value"),v._rawTypesenseHit=f,o.fullTypesenseResponse.conversation&&(v._rawTypesenseConversation=o.fullTypesenseResponse.conversation),["text_match","geo_distance_meters","curated","text_match_info","hybrid_search_info","vector_distance"].forEach(function(S){Object.keys(f).includes(S)&&!Object.keys(v).includes(S)&&(v[S]=f[S])});var y=v[o.configuration.geoLocationField];return y&&(v._geoloc={lat:y[0],lng:y[1]}),v}),l}},{key:"_adaptHighlightResult",value:function(n,o){var l={};return n.highlight!=null&&this.isHighlightPost0240RCN32Format(n.highlight)?this.adaptHighlightObject(n,l,o):this.adaptHighlightsArray(n,l,o),l}},{key:"isHighlightPost0240RCN32Format",value:function(n){return n.full==null&&n.snippet==null}},{key:"adaptHighlightsArray",value:function(n,o,l){var f=this;Object.assign.apply(Object,[o].concat((0,r.default)(Object.entries(n.document).map(function(v){var y=(0,d.default)(v,2),S=y[0],b=y[1];return(0,t.default)({},S,{value:b,matchLevel:"none",matchedWords:[]})})))),n.highlights.forEach(function(v){o[v.field]={value:v[l]||v["".concat(l,"s")],matchLevel:"full",matchedWords:v.matched_tokens},v.indices&&(o[v.field].matchedIndices=v.indices)}),Object.entries(o).forEach(function(v){var y=(0,d.default)(v,2),S=y[0],b=y[1],A=S,q=b.value,T=b.matchLevel,k=b.matchedWords,C=b.matchedIndices;q==null?o[A]=f._adaptHighlightNullValue():Array.isArray(q)?(o[A]=[],n.document[A].forEach(function(D,$){C&&C.includes($)?o[A].push({value:f._adaptHighlightTag("".concat(q[C.indexOf($)]),f.instantsearchRequest.params.highlightPreTag,f.instantsearchRequest.params.highlightPostTag),matchLevel:T,matchedWords:k[$]}):(0,u.default)(D)==="object"?o[A].push(f._adaptHighlightInObjectValue(D,{},l)):o[A].push({value:"".concat(D),matchLevel:"none",matchedWords:[]})})):(0,u.default)(q)==="object"?o[A]=f._adaptHighlightInObjectValue(q,{},l):o[A].value=f._adaptHighlightTag("".concat(q),f.instantsearchRequest.params.highlightPreTag,f.instantsearchRequest.params.highlightPostTag)})}},{key:"adaptHighlightObject",value:function(n,o,l){Object.assign(o,this._adaptHighlightInObjectValue(n.document,n.highlight,l))}},{key:"_adaptHighlightInObjectValue",value:function(n,o,l){var f=this;return Object.assign.apply(Object,[{}].concat((0,r.default)(Object.entries(n).map(function(v){var y=(0,d.default)(v,2),S=y[0],b=y[1],A;if(b==null)A=f._adaptHighlightNullValue();else if(Array.isArray(b)){var q;A=f._adaptHighlightInArrayValue(b,(q=o?.[S])!==null&&q!==void 0?q:[],l)}else if((0,u.default)(b)==="object"){var T;A=f._adaptHighlightInObjectValue(b,(T=o?.[S])!==null&&T!==void 0?T:{},l)}else A=f._adaptHighlightInPrimitiveValue(b,o?.[S],l);return(0,t.default)({},S,A)}))))}},{key:"_adaptHighlightInArrayValue",value:function(n,o,l){var f=this;return n.map(function(v,y){var S;if(v==null)S=f._adaptHighlightNullValue();else if(Array.isArray(v)){var b;S=f._adaptHighlightInArrayValue(v,(b=o?.[y])!==null&&b!==void 0?b:[],l)}else if((0,u.default)(v)==="object"){var A;S=f._adaptHighlightInObjectValue(v,(A=o?.[y])!==null&&A!==void 0?A:{},l)}else S=f._adaptHighlightInPrimitiveValue(v,o?.[y],l);return S})}},{key:"_adaptHighlightInPrimitiveValue",value:function(n,o,l){if(o!=null){var f,v;return{value:this._adaptHighlightTag("".concat((f=(v=o[l])!==null&&v!==void 0?v:o.highlight)!==null&&f!==void 0?f:o.snippet),this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:(o.matched_tokens||[]).length>0?"full":"none",matchedWords:o.matched_tokens||[]}}else return{value:this._adaptHighlightTag("".concat(n),this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:"none",matchedWords:[]}}},{key:"_adaptHighlightNullValue",value:function(){return{value:"",matchLevel:"none",matchedWords:[]}}},{key:"_adaptFacets",value:function(n){var o={};return n.forEach(function(l){Object.assign(o,(0,t.default)({},l.field_name,Object.assign.apply(Object,[{}].concat((0,r.default)(l.counts.map(function(f){return(0,t.default)({},f.value,f.count)}))))))}),o}},{key:"_adaptFacetStats",value:function(n){var o={};return n.forEach(function(l){Object.keys(l.stats).length>0&&Object.assign(o,(0,t.default)({},l.field_name,l.stats))}),o}},{key:"_adaptRenderingContent",value:function(n){var o,l=Object.assign({},this.configuration.renderingContent);return((o=l.facetOrdering)===null||o===void 0||(o=o.facets)===null||o===void 0?void 0:o.order)==null&&(l.facetOrdering=l.facetOrdering||{},l.facetOrdering.facets=l.facetOrdering.facets||{},l.facetOrdering.facets.order=(0,r.default)(new Set(n.map(function(f){return f.field_name}).concat(this.allTypesenseResults.map(function(f){return f.facet_counts||[]}).flat().map(function(f){return f.field_name}).filter(function(f){return f}))))),l}},{key:"_adaptUserData",value:function(n){return n?Array.isArray(n)?n:[n]:[]}},{key:"adapt",value:function(){var n=this._adaptRenderingContent(this.typesenseResponse.facet_counts||[]),o=_({hits:this.typesenseResponse.grouped_hits?this._adaptGroupedHits(this.typesenseResponse.grouped_hits):this._adaptHits(this.typesenseResponse.hits),nbHits:this.typesenseResponse.found,page:this.typesenseResponse.page-1,nbPages:this._adaptNumberOfPages(),hitsPerPage:this.typesenseResponse.request_params.per_page,facets:this._adaptFacets(this.typesenseResponse.facet_counts||[]),facets_stats:this._adaptFacetStats(this.typesenseResponse.facet_counts||{}),query:this.typesenseResponse.request_params.q,processingTimeMS:this.typesenseResponse.search_time_ms},Object.keys(n).length>0?{renderingContent:n}:null);return this.typesenseResponse.metadata&&(o.appliedRules=["typesense-override"],o.userData=this._adaptUserData(this.typesenseResponse.metadata)),this.fullTypesenseResponse.conversation&&o.hits.length===0&&(o.hits=[{_rawTypesenseConversation:this.fullTypesenseResponse.conversation}]),o}}])}();return Object.assign(m.prototype,c.utils),Ae}var qe={},Yn;function Oo(){if(Yn)return qe;Yn=1;var e=xe();Object.defineProperty(qe,"__esModule",{value:!0}),qe.FacetSearchResponseAdapter=void 0;var u=e(je()),d=e(ke()),r=Ea(),t=qe.FacetSearchResponseAdapter=function(){function i(s,c){(0,u.default)(this,i),this.typesenseResponse=s,this.instantsearchRequest=c}return(0,d.default)(i,[{key:"_adaptFacetHits",value:function(c){var p=this,_={},m=c.find(function(h){return h.field_name===p.instantsearchRequest.params.facetName});return _=m.counts.map(function(h){return{value:h.value,highlighted:p._adaptHighlightTag(h.highlighted,p.instantsearchRequest.params.highlightPreTag,p.instantsearchRequest.params.highlightPostTag),count:h.count}}),_}},{key:"adapt",value:function(){var c={facetHits:this._adaptFacetHits(this.typesenseResponse.facet_counts),exhaustiveFacetsCount:!0,processingTimeMS:this.typesenseResponse.search_time_ms};return c}}])}();return Object.assign(t.prototype,r.utils),qe}var Zn;function Ao(){return Zn||(Zn=1,function(e){var u=xe();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=u(oa()),r=u(sa()),t=u(je()),i=u(ke()),s=ji(),c=ho(),p=go(),_=wo(),m=Oo();e.default=function(){function h(a){var n=this;(0,t.default)(this,h),this.updateConfiguration(a),this.searchClient={clearCache:function(){return n.clearCache()},search:function(l){return n.searchTypesenseAndAdapt(l)},searchForFacetValues:function(l){return n.searchTypesenseForFacetValuesAndAdapt(l)}}}return(0,i.default)(h,[{key:"searchTypesenseAndAdapt",value:function(){var a=(0,r.default)(d.default.mark(function o(l){var f=this,v,y;return d.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,this._adaptAndPerformTypesenseRequest(l);case 3:return v=b.sent,y=v.results.map(function(A,q){f._validateTypesenseResult(A);var T=new _.SearchResponseAdapter(A,l[q],f.configuration,v.results,v),k=T.adapt();return k}),b.abrupt("return",{results:y});case 8:throw b.prev=8,b.t0=b.catch(0),console.error(b.t0),b.t0;case 12:case"end":return b.stop()}},o,this,[[0,8]])}));function n(o){return a.apply(this,arguments)}return n}()},{key:"searchTypesenseForFacetValuesAndAdapt",value:function(){var a=(0,r.default)(d.default.mark(function o(l){var f=this,v,y;return d.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,this._adaptAndPerformTypesenseRequest(l);case 3:return v=b.sent,y=v.results.map(function(A,q){f._validateTypesenseResult(A);var T=new m.FacetSearchResponseAdapter(A,l[q],f.configuration);return T.adapt()}),b.abrupt("return",y);case 8:throw b.prev=8,b.t0=b.catch(0),console.error(b.t0),b.t0;case 12:case"end":return b.stop()}},o,this,[[0,8]])}));function n(o){return a.apply(this,arguments)}return n}()},{key:"_adaptAndPerformTypesenseRequest",value:function(){var a=(0,r.default)(d.default.mark(function o(l){var f,v;return d.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return f=new p.SearchRequestAdapter(l,this.typesenseClient,this.configuration),S.next=3,f.request();case 3:return v=S.sent,S.abrupt("return",v);case 5:case"end":return S.stop()}},o,this)}));function n(o){return a.apply(this,arguments)}return n}()},{key:"clearCache",value:function(){return this.typesenseClient=new c.SearchClient(this.configuration.server),this.searchClient}},{key:"updateConfiguration",value:function(n){return this.configuration=new s.Configuration(n),this.configuration.validate(),this.typesenseClient=new c.SearchClient(this.configuration.server),!0}},{key:"_validateTypesenseResult",value:function(n){if(n.error)throw new Error("".concat(n.code," - ").concat(n.error));if(!n.hits&&!n.grouped_hits)throw new Error("Did not find any hits. ".concat(n.code," - ").concat(n.error))}}])}()}(Dt)),Dt}var Eo=Ao();const qo=Ga(Eo),To={class:"row q-mt-md"},xo={class:"col-3 q-pr-sm"},jo={class:"text-subtitle2 q-pt-md"},ko={class:"text-subtitle2 q-pt-md"},Io={class:"col-9"},Mo={key:1},No=me({__name:"SearchInstantSearch",setup(e){const u=lr(),d=Q(null),r=Q(),t=Q(),i=Q(null),s=Q(null),c=[({instantSearchInstance:l})=>({subscribe(){t.value=l},unsubscribe(){t.value=null}})],p=U(()=>u.currentCollection),_=U(()=>!p.value||!p.value.fields?[]:p.value.fields.filter(l=>l.facet&&["int32","int64","float","int32[]","int64[]","float[]"].includes(l.type)&&!l.name.includes(".*")).map(l=>l.name)),m=U(()=>!p.value||!p.value.fields?[]:p.value.fields.filter(l=>l.facet&&["string","string[]"].includes(l.type)&&!l.name.includes(".*")).map(l=>l.name)),h=U(()=>{if(!p.value||!p.value.fields)return[];const l=[{value:p.value.name,label:"Default"}];return p.value.fields.filter(f=>["int32","float"].includes(f.type)||f.type==="string"&&f.sort).forEach(f=>{p.value&&(l.push({value:`${p.value.name}/sort/${f.name}:asc`,label:`${f.name} asc`}),l.push({value:`${p.value.name}/sort/${f.name}:desc`,label:`${f.name} desc`}))}),l}),a=U(()=>u.data.stopwords.map(l=>l.id)),n=()=>{t.value&&p.value&&u.exportToJson(t.value.renderState[p.value.name].hits.results.hits)},o=()=>{r.value&&p.value&&r.value.updateConfiguration({...r.value.configuration,additionalSearchParameters:{...r.value.configuration.additionalSearchParameters,stopwords:s.value}})};return Tt(()=>p.value,()=>{d.value=null,i.value=null,window.setTimeout(()=>{if(!u.loginData||!p.value)return;const l=(p.value?.fields||[]).filter(f=>f.index&&["string","string[]"].includes(f.type)&&!f.name.includes(".*")).map(f=>f.name).join(",");try{const f=new qo({server:{nodes:[{...u.loginData.node}],apiKey:u.loginData.apiKey},additionalSearchParameters:{exhaustive_search:!0,query_by:l}});r.value=f,d.value=f.searchClient}catch(f){i.value=f.message+"Using query_by: "+l,console.error(f)}})},{immediate:!0}),(l,f)=>{const v=re("ais-configure"),y=re("ais-search-box"),S=re("ais-stats"),b=re("ais-current-refinements"),A=re("ais-hits-per-page"),q=re("ais-sort-by"),T=re("ais-range-input"),k=re("ais-refinement-list"),C=re("ais-pagination"),D=re("ais-hits"),$=re("ais-instant-search");return d.value&&p.value?(L(),ie($,{key:0,"search-client":d.value,"index-name":p.value.name,middlewares:c},{default:W(()=>[M(v,{hitsPerPage:12}),M(y,{"index-name":"instant_search","search-client":d.value},{default:W(()=>[M(qi)]),_:1},8,["search-client"]),M(S),M(b),ne("div",To,[ne("div",xo,[M(A,{items:[{label:"12 hits per page",value:12,default:!0},{label:"48 hits per page",value:48},{label:"100 hits per page",value:100},{label:"250 hits per page",value:250}]}),M(pe,{flat:"",onClick:f[0]||(f[0]=E=>n())},{default:W(()=>f[3]||(f[3]=[ce("export current page")])),_:1}),f[4]||(f[4]=ne("div",{class:"text-subtitle2 q-pt-md"},"Sort By",-1)),M(q,{items:h.value},null,8,["items"]),f[5]||(f[5]=ne("div",{class:"text-subtitle2 q-pt-md"},"Stopwords",-1)),M(Ya,{modelValue:s.value,"onUpdate:modelValue":[f[1]||(f[1]=E=>s.value=E),f[2]||(f[2]=E=>o())],disable:!Ja(u).data.features.stopwords,outlined:"",clearable:"",dense:"","options-dense":"",options:a.value},null,8,["modelValue","disable","options"]),(L(!0),X(de,null,_e(_.value,E=>(L(),X("div",{key:E,class:"q-mb-sm"},[ne("div",jo,fe(E),1),M(T,{searchable:!0,attribute:E},null,8,["attribute"])]))),128)),(L(!0),X(de,null,_e(m.value,E=>(L(),X("div",{key:E,class:"q-mb-sm"},[ne("div",ko,fe(E),1),M(k,{class:"q-mb-sm",searchable:!0,attribute:E},null,8,["attribute"])]))),128))]),ne("div",Io,[M(C,{class:"q-mb-md"}),M(D,null,Va({_:2},[p.value?{name:"item",fn:W(({item:E})=>[M(ia,{item:E},null,8,["item"])]),key:"0"}:void 0]),1024),M(C,{class:"q-my-md"})])])]),_:1},8,["search-client","index-name"])):i.value?(L(),X("div",Mo,[M(aa,{"inline-actions":"",class:"text-white bg-red"},{default:W(()=>[ce(fe(i.value),1)]),_:1})])):ae("",!0)}}}),Vo=me({__name:"Search",setup(e){const u=Q("form");return(d,r)=>(L(),ie(Xa,{padding:""},{default:W(()=>[M(qa,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=t=>u.value=t),dense:"",class:"bg-primary text-white",align:"justify","narrow-indicator":""},{default:W(()=>[M(fr,{name:"form",label:"InstantSearch Mode"}),M(fr,{name:"json",label:"JSON Mode"})]),_:1},8,["modelValue"]),M(ra),M(Ta,{modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=t=>u.value=t),animated:"","keep-alive":""},{default:W(()=>[M(hr,{name:"form"},{default:W(()=>[M(No)]),_:1}),M(hr,{name:"json",class:"q-pa-none"},{default:W(()=>[M(Oi)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Vo as default};
