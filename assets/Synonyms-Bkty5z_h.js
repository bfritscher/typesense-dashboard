import{K as A,u as I,H as E,f as p,A as $,U as f,M as c,O as t,N as a,a3 as q,a4 as b,V as T,a7 as i,aT as B,T as _,Q as D,R as g,a9 as W,S as m,X as x,$ as J,W as V}from"./index-BTiO3EOl.js";import{a as S}from"./QSelect-JfnYGCod.js";import{Q as L,a as M,b as Y}from"./QTable-B3vxj2W5.js";import{Q as h}from"./QPage-4I5DqbU4.js";import{u as P}from"./use-quasar-Dx1WlHzY.js";import{n as y}from"./index.browser-OxPLOBIU.js";import"./QChip-CO2E2fvA.js";import"./QItem-CTM6MChZ.js";import"./QList-DRl8fJm7.js";import"./QLinearProgress-CLZiPA0A.js";const j={class:"text-h6"};var w=(d=>(d.ONE_WAY="one-way",d.MULTI_WAY="multi-way",d))(w||{});const ne=A({__name:"Synonyms",setup(d){const v=P(),s=I(),r=w,Q=[{label:"Multi-way synonyms",value:"multi-way"},{label:"One-way synonym",value:"one-way"}],e=E({expanded:s.data.synonyms.length===0,filter:"",type:"multi-way",synonym:{root:"",synonyms:[],locale:"",symbols_to_index:[]},id:y(),columns:[{label:"ID",name:"id",field:"id",align:"left"},{label:"Type",name:"type",align:"left",field:n=>n.root?"one-way":"multi-way",sortable:!0},{label:"Root",name:"root",field:"root",align:"left",sortable:!0},{label:"Synonyms",name:"synonyms",field:n=>n.synonyms.join(", "),align:"left",sortable:!0},{label:"Symbols to Index",name:"symbols_to_index",field:n=>n.symbols_to_index?.join(", "),align:"left",sortable:!0},{label:"Locale",name:"locale",field:"locale",align:"left",sortable:!0},{label:"Actions",name:"actions",align:"right"}]}),k=p(()=>e.synonym.synonyms.length>0&&e.id.length>0),u=p(()=>s.data.synonyms.map(n=>n.id).includes(e.id));async function C(){const n={synonyms:JSON.parse(JSON.stringify(e.synonym.synonyms))};e.type===r.ONE_WAY&&(n.root=e.synonym.root||""),e.synonym.locale&&(n.locale=e.synonym.locale),e.synonym.symbols_to_index&&e.synonym.symbols_to_index.length>0&&(n.symbols_to_index=e.synonym.symbols_to_index),await s.createSynonym({id:e.id,synonym:n}),e.id=y(),e.synonym={root:"",synonyms:[],locale:"",symbols_to_index:[]},e.expanded=!1}function N(n){e.id=n.id||y(),e.synonym=JSON.parse(JSON.stringify(n)),e.type=e.synonym.root?"one-way":"multi-way",e.synonym.locale=e.synonym.locale||"",e.synonym.symbols_to_index=e.synonym.symbols_to_index||[],e.expanded=!0}function O(n){v.dialog({title:"Confirm",message:`Delete synonym with id: ${n}?`,cancel:!0,persistent:!0}).onOk(()=>{s.deleteSynonym(n)})}return $(()=>{s.currentCollection&&s.getSynonyms(s.currentCollection.name)}),(n,l)=>(c(),f(h,{padding:""},{default:t(()=>[a(L,{modelValue:e.expanded,"onUpdate:modelValue":l[7]||(l[7]=o=>e.expanded=o),"expand-separator":"",icon:"sym_s_add_circle","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:`${u.value?"Update":"Add"} Synonym`,"header-class":"bg-primary text-white"},{default:t(()=>[a(q,{class:"bg-surface column"},{default:t(()=>[a(b,null,{default:t(()=>[a(i,{modelValue:e.id,"onUpdate:modelValue":l[0]||(l[0]=o=>e.id=o),label:"ID",filled:"",class:"q-mb-md"},null,8,["modelValue"]),a(B,{modelValue:e.type,"onUpdate:modelValue":l[1]||(l[1]=o=>e.type=o),filled:"",options:Q,color:"primary",inline:"",class:"q-mb-md"},null,8,["modelValue"]),e.type===_(r).ONE_WAY?(c(),f(i,{key:0,modelValue:e.synonym.root,"onUpdate:modelValue":l[2]||(l[2]=o=>e.synonym.root=o),filled:"","stack-label":"",label:"Root",class:"q-mb-md"},null,8,["modelValue"])):T("",!0),a(S,{modelValue:e.synonym.synonyms,"onUpdate:modelValue":l[3]||(l[3]=o=>e.synonym.synonyms=o),filled:"",multiple:"","use-chips":"","use-input":"","new-value-mode":"add","stack-label":"","hide-dropdown-icon":"",label:"Synonyms",hint:"Enter a synonym and press enter"},null,8,["modelValue"])]),_:1}),a(D),a(b,null,{default:t(()=>[l[9]||(l[9]=g("div",{class:"text-overline"},"Optional",-1)),a(S,{modelValue:e.synonym.symbols_to_index,"onUpdate:modelValue":l[4]||(l[4]=o=>e.synonym.symbols_to_index=o),filled:"",multiple:"","use-chips":"","use-input":"","new-value-mode":"add","stack-label":"","hide-dropdown-icon":"",label:"Symbols to Index",hint:"Enter a symbol (eg: +, - ) and press enter"},null,8,["modelValue"]),a(i,{modelValue:e.synonym.locale,"onUpdate:modelValue":l[5]||(l[5]=o=>e.synonym.locale=o),filled:"","stack-label":"",label:"Locale",class:"q-mb-md",hint:"Leave blank to auto-detect"},null,8,["modelValue"])]),_:1}),a(W,{align:"right",class:"bg-primary"},{default:t(()=>[a(m,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!k.value,onClick:l[6]||(l[6]=o=>C())},{default:t(()=>[x(J(u.value?"Update":"Add")+" Synonym",1)]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"]),a(M,{class:"q-mt-md",title:"Synonyms",flat:"",bordered:"",filter:e.filter,rows:_(s).data.synonyms,columns:e.columns,"row-key":"id",pagination:{rowsPerPage:50,sortBy:"name"}},{"top-left":t(()=>[g("div",j,[a(V,{size:"md",name:"sym_s_dataset_linked"}),l[10]||(l[10]=x(" Synonyms",-1))])]),"top-right":t(()=>[a(i,{modelValue:e.filter,"onUpdate:modelValue":l[8]||(l[8]=o=>e.filter=o),borderless:"",dense:"",debounce:"300",placeholder:"Search"},{append:t(()=>[a(V,{name:"sym_s_search"})]),_:1},8,["modelValue"])]),"body-cell-actions":t(o=>[a(Y,{class:"text-right"},{default:t(()=>[a(m,{flat:"",icon:"sym_s_edit",title:"Edit",onClick:U=>N(o.row)},null,8,["onClick"]),a(m,{flat:"",color:"negative",icon:"sym_s_delete_forever",title:"Delete",onClick:U=>O(o.row.id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["filter","rows","columns"])]),_:1}))}});export{ne as default};
