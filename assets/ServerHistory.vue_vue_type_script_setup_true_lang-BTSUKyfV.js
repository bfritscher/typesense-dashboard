import{Q as y,a as u,b as h}from"./QSelect-CJWtbzyH.js";import{av as N,aO as Q,ba as H,bb as S,K as w,u as B,f as E,L as i,M as n,N as a,B as _,Y as m,O as l,a4 as I,S as v,R as d,Q as L,T as C,a6 as K,a5 as q,X as k}from"./index-CZ34aOlc.js";import{Q as D}from"./QList-QcH4d0WG.js";function b(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const g=N({name:"close-popup",beforeMount(e,{value:t}){const o={depth:b(t),handler(s){o.depth!==0&&setTimeout(()=>{const p=H(e);p!==void 0&&S(p,s,o.depth)})},handlerKey(s){Q(s,13)===!0&&o.handler(s)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=b(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}}),M=w({__name:"ServerHistory",props:{showLogout:{type:Boolean,default:!1}},setup(e){const t=e,o=B(),s=E(()=>o.loginHistory.map(c=>JSON.parse(c)));function p(c){const r=t.showLogout;o.login({...c,forceHomeRedirect:r})}return(c,r)=>(n(),i(D,{style:{"min-width":"100px"}},{default:a(()=>[t.showLogout?_((n(),i(y,{key:0,clickable:"",onClick:v(o).logout},{default:a(()=>[l(u,null,{default:a(()=>r[0]||(r[0]=[d("Logout")])),_:1}),l(u,{avatar:""},{default:a(()=>[l(L,{name:"sym_s_logout"})]),_:1})]),_:1},8,["onClick"])),[[g]]):m("",!0),t.showLogout?(n(),i(C,{key:1})):m("",!0),_((n(),i(y,{clickable:"",onClick:v(o).clearHistory},{default:a(()=>[l(u,null,{default:a(()=>r[1]||(r[1]=[d("Clear history")])),_:1}),l(u,{avatar:""},{default:a(()=>[l(L,{name:"sym_s_delete"})]),_:1})]),_:1},8,["onClick"])),[[g]]),l(C),s.value.length===0?(n(),i(h,{key:2,header:""},{default:a(()=>r[2]||(r[2]=[d("No History")])),_:1})):m("",!0),s.value.length>0?(n(),i(h,{key:3,header:""},{default:a(()=>r[3]||(r[3]=[d("Server History")])),_:1})):m("",!0),(n(!0),I(q,null,K(s.value,(f,x)=>_((n(),i(y,{key:x,clickable:"",onClick:P=>p(f)},{default:a(()=>[l(u,null,{default:a(()=>[d(k(f.node.protocol)+"://"+k(f.node.host)+":"+k(f.node.port),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[g]])),128))]),_:1}))}});export{M as _};
