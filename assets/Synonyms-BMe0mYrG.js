import{K as A,u as I,H as E,f as p,L as f,M as b,N as s,O as a,a2 as q,a3 as c,Y as $,a7 as m,aU as B,S as _,T as D,a1 as g,a8 as L,W as i,R as x,X as T,Q as V}from"./index-COFOeL2T.js";import{c as w}from"./QSelect-2an0Xdjf.js";import{Q as W,a as Y,b as J}from"./QTable-CzVGWkD1.js";import{Q as h}from"./QPage-BBJw8y2s.js";import{u as M}from"./use-quasar-CSTLctX9.js";import{n as y}from"./index.browser-OxPLOBIU.js";import"./format-BvkBI9bc.js";import"./QList-BdM4oJbp.js";import"./QLinearProgress-BX_OVINY.js";const P={class:"text-h6"};var S=(d=>(d.ONE_WAY="one-way",d.MULTI_WAY="multi-way",d))(S||{});const ee=A({__name:"Synonyms",setup(d){const v=M(),t=I(),r=S,Q=[{label:"Multi-way synonyms",value:"multi-way"},{label:"One-way synonym",value:"one-way"}],e=E({expanded:t.data.synonyms.length===0,filter:"",type:"multi-way",synonym:{root:"",synonyms:[],locale:"",symbols_to_index:[]},id:y(),columns:[{label:"ID",name:"id",field:"id",align:"left"},{label:"Type",name:"type",align:"left",field:n=>n.root?"one-way":"multi-way",sortable:!0},{label:"Root",name:"root",field:"root",align:"left",sortable:!0},{label:"Synonyms",name:"synonyms",field:n=>n.synonyms.join(", "),align:"left",sortable:!0},{label:"Symbols to Index",name:"symbols_to_index",field:n=>n.symbols_to_index?.join(", "),align:"left",sortable:!0},{label:"Locale",name:"locale",field:"locale",align:"left",sortable:!0},{label:"Actions",name:"actions",align:"right"}]}),k=p(()=>e.synonym.synonyms.length>0&&e.id.length>0),u=p(()=>t.data.synonyms.map(n=>n.id).includes(e.id));async function N(){const n={synonyms:JSON.parse(JSON.stringify(e.synonym.synonyms))};e.type===r.ONE_WAY&&(n.root=e.synonym.root||""),e.synonym.locale&&(n.locale=e.synonym.locale),e.synonym.symbols_to_index&&e.synonym.symbols_to_index.length>0&&(n.symbols_to_index=e.synonym.symbols_to_index),await t.createSynonym({id:e.id,synonym:n}),e.id=y(),e.synonym={root:"",synonyms:[],locale:"",symbols_to_index:[]},e.expanded=!1}function O(n){e.id=n.id||y(),e.synonym=JSON.parse(JSON.stringify(n)),e.type=e.synonym.root?"one-way":"multi-way",e.synonym.locale=e.synonym.locale||"",e.synonym.symbols_to_index=e.synonym.symbols_to_index||[],e.expanded=!0}function U(n){v.dialog({title:"Confirm",message:`Delete synonym with id: ${n}?`,cancel:!0,persistent:!0}).onOk(()=>{t.deleteSynonym(n)})}return(n,l)=>(b(),f(h,{padding:""},{default:s(()=>[a(W,{modelValue:e.expanded,"onUpdate:modelValue":l[7]||(l[7]=o=>e.expanded=o),"expand-separator":"",icon:"sym_s_add_circle","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:`${u.value?"Update":"Add"} Synonym`,"header-class":"bg-primary text-white"},{default:s(()=>[a(q,{class:"bg-surface column"},{default:s(()=>[a(c,null,{default:s(()=>[a(m,{modelValue:e.id,"onUpdate:modelValue":l[0]||(l[0]=o=>e.id=o),label:"ID",filled:"",class:"q-mb-md"},null,8,["modelValue"]),a(B,{modelValue:e.type,"onUpdate:modelValue":l[1]||(l[1]=o=>e.type=o),filled:"",options:Q,color:"primary",inline:"",class:"q-mb-md"},null,8,["modelValue"]),e.type===_(r).ONE_WAY?(b(),f(m,{key:0,modelValue:e.synonym.root,"onUpdate:modelValue":l[2]||(l[2]=o=>e.synonym.root=o),filled:"","stack-label":"",label:"Root",class:"q-mb-md"},null,8,["modelValue"])):$("",!0),a(w,{modelValue:e.synonym.synonyms,"onUpdate:modelValue":l[3]||(l[3]=o=>e.synonym.synonyms=o),filled:"",multiple:"","use-chips":"","use-input":"","new-value-mode":"add","stack-label":"","hide-dropdown-icon":"",label:"Synonyms",hint:"Enter a synonym and press enter"},null,8,["modelValue"])]),_:1}),a(D),a(c,null,{default:s(()=>[l[9]||(l[9]=g("div",{class:"text-overline"},"Optional",-1)),a(w,{modelValue:e.synonym.symbols_to_index,"onUpdate:modelValue":l[4]||(l[4]=o=>e.synonym.symbols_to_index=o),filled:"",multiple:"","use-chips":"","use-input":"","new-value-mode":"add","stack-label":"","hide-dropdown-icon":"",label:"Symbols to Index",hint:"Enter a symbol (eg: +, - ) and press enter"},null,8,["modelValue"]),a(m,{modelValue:e.synonym.locale,"onUpdate:modelValue":l[5]||(l[5]=o=>e.synonym.locale=o),filled:"","stack-label":"",label:"Locale",class:"q-mb-md",hint:"Leave blank to auto-detect"},null,8,["modelValue"])]),_:1}),a(L,{align:"right",class:"bg-primary"},{default:s(()=>[a(i,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!k.value,onClick:l[6]||(l[6]=o=>N())},{default:s(()=>[x(T(u.value?"Update":"Add")+" Synonym",1)]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"]),a(Y,{class:"q-mt-md",title:"Synonyms",flat:"",bordered:"",filter:e.filter,rows:_(t).data.synonyms,columns:e.columns,"row-key":"id",pagination:{rowsPerPage:50,sortBy:"name"}},{"top-left":s(()=>[g("div",P,[a(V,{size:"md",name:"sym_s_dataset_linked"}),l[10]||(l[10]=x(" Synonyms"))])]),"top-right":s(()=>[a(m,{modelValue:e.filter,"onUpdate:modelValue":l[8]||(l[8]=o=>e.filter=o),borderless:"",dense:"",debounce:"300",placeholder:"Search"},{append:s(()=>[a(V,{name:"sym_s_search"})]),_:1},8,["modelValue"])]),"body-cell-actions":s(o=>[a(J,{class:"text-right"},{default:s(()=>[a(i,{flat:"",icon:"sym_s_edit",title:"Edit",onClick:C=>O(o.row)},null,8,["onClick"]),a(i,{flat:"",color:"negative",icon:"sym_s_delete_forever",title:"Delete",onClick:C=>U(o.row.id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["filter","rows","columns"])]),_:1}))}});export{ee as default};
