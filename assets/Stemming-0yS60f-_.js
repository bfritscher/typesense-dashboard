import{Q as T,a as _,b as I,c as v}from"./QTabPanels-BvpfzdAv.js";import{K as O,u as q,f as p,H as A,r as b,A as B,U as D,M as g,O as a,N as t,a3 as J,Q as M,a4 as V,a7 as w,S as d,T as c,X as m,L as j,V as S,$ as Q,a9 as E,W as x,R as F}from"./index-CWCfc1R0.js";import{Q as P}from"./QBanner-C-wBSwOC.js";import{Q as z,a as H,b as K}from"./QTable-DYi6JvBk.js";import{Q as L}from"./QPage-B_Kz1etr.js";import{u as R}from"./use-quasar-npx6AL4x.js";import{M as W}from"./MonacoEditor-Ddc3-1-c.js";import"./QResizeObserver-trr0eUCn.js";import"./QSelect-B2bCo1Ml.js";import"./QChip-DBKn72ks.js";import"./QItem-BBPRi80o.js";import"./touch-BjYP5sR0.js";import"./QList-DIVxnbm_.js";import"./QLinearProgress-Dhc8340v.js";const X={key:0},G={class:"text-h6"},pe=O({__name:"Stemming",setup(Y){const s=R(),l=q(),k=p(()=>l.data.stemmingDictionaries.map(n=>({id:n}))),i=A({stemmingDictionary:{id:"irregular-plurals",words:[{root:"person",word:"people"},{root:"child",word:"children"},{root:"goose",word:"geese"}]},expanded:l.data.stemmingDictionaries.length===0,filter:"",columns:[{label:"ID",name:"id",field:"id",sortable:!0,align:"left"},{label:"Actions",name:"actions_op",align:"right"}]}),u=b("json"),f=p({get(){return JSON.stringify(i.stemmingDictionary,null,2)},set(n){try{i.stemmingDictionary=JSON.parse(n),r.value=null}catch(e){r.value=e.message}}}),r=b(null),y=p(()=>l.data.stemmingDictionaries.includes(i.stemmingDictionary.id));async function C(){await l.upsertStemmingDictionaries(JSON.parse(JSON.stringify(i.stemmingDictionary)))}async function N(n){i.stemmingDictionary=await l.getStemmingDictionary(n)||i.stemmingDictionary,i.expanded=!0}function U(n){s.dialog({title:"Confirm",message:`Delete stemming dictionary ${n}?`,cancel:!0,persistent:!0}).onOk(()=>{l.deleteStemmingDictionary(n)})}async function h(){try{s.loading.show({message:"Uploading. Please wait...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),await l.api?.importStemmingFile(i.stemmingDictionary.id),l.getStemmingDictionaries()}catch(n){console.error(n)}s.loading.hide()}return B(()=>{l.getStemmingDictionaries()}),(n,e)=>(g(),D(L,{padding:""},{default:a(()=>[t(z,{modelValue:i.expanded,"onUpdate:modelValue":e[6]||(e[6]=o=>i.expanded=o),"expand-separator":"",icon:"sym_s_add_circle","expand-icon":"sym_s_unfold_more","expanded-icon":"sym_s_unfold_less",label:`${y.value?"Update":"Add"} Stemming Dictionary`,"header-class":"bg-primary text-white"},{default:a(()=>[t(J,null,{default:a(()=>[t(T,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[t(_,{name:"form",label:"Upload Mode"}),t(_,{name:"json",label:"JSON Mode"})]),_:1},8,["modelValue"]),t(M),t(I,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=o=>u.value=o),animated:"",class:"bg-surface"},{default:a(()=>[t(v,{name:"form"},{default:a(()=>[t(V,{class:"q-col-gutter-md row"},{default:a(()=>[t(w,{modelValue:i.stemmingDictionary.id,"onUpdate:modelValue":e[1]||(e[1]=o=>i.stemmingDictionary.id=o),class:"col-12 col-sm-6",label:"ID",filled:"",rules:[o=>!!o||"Field is required"]},null,8,["modelValue","rules"]),t(d,{type:"a",icon:"sym_s_help","no-caps":"",color:"info",flat:"",dense:"",href:`https://typesense.org/docs/${c(l).data.debug.version||c(l).data.defaultDocVersion}/api/stemming.html`,target:"_blank"},{default:a(()=>[...e[8]||(e[8]=[m(" Documentation ",-1)])]),_:1},8,["href"])]),_:1}),t(V,{class:"q-col-gutter-md row"},{default:a(()=>[t(d,{unelevated:"",disable:!c(s).platform.is.electron,icon:"sym_s_attach_file",onClick:e[2]||(e[2]=o=>h())},{default:a(()=>[e[9]||(e[9]=m(" Import from file ",-1)),c(s).platform.is.electron?S("",!0):(g(),j("span",X," (only desktop version)"))]),_:1},8,["disable"])]),_:1})]),_:1}),t(v,{name:"json",class:"q-pa-none"},{default:a(()=>[t(W,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),style:{height:"60vh"}},null,8,["modelValue"]),r.value?(g(),D(P,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:a(()=>[m(" Invalid Format: "+Q(r.value),1)]),_:1})):S("",!0)]),_:1})]),_:1},8,["modelValue"]),t(E,{align:"right",class:"bg-primary"},{default:a(()=>[t(d,{size:"md",padding:"sm lg",unelevated:"",color:"primary",disable:!!r.value,onClick:e[5]||(e[5]=o=>C())},{default:a(()=>[m(Q(y.value?"Append":"Add")+" Dictionary ",1)]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"]),t(H,{class:"q-mt-md",flat:"",bordered:"","wrap-cells":"",filter:i.filter,rows:k.value,columns:i.columns,"row-key":"id"},{"top-left":a(()=>[F("div",G,[t(x,{size:"md",name:"sym_s_playlist_remove"}),e[10]||(e[10]=m(" Stemming Dictionaries ",-1))])]),"top-right":a(()=>[t(w,{modelValue:i.filter,"onUpdate:modelValue":e[7]||(e[7]=o=>i.filter=o),borderless:"",dense:"",debounce:"300",placeholder:"Search"},{append:a(()=>[t(x,{name:"sym_s_search"})]),_:1},8,["modelValue"])]),"body-cell-actions_op":a(o=>[t(K,{class:"text-right text-no-wrap"},{default:a(()=>[t(d,{flat:"",icon:"sym_s_edit",title:"Edit",onClick:$=>N(o.row.id)},null,8,["onClick"]),t(d,{flat:"",color:"negative",icon:"sym_s_delete_forever",title:"Delete",onClick:$=>U(o.row.id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["filter","rows","columns"])]),_:1}))}});export{pe as default};
