import{d as f,b as l,c as h,u as g}from"./index-CNyTRbVy.js";const e=f(({store:n})=>{l.is.electron||h.get("config.json").then(t=>{const i=g(n);if(t.data&&t.data.node){let o=t.data.node;if(o?.host&&String(o.host).toUpperCase()==="SAME"){const a=window.location,d=String(a.protocol||"").replace(":","")||o.protocol||"http",c=d==="https"?443:80,r=Number(a.port||o.port||c);o={...o,host:a.hostname,port:r,protocol:d},t.data.node=o}i.setCurrentNodeConfig(o),t.data.apiKey&&i.login(t.data)}t.data&&t.data.history&&t.data.history.forEach(o=>{const a=JSON.stringify(o);i.loginHistory.includes(a)||i.loginHistory.push(a)}),t.data&&t.data.ui&&i.setUIConfig(t.data.ui)})});export{e as default};
